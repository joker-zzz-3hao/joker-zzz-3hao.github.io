(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{VqI1:function(le,_e){/*! https://github.com/xiazeyu/live2d-widget.js built@2019-4-6 09:38:26 */(function(Gt,M){for(var j in M)Gt[j]=M[j]})(_e,function(Gt){var M={};function j(A){if(M[A])return M[A].exports;var v=M[A]={i:A,l:!1,exports:{}};return Gt[A].call(v.exports,v,v.exports,j),v.l=!0,v.exports}return j.m=Gt,j.c=M,j.d=function(A,v,l){j.o(A,v)||Object.defineProperty(A,v,{configurable:!1,enumerable:!0,get:l})},j.n=function(A){var v=A&&A.__esModule?function(){return A.default}:function(){return A};return j.d(v,"a",v),v},j.o=function(A,v){return Object.prototype.hasOwnProperty.call(A,v)},j.p="",j(j.s=8)}([function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.L2Dwidget=void 0;var A,v=function(){function P(x,d){for(var X=0;X<d.length;X++){var N=d[X];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,d,X){return d&&P(x.prototype,d),X&&P(x,X),x}}(),l=j(5),w=(A=l,A&&A.__esModule?A:{default:A}),W=j(1),F=void 0,T=new(function(){function P(){(function(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")})(this,P),this.eventHandlers={},this.config=W.config}return v(P,[{key:"on",value:function(d,X){if(typeof X!="function")throw new TypeError("Event handler is not a function.");return this.eventHandlers[d]||(this.eventHandlers[d]=[]),this.eventHandlers[d].push(X),this}},{key:"emit",value:function(d){for(var X=arguments.length,N=Array(X>1?X-1:0),St=1;St<X;St++)N[St-1]=arguments[St];return this.eventHandlers[d]&&this.eventHandlers[d].forEach(function(Ft){typeof Ft=="function"&&Ft.apply(void 0,N)}),this.eventHandlers["*"]&&this.eventHandlers["*"].forEach(function(Ft){typeof Ft=="function"&&Ft.apply(void 0,[d].concat(N))}),this}},{key:"init",value:function(){var d=this,X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,W.configApplyer)(X),this.emit("config",this.config),!W.config.mobile.show&&w.default.mobile()||new Promise(function(N){N()}).then(j.bind(null,11)).then(function(N){(F=N).theRealInit(d)}).catch(function(N){console.error(N)})}},{key:"captureFrame",value:function(d){return F.captureFrame(d)}},{key:"downloadFrame",value:function(){this.captureFrame(function(d){var X=document.createElement("a");document.body.appendChild(X),X.setAttribute("type","hidden"),X.href=d,X.download="live2d.png",X.click()})}}]),P}());M.L2Dwidget=T},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.config=M.configApplyer=void 0;var A=l(j(9)),v=l(j(10));function l(W){return W&&W.__esModule?W:{default:W}}var w={};M.configApplyer=function(W){(0,v.default)(w,W,A.default)},M.config=w},function(Gt,M,j){"use strict";(function(A){Object.defineProperty(M,"__esModule",{value:!0});var v=!0;function l(){v||(this._$MT=null,this._$5S=null,this._$NP=0,l._$42++,this._$5S=new C(this))}l._$0s=1,l._$4s=2,l._$42=0,l._$62=function(t,i){try{if(i instanceof ArrayBuffer&&(i=new DataView(i)),!(i instanceof DataView))throw new $i("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var e,r=new Zt(i),n=r._$ST(),o=r._$ST(),h=r._$ST();if(n!=109||o!=111||h!=99)throw new $i("_$gi _$C _$li , _$Q0 _$P0.");if(e=r._$ST(),r._$gr(e),e>Tt._$T7)throw t._$NP|=l._$4s,new $i("_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+Tt._$T7+" < _$f0 : "+e+` )@_$SS#loadModel()
`);var _=r._$nP();if(e>=Tt._$s7){var a=r._$9T(),s=r._$9T();if(a!=-30584||s!=-30584)throw t._$NP|=l._$0s,new $i("_$gi _$C _$li , _$0 _$6 _$Ui.")}t._$KS(_);var f=t.getModelContext();f.setDrawParam(t.getDrawParam()),f.init()}catch(c){T._$Rb(c)}},l.prototype._$KS=function(t){this._$MT=t},l.prototype.getModelImpl=function(){return this._$MT==null&&(this._$MT=new X,this._$MT._$zP()),this._$MT},l.prototype.getCanvasWidth=function(){return this._$MT==null?0:this._$MT.getCanvasWidth()},l.prototype.getCanvasHeight=function(){return this._$MT==null?0:this._$MT.getCanvasHeight()},l.prototype.getParamFloat=function(t){return typeof t!="number"&&(t=this._$5S.getParamIndex(d.getID(t))),this._$5S.getParamFloat(t)},l.prototype.setParamFloat=function(t,i,e){typeof t!="number"&&(t=this._$5S.getParamIndex(d.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1-e)+i*e)},l.prototype.addToParamFloat=function(t,i,e){typeof t!="number"&&(t=this._$5S.getParamIndex(d.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)+i*e)},l.prototype.multParamFloat=function(t,i,e){typeof t!="number"&&(t=this._$5S.getParamIndex(d.getID(t))),arguments.length<3&&(e=1),this._$5S.setParamFloat(t,this._$5S.getParamFloat(t)*(1+(i-1)*e))},l.prototype.getParamIndex=function(t){return this._$5S.getParamIndex(d.getID(t))},l.prototype.loadParam=function(){this._$5S.loadParam()},l.prototype.saveParam=function(){this._$5S.saveParam()},l.prototype.init=function(){this._$5S.init()},l.prototype.update=function(){this._$5S.update()},l.prototype._$Rs=function(){return T._$li("_$60 _$PT _$Rs()"),-1},l.prototype._$Ds=function(t){T._$li(`_$60 _$PT _$SS#_$Ds() 
`)},l.prototype._$K2=function(){},l.prototype.draw=function(){},l.prototype.getModelContext=function(){return this._$5S},l.prototype._$s2=function(){return this._$NP},l.prototype._$P7=function(t,i,e,r){var n=-1,o=0;if(e!=0)if(t.length==1){p=t[0];var h=this.getParamFloat(p)!=0,_=(y=i[0],this.getPartsOpacity(y)),a=e/r;h?(_+=a)>1&&(_=1):(_-=a)<0&&(_=0),this.setPartsOpacity(y,_)}else{for(c=0;c<t.length;c++)if(p=t[c],u=this.getParamFloat(p)!=0){if(n>=0)break;n=c,y=i[c],o=this.getPartsOpacity(y),(o+=e/r)>1&&(o=1)}for(n<0&&(console.log("No _$wi _$q0/ _$U default[%s]",t[0]),n=0,o=1,this.loadParam(),this.setParamFloat(t[n],o),this.saveParam()),c=0;c<t.length;c++)if(y=i[c],n==c)this.setPartsOpacity(y,o);else{var s,f=this.getPartsOpacity(y);(1-(s=o<.5?-.5*o/.5+1:.5*(1-o)/.5))*(1-o)>.15&&(s=1-.15/(1-o)),f>s&&(f=s),this.setPartsOpacity(y,f)}}else for(var c=0;c<t.length;c++){var p=t[c],y=i[c],u=this.getParamFloat(p)!=0;this.setPartsOpacity(y,u?1:0)}},l.prototype.setPartsOpacity=function(t,i){typeof t!="number"&&(t=this._$5S.getPartsDataIndex(x.getID(t))),this._$5S.setPartsOpacity(t,i)},l.prototype.getPartsDataIndex=function(t){return t instanceof x||(t=x.getID(t)),this._$5S.getPartsDataIndex(t)},l.prototype.getPartsOpacity=function(t){return typeof t!="number"&&(t=this._$5S.getPartsDataIndex(x.getID(t))),t<0?0:this._$5S.getPartsOpacity(t)},l.prototype.getDrawParam=function(){},l.prototype.getDrawDataIndex=function(t){return this._$5S.getDrawDataIndex(q.getID(t))},l.prototype.getDrawData=function(t){return this._$5S.getDrawData(t)},l.prototype.getTransformedPoints=function(t){var i=this._$5S._$C2(t);return i instanceof Di?i.getTransformedPoints():null},l.prototype.getIndexArray=function(t){if(t<0||t>=this._$5S._$aS.length)return null;var i=this._$5S._$aS[t];return i!=null&&i.getType()==gt._$wb&&i instanceof xt?i.getIndexArray():null};function w(t){if(!v){this.clipContextList=new Array,this.glcontext=t.gl,this.dp_webgl=t,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new E,S.glContext.length>S.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new et,this.tmpMatrix2=new et,this.tmpMatrixForMask=new et,this.tmpMatrixForDraw=new et,this.CHANNEL_COLORS=new Array;var i=new Et;(i=new Et).r=0,i.g=0,i.b=0,i.a=1,this.CHANNEL_COLORS.push(i),(i=new Et).r=1,i.g=0,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),(i=new Et).r=0,i.g=1,i.b=0,i.a=0,this.CHANNEL_COLORS.push(i),(i=new Et).r=0,i.g=0,i.b=1,i.a=0,this.CHANNEL_COLORS.push(i);for(var e=0;e<this.CHANNEL_COLORS.length;e++)this.dp_webgl.setChannelFlagAsColor(e,this.CHANNEL_COLORS[e])}}w.CHANNEL_COUNT=4,w.RENDER_TEXTURE_USE_MIPMAP=!1,w.NOT_USED_FRAME=-100,w.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var t=this.CHANNEL_COLORS.length-1;t>=0;--t)this.CHANNEL_COLORS.splice(t,1);this.CHANNEL_COLORS=[]}this.releaseShader()},w.prototype.releaseShader=function(){for(var t=S.frameBuffers.length,i=0;i<t;i++)this.gl.deleteFramebuffer(S.frameBuffers[i].framebuffer);S.frameBuffers=[],S.glContext=[]},w.prototype.init=function(t,i,e){for(var r=0;r<i.length;r++){var n=i[r].getClipIDList();if(n!=null){var o=this.findSameClip(n);o==null&&(o=new W(this,t,n),this.clipContextList.push(o));var h=i[r].getDrawDataID(),_=t.getDrawDataIndex(h);o.addClippedDrawData(h,_),e[r].clipBufPre_clipContext=o}}},w.prototype.getMaskRenderTexture=function(){var t=null;return t=this.dp_webgl.createFramebuffer(),S.frameBuffers[this.dp_webgl.glno]=t,this.dp_webgl.glno},w.prototype.setupClip=function(t,i){for(var e=0,r=0;r<this.clipContextList.length;r++){var n=this.clipContextList[r];this.calcClippedDrawTotalBounds(t,n),n.isUsing&&e++}if(e>0){var o=i.gl.getParameter(i.gl.FRAMEBUFFER_BINDING),h=new Array(4);for(h[0]=0,h[1]=0,h[2]=i.gl.canvas.width,h[3]=i.gl.canvas.height,i.gl.viewport(0,0,S.clippingMaskBufferSize,S.clippingMaskBufferSize),this.setupLayoutBounds(e),i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,S.frameBuffers[this.curFrameNo].framebuffer),i.gl.clearColor(0,0,0,0),i.gl.clear(i.gl.COLOR_BUFFER_BIT),r=0;r<this.clipContextList.length;r++){var _=(n=this.clipContextList[r]).allClippedDrawRect,a=(n.layoutChannelNo,n.layoutBounds);this.tmpBoundsOnModel._$jL(_),this.tmpBoundsOnModel.expand(.05*_.width,.05*_.height);var s=a.width/this.tmpBoundsOnModel.width,f=a.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(s,f,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(a.x,a.y,0),this.tmpMatrix2.scale(s,f,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var c=this.tmpMatrixForMask.getArray(),p=0;p<16;p++)n.matrixForMask[p]=c[p];var y=this.tmpMatrixForDraw.getArray();for(p=0;p<16;p++)n.matrixForDraw[p]=y[p];for(var u=n.clippingMaskDrawIndexList.length,O=0;O<u;O++){var I=n.clippingMaskDrawIndexList[O],k=t.getDrawData(I),rt=t._$C2(I);i.setClipBufPre_clipContextForMask(n),k.draw(i,t,rt)}}i.gl.bindFramebuffer(i.gl.FRAMEBUFFER,o),i.setClipBufPre_clipContextForMask(null),i.gl.viewport(h[0],h[1],h[2],h[3])}},w.prototype.getColorBuffer=function(){return this.colorBuffer},w.prototype.findSameClip=function(t){for(var i=0;i<this.clipContextList.length;i++){var e=this.clipContextList[i],r=e.clipIDList.length;if(r==t.length){for(var n=0,o=0;o<r;o++)for(var h=e.clipIDList[o],_=0;_<r;_++)if(t[_]==h){n++;break}if(n==r)return e}}return null},w.prototype.calcClippedDrawTotalBounds=function(t,i){for(var e=t._$Ri.getModelImpl().getCanvasWidth(),r=t._$Ri.getModelImpl().getCanvasHeight(),n=e>r?e:r,o=n,h=n,_=0,a=0,s=i.clippedDrawContextList.length,f=0;f<s;f++){var c=i.clippedDrawContextList[f].drawDataIndex,p=t._$C2(c);if(p._$yo()){for(var y=p.getTransformedPoints(),u=y.length,O=[],I=[],k=0,rt=$t._$i2;rt<u;rt+=$t._$No)O[k]=y[rt],I[k]=y[rt+1],k++;var L=Math.min.apply(null,O),ot=Math.min.apply(null,I),ht=Math.max.apply(null,O),ct=Math.max.apply(null,I);L<o&&(o=L),ot<h&&(h=ot),ht>_&&(_=ht),ct>a&&(a=ct)}}if(o==n)i.allClippedDrawRect.x=0,i.allClippedDrawRect.y=0,i.allClippedDrawRect.width=0,i.allClippedDrawRect.height=0,i.isUsing=!1;else{var U=_-o,R=a-h;i.allClippedDrawRect.x=o,i.allClippedDrawRect.y=h,i.allClippedDrawRect.width=U,i.allClippedDrawRect.height=R,i.isUsing=!0}},w.prototype.setupLayoutBounds=function(t){var i=t/w.CHANNEL_COUNT,e=t%w.CHANNEL_COUNT;i=~~i,e=~~e;for(var r=0,n=0;n<w.CHANNEL_COUNT;n++){var o=i+(n<e?1:0);if(o!=0)if(o==1)(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=0,s.layoutBounds.y=0,s.layoutBounds.width=1,s.layoutBounds.height=1;else if(o==2)for(var h=0;h<o;h++){var _=0;a=~~(a=h%2),(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=.5*a,s.layoutBounds.y=0,s.layoutBounds.width=.5,s.layoutBounds.height=1}else if(o<=4)for(h=0;h<o;h++)a=~~(a=h%2),_=~~(_=h/2),(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=.5*a,s.layoutBounds.y=.5*_,s.layoutBounds.width=.5,s.layoutBounds.height=.5;else if(o<=9)for(h=0;h<o;h++){var a;a=~~(a=h%3),_=~~(_=h/3);var s;(s=this.clipContextList[r++]).layoutChannelNo=n,s.layoutBounds.x=a/3,s.layoutBounds.y=_/3,s.layoutBounds.width=1/3,s.layoutBounds.height=1/3}else T._$li("_$6 _$0P mask count : %d",o)}};function W(t,i,e){this.clipIDList=new Array,this.clipIDList=e,this.clippingMaskDrawIndexList=new Array;for(var r=0;r<e.length;r++)this.clippingMaskDrawIndexList.push(i.getDrawDataIndex(e[r]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new E,this.allClippedDrawRect=new E,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=t}W.prototype.addClippedDrawData=function(t,i){var e=new function(r,n){this._$gP=r,this.drawDataIndex=n}(t,i);this.clippedDrawContextList.push(e)};function F(){v||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}F._$JT=function(t,i,e){var r=t/i,n=e/i,o=1-(1-n)*(1-n),h=1-(1-n)*(1-n),_=1/3*(1-n)*o+(n*(2/3)+1/3*(1-n))*(1-o),a=(n+2/3*(1-n))*h+(n*(1/3)+2/3*(1-n))*(1-h),s=1-3*a+3*_-0,f=3*a-6*_+0,c=3*_-0;if(r<=0)return 0;if(r>=1)return 1;var p=r*r;return s*(r*p)+f*p+c*r+0},F.prototype._$a0=function(){},F.prototype.setFadeIn=function(t){this._$dP=t},F.prototype.setFadeOut=function(t){this._$eo=t},F.prototype._$pT=function(t){this._$V0=t},F.prototype.getFadeOut=function(){return this._$eo},F.prototype._$4T=function(){return this._$eo},F.prototype._$mT=function(){return this._$V0},F.prototype.getDurationMSec=function(){return-1},F.prototype.getLoopDurationMSec=function(){return-1},F.prototype.updateParam=function(t,i){if(i._$AT&&!i._$9L){var e=J.getUserTimeMSec();if(i._$z2<0){i._$z2=e,i._$bs=e;var r=this.getDurationMSec();i._$Do<0&&(i._$Do=r<=0?-1:i._$z2+r)}var n=this._$V0;0<=(n=n*(this._$dP==0?1:Ci._$r2((e-i._$bs)/this._$dP))*(this._$eo==0||i._$Do<0?1:Ci._$r2((i._$Do-e)/this._$eo)))&&n<=1||console.log("### assert!! ### "),this.updateParamExe(t,e,n,i),i._$Do>0&&i._$Do<e&&(i._$9L=!0)}},F.prototype.updateParamExe=function(t,i,e,r){};function T(){}T._$8s=0,T._$fT=new Object,T.start=function(t){var i=T._$fT[t];i==null&&((i=new function(){this._$r=null,this._$0S=null})._$r=t,T._$fT[t]=i),i._$0S=J.getSystemTimeMSec()},T.dump=function(t){var i=T._$fT[t];if(i!=null){var e=J.getSystemTimeMSec()-i._$0S;return console.log(t+" : "+e+"ms"),e}return-1},T.end=function(t){var i=T._$fT[t];return i!=null?J.getSystemTimeMSec()-i._$0S:-1},T._$li=function(t,i){console.log("_$li : "+t+`
`,i)},T._$Ji=function(t,i){console.log(t,i)},T._$dL=function(t,i){console.log(t,i),console.log(`
`)},T._$KL=function(t,i){for(var e=0;e<i;e++)e%16==0&&e>0?console.log(`
`):e%8==0&&e>0&&console.log("  "),console.log("%02X ",255&t[e]);console.log(`
`)},T._$nr=function(t,i,e){console.log(`%s
`,t);for(var r=i.length,n=0;n<r;++n)console.log("%5d",i[n]),console.log(`%s
`,e),console.log(",");console.log(`
`)},T._$Rb=function(t){console.log("dump exception : "+t),console.log("stack :: "+t.stack)};function P(){v||(this.x=null,this.y=null,this.width=null,this.height=null)}P.prototype._$8P=function(){return .5*(this.x+this.x+this.width)},P.prototype._$6P=function(){return .5*(this.y+this.y+this.height)},P.prototype._$EL=function(){return this.x+this.width},P.prototype._$5T=function(){return this.y+this.height},P.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},P.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height};function x(t){v||_i.prototype.constructor.call(this,t)}x.prototype=new _i,x._$tP=new Object,x._$27=function(){x._$tP.clear()},x.getID=function(t){var i=x._$tP[t];return i==null&&(i=new x(t),x._$tP[t]=i),i},x.prototype._$3s=function(){return new x};function d(t){v||_i.prototype.constructor.call(this,t)}d.prototype=new _i,d._$tP=new Object,d._$27=function(){d._$tP.clear()},d.getID=function(t){var i=d._$tP[t];return i==null&&(i=new d(t),d._$tP[t]=i),i},d.prototype._$3s=function(){return new d};function X(){v||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,X._$42++)}X._$42=0,X.prototype._$zP=function(){this._$vo==null&&(this._$vo=new fi),this._$F2==null&&(this._$F2=new Array)},X.prototype.getCanvasWidth=function(){return this._$ao},X.prototype.getCanvasHeight=function(){return this._$1S},X.prototype._$F0=function(t){this._$vo=t._$nP(),this._$F2=t._$nP(),this._$ao=t._$6L(),this._$1S=t._$6L()},X.prototype._$6S=function(t){this._$F2.push(t)},X.prototype._$Xr=function(){return this._$F2},X.prototype._$E2=function(){return this._$vo};function N(){v||(this.p1=new St,this.p2=new St,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}N.prototype.setup=function(t,i,e){this._$ks=this._$Yb(),this.p2._$xT(),arguments.length==3&&(this._$Fo=t,this._$L2=i,this.p1._$p=e,this.p2._$p=e,this.p2.y=t,this.setup())},N.prototype.getPhysicsPoint1=function(){return this.p1},N.prototype.getPhysicsPoint2=function(){return this.p2},N.prototype._$qr=function(){return this._$Db},N.prototype._$pr=function(t){this._$Db=t},N.prototype._$5r=function(){return this._$M2},N.prototype._$Cs=function(){return this._$9b},N.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},N.prototype.addSrcParam=function(t,i,e,r){var n=new dt(t,i,e,r);this._$lL.push(n)},N.prototype.addTargetParam=function(t,i,e,r){var n=new $(t,i,e,r);this._$qP.push(n)},N.prototype.update=function(t,i){if(this._$iP==0)return this._$iP=this._$iT=i,void(this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));var e=(i-this._$iT)/1e3;if(e!=0){for(var r=this._$lL.length-1;r>=0;--r)this._$lL[r]._$oP(t,this);this._$oo(t,e),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/e,this._$ks=this._$M2}for(r=this._$qP.length-1;r>=0;--r)this._$qP[r]._$YS(t,this);this._$iT=i},N.prototype._$oo=function(t,i){i<.033&&(i=.033);var e=1/i;this.p1.vx=(this.p1.x-this.p1._$s0)*e,this.p1.vy=(this.p1.y-this.p1._$70)*e,this.p1.ax=(this.p1.vx-this.p1._$7L)*e,this.p1.ay=(this.p1.vy-this.p1._$HL)*e,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var r,n,o=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),h=Math.cos(o),_=Math.sin(o),a=9.8*this.p2._$p,s=this._$Db*Wt._$bS,f=a*Math.cos(o-s);r=f*_,n=f*h;var c=-this.p1.fx*_*_,p=-this.p1.fy*_*h,y=-this.p2.vx*this._$L2,u=-this.p2.vy*this._$L2;this.p2.fx=r+c+y,this.p2.fy=n+p+u,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*i,this.p2.vy+=this.p2.ay*i,this.p2.x+=this.p2.vx*i,this.p2.y+=this.p2.vy*i;var O=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/O,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/O,this.p2.vx=(this.p2.x-this.p2._$s0)*e,this.p2.vy=(this.p2.y-this.p2._$70)*e,this.p2._$xT()};function St(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}St.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy};function Ft(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}Ft.prototype._$oP=function(t,i){};function dt(t,i,e,r){Ft.prototype.constructor.call(this,i,e,r),this._$tL=null,this._$tL=t}dt.prototype=new Ft,dt.prototype._$oP=function(t,i){var e=this.scale*t.getParamFloat(this._$wL),r=i.getPhysicsPoint1();switch(this._$tL){default:case N.Src.SRC_TO_X:r.x=r.x+(e-r.x)*this._$V0;break;case N.Src.SRC_TO_Y:r.y=r.y+(e-r.y)*this._$V0;break;case N.Src.SRC_TO_G_ANGLE:var n=i._$qr();n+=(e-n)*this._$V0,i._$pr(n)}};function bt(t,i,e){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=t,this.scale=i,this._$V0=e}bt.prototype._$YS=function(t,i){};function $(t,i,e,r){bt.prototype.constructor.call(this,i,e,r),this._$YP=null,this._$YP=t}$.prototype=new bt,$.prototype._$YS=function(t,i){switch(this._$YP){default:case N.Target.TARGET_FROM_ANGLE:t.setParamFloat(this._$wL,this.scale*i._$5r(),this._$V0);break;case N.Target.TARGET_FROM_ANGLE_V:t.setParamFloat(this._$wL,this.scale*i._$Cs(),this._$V0)}},N.Src=function(){},N.Src.SRC_TO_X="SRC_TO_X",N.Src.SRC_TO_Y="SRC_TO_Y",N.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",N.Target=function(){},N.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",N.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";function g(){v||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}g.prototype.init=function(t){this._$fL=t._$fL,this._$gL=t._$gL,this._$B0=t._$B0,this._$z0=t._$z0,this._$qT=t._$qT,this.reflectX=t.reflectX,this.reflectY=t.reflectY},g.prototype._$F0=function(t){this._$fL=t._$_T(),this._$gL=t._$_T(),this._$B0=t._$_T(),this._$z0=t._$_T(),this._$qT=t._$_T(),t.getFormatVersion()>=Tt.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=t._$po(),this.reflectY=t._$po())},g.prototype._$e=function(){};var b=function(){};b._$ni=function(t,i,e,r,n,o,h,_,a){var s=h*o-_*n;if(s==0)return null;var f,c=((t-e)*o-(i-r)*n)/s;return f=n!=0?(t-e-c*h)/n:(i-r-c*_)/o,isNaN(f)&&(f=(t-e-c*h)/n,isNaN(f)&&(f=(i-r-c*_)/o),isNaN(f)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+n),console.log("v1x != 0 ? "+(n!=0)))),a==null?new Array(f,c):(a[0]=f,a[1]=c,a)};function E(){v||(this.x=null,this.y=null,this.width=null,this.height=null)}E.prototype._$8P=function(){return this.x+.5*this.width},E.prototype._$6P=function(){return this.y+.5*this.height},E.prototype._$EL=function(){return this.x+this.width},E.prototype._$5T=function(){return this.y+this.height},E.prototype._$jL=function(t,i,e,r){this.x=t,this.y=i,this.width=e,this.height=r},E.prototype._$jL=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},E.prototype.contains=function(t,i){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},E.prototype.expand=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i};function G(){}G._$Z2=function(t,i,e,r){var n=i._$Q2(t,e),o=t._$vs(),h=t._$Tr();if(i._$zr(o,h,n),n<=0)return r[o[0]];if(n==1)return(_=r[o[0]])+((a=r[o[1]])-_)*(c=h[0])|0;if(n==2){var _=r[o[0]],a=r[o[1]],s=r[o[2]],f=r[o[3]],c=h[0],p=h[1];return(ct=_+(a-_)*c|0)+((s+(f-s)*c|0)-ct)*p|0}if(n==3){var y=r[o[0]],u=r[o[1]],O=r[o[2]],I=r[o[3]],k=r[o[4]],rt=r[o[5]],L=r[o[6]],ot=r[o[7]],ht=(c=h[0],p=h[1],h[2]);return(ct=(_=y+(u-y)*c|0)+((a=O+(I-O)*c|0)-_)*p|0)+(((s=k+(rt-k)*c|0)+((f=L+(ot-L)*c|0)-s)*p|0)-ct)*ht|0}if(n==4){var ct,U=r[o[0]],R=r[o[1]],yt=r[o[2]],Rt=r[o[3]],Ut=r[o[4]],Yt=r[o[5]],nt=r[o[6]],K=r[o[7]],lt=r[o[8]],V=r[o[9]],pt=r[o[10]],ft=r[o[11]],st=r[o[12]],at=r[o[13]],H=r[o[14]],Q=r[o[15]],zt=(c=h[0],p=h[1],ht=h[2],h[3]);return(ct=(_=(y=U+(R-U)*c|0)+((u=yt+(Rt-yt)*c|0)-y)*p|0)+((a=(O=Ut+(Yt-Ut)*c|0)+((I=nt+(K-nt)*c|0)-O)*p|0)-_)*ht|0)+(((s=(k=lt+(V-lt)*c|0)+((rt=pt+(ft-pt)*c|0)-k)*p|0)+((f=(L=st+(at-st)*c|0)+((ot=H+(Q-H)*c|0)-L)*p|0)-s)*ht|0)-ct)*zt|0}for(var Mt=1<<n,ut=new Float32Array(Mt),Pt=0;Pt<Mt;Pt++){for(var At=Pt,vt=1,It=0;It<n;It++)vt*=At%2==0?1-h[It]:h[It],At/=2;ut[Pt]=vt}for(var Ct=new Float32Array(Mt),Xt=0;Xt<Mt;Xt++)Ct[Xt]=r[o[Xt]];var ei=0;for(Xt=0;Xt<Mt;Xt++)ei+=ut[Xt]*Ct[Xt];return ei+.5|0},G._$br=function(t,i,e,r){var n=i._$Q2(t,e),o=t._$vs(),h=t._$Tr();if(i._$zr(o,h,n),n<=0)return r[o[0]];if(n==1)return(_=r[o[0]])+((a=r[o[1]])-_)*(c=h[0]);if(n==2){var _=r[o[0]],a=r[o[1]],s=r[o[2]],f=r[o[3]],c=h[0];return(1-(ot=h[1]))*(_+(a-_)*c)+ot*(s+(f-s)*c)}if(n==3){var p=r[o[0]],y=r[o[1]],u=r[o[2]],O=r[o[3]],I=r[o[4]],k=r[o[5]],rt=r[o[6]],L=r[o[7]],ot=(c=h[0],h[1]);return(1-(H=h[2]))*((1-ot)*(p+(y-p)*c)+ot*(u+(O-u)*c))+H*((1-ot)*(I+(k-I)*c)+ot*(rt+(L-rt)*c))}if(n==4){var ht=r[o[0]],ct=r[o[1]],U=r[o[2]],R=r[o[3]],yt=r[o[4]],Rt=r[o[5]],Ut=r[o[6]],Yt=r[o[7]],nt=r[o[8]],K=r[o[9]],lt=r[o[10]],V=r[o[11]],pt=r[o[12]],ft=r[o[13]],st=r[o[14]],at=r[o[15]],H=(c=h[0],ot=h[1],h[2]),Q=h[3];return(1-Q)*((1-H)*((1-ot)*(ht+(ct-ht)*c)+ot*(U+(R-U)*c))+H*((1-ot)*(yt+(Rt-yt)*c)+ot*(Ut+(Yt-Ut)*c)))+Q*((1-H)*((1-ot)*(nt+(K-nt)*c)+ot*(lt+(V-lt)*c))+H*((1-ot)*(pt+(ft-pt)*c)+ot*(st+(at-st)*c)))}for(var zt=1<<n,Mt=new Float32Array(zt),ut=0;ut<zt;ut++){for(var Pt=ut,At=1,vt=0;vt<n;vt++)At*=Pt%2==0?1-h[vt]:h[vt],Pt/=2;Mt[ut]=At}for(var It=new Float32Array(zt),Ct=0;Ct<zt;Ct++)It[Ct]=r[o[Ct]];var Xt=0;for(Ct=0;Ct<zt;Ct++)Xt+=Mt[Ct]*It[Ct];return Xt},G._$Vr=function(t,i,e,r,n,o,h,_){var a=i._$Q2(t,e),s=t._$vs(),f=t._$Tr();i._$zr(s,f,a);var c=2*r,p=h;if(a<=0){var y=n[s[0]];if(_==2&&h==0)J._$jT(y,0,o,0,c);else for(var u=0;u<c;)o[p]=y[u++],o[p+1]=y[u++],p+=_}else if(a==1){y=n[s[0]];var O=n[s[1]],I=1-(L=f[0]);for(u=0;u<c;)o[p]=y[u]*I+O[u]*L,++u,o[p+1]=y[u]*I+O[u]*L,++u,p+=_}else if(a==2){y=n[s[0]],O=n[s[1]];var k=n[s[2]],rt=n[s[3]],L=f[0],ot=(ut=1-(V=f[1]))*(I=1-L),ht=ut*L,ct=V*I,U=V*L;for(u=0;u<c;)o[p]=ot*y[u]+ht*O[u]+ct*k[u]+U*rt[u],++u,o[p+1]=ot*y[u]+ht*O[u]+ct*k[u]+U*rt[u],++u,p+=_}else if(a==3){var R=n[s[0]],yt=n[s[1]],Rt=n[s[2]],Ut=n[s[3]],Yt=n[s[4]],nt=n[s[5]],K=n[s[6]],lt=n[s[7]],V=(L=f[0],f[1]),pt=(Pt=1-(ri=f[2]))*(ut=1-V)*(I=1-L),ft=Pt*ut*L,st=Pt*V*I,at=Pt*V*L,H=ri*ut*I,Q=ri*ut*L,zt=ri*V*I,Mt=ri*V*L;for(u=0;u<c;)o[p]=pt*R[u]+ft*yt[u]+st*Rt[u]+at*Ut[u]+H*Yt[u]+Q*nt[u]+zt*K[u]+Mt*lt[u],++u,o[p+1]=pt*R[u]+ft*yt[u]+st*Rt[u]+at*Ut[u]+H*Yt[u]+Q*nt[u]+zt*K[u]+Mt*lt[u],++u,p+=_}else if(a==4){var ut,Pt,At=n[s[0]],vt=n[s[1]],It=n[s[2]],Ct=n[s[3]],Xt=n[s[4]],ei=n[s[5]],hi=n[s[6]],di=n[s[7]],vi=n[s[8]],gi=n[s[9]],si=n[s[10]],qt=n[s[11]],yi=n[s[12]],Si=n[s[13]],Ai=n[s[14]],Ii=n[s[15]],ri=(L=f[0],V=f[1],f[2]),mi=f[3],Pi=1-mi,ki=Pi*(Pt=1-ri)*(ut=1-V)*(I=1-L),Xi=Pi*Pt*ut*L,Vi=Pi*Pt*V*I,zi=Pi*Pt*V*L,Hi=Pi*ri*ut*I,ji=Pi*ri*ut*L,Wi=Pi*ri*V*I,qi=Pi*ri*V*L,Ji=mi*Pt*ut*I,Qi=mi*Pt*ut*L,Zi=mi*Pt*V*I,Ki=mi*Pt*V*L,te=mi*ri*ut*I,ie=mi*ri*ut*L,ee=mi*ri*V*I,re=mi*ri*V*L;for(u=0;u<c;)o[p]=ki*At[u]+Xi*vt[u]+Vi*It[u]+zi*Ct[u]+Hi*Xt[u]+ji*ei[u]+Wi*hi[u]+qi*di[u]+Ji*vi[u]+Qi*gi[u]+Zi*si[u]+Ki*qt[u]+te*yi[u]+ie*Si[u]+ee*Ai[u]+re*Ii[u],++u,o[p+1]=ki*At[u]+Xi*vt[u]+Vi*It[u]+zi*Ct[u]+Hi*Xt[u]+ji*ei[u]+Wi*hi[u]+qi*di[u]+Ji*vi[u]+Qi*gi[u]+Zi*si[u]+Ki*qt[u]+te*yi[u]+ie*Si[u]+ee*Ai[u]+re*Ii[u],++u,p+=_}else{for(var bi=1<<a,Ui=new Float32Array(bi),Ri=0;Ri<bi;Ri++){for(var oe=Ri,ne=1,Fi=0;Fi<a;Fi++)ne*=oe%2==0?1-f[Fi]:f[Fi],oe/=2;Ui[Ri]=ne}for(var Yi=new Float32Array(bi),ui=0;ui<bi;ui++)Yi[ui]=n[s[ui]];for(u=0;u<c;){var se=0,ae=0,he=u+1;for(ui=0;ui<bi;ui++)se+=Ui[ui]*Yi[ui][u],ae+=Ui[ui]*Yi[ui][he];u+=2,o[p]=se,o[p+1]=ae,p+=_}}};function z(){v||(this.x=null,this.y=null)}z.prototype._$HT=function(t,i){this.x=t,this.y=i},z.prototype._$HT=function(t){this.x=t.x,this.y=t.y};function B(){v||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}B._$ur=-2,B._$ES=500,B._$wb=2,B._$8S=3,B._$52=B._$ES,B._$R2=B._$ES,B._$or=function(){return B._$52},B._$Pr=function(){return B._$R2},B.prototype.convertClipIDForV2_11=function(t){var i=[];return t==null||t.length==0?null:/,/.test(t)?i=t.id.split(","):(i.push(t.id),i)},B.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=Tt._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},B.prototype.getClipIDList=function(){return this.clipIDList},B.prototype.init=function(t){},B.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=G._$Z2(t,this._$GS,i._$IS,this._$Lb),!S._$Zs){if(i._$IS[0])return}i._$7s=G._$br(t,this._$GS,i._$IS,this._$mS)},B.prototype._$2b=function(t,i){},B.prototype.getDrawDataID=function(){return this._$gP},B.prototype._$j2=function(t){this._$gP=t},B.prototype.getOpacity=function(t,i){return i._$7s},B.prototype._$zS=function(t,i){return i._$Us},B.prototype._$MS=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<B._$52?B._$52=e:e>B._$R2&&(B._$R2=e)}},B.prototype.getTargetBaseDataID=function(){return this._$dr},B.prototype._$gs=function(t){this._$dr=t},B.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Ht._$2o()},B.prototype.preDraw=function(t,i,e){},B.prototype.draw=function(t,i,e){},B.prototype.getType=function(){},B.prototype._$B2=function(t,i,e){};function tt(){v||(this._$Eb=tt._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=tt.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}tt._$ps=32,tt.CLIPPING_PROCESS_NONE=0,tt.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,tt.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,tt.CLIPPING_PROCESS_DRAW=3,tt.CLIPPING_PROCESS_CLEAR_ALPHA=4,tt.prototype.setChannelFlagAsColor=function(t,i){this.CHANNEL_COLORS[t]=i},tt.prototype.getChannelFlagAsColor=function(t){return this.CHANNEL_COLORS[t]},tt.prototype._$ZT=function(){},tt.prototype._$Uo=function(t,i,e,r,n,o,h){},tt.prototype._$Rs=function(){return-1},tt.prototype._$Ds=function(t){},tt.prototype.setBaseColor=function(t,i,e,r){t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),this._$lT=t,this._$C0=i,this._$tT=e,this._$WL=r},tt.prototype._$WP=function(t){this.culling=t},tt.prototype.setMatrix=function(t){for(var i=0;i<16;i++)this.matrix4x4[i]=t[i]},tt.prototype._$IT=function(){return this.matrix4x4},tt.prototype.setPremultipliedAlpha=function(t){this.premultipliedAlpha=t},tt.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},tt.prototype.setAnisotropy=function(t){this.anisotropy=t},tt.prototype.getAnisotropy=function(){return this.anisotropy},tt.prototype.getClippingProcess=function(){return this.clippingProcess},tt.prototype.setClippingProcess=function(t){this.clippingProcess=t},tt.prototype.setClipBufPre_clipContextForMask=function(t){this.clipBufPre_clipContextMask=t},tt.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},tt.prototype.setClipBufPre_clipContextForDraw=function(t){this.clipBufPre_clipContextDraw=t},tt.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw};function Et(){v||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=S.L2D_COLOR_BLEND_MODE_MULT)}function it(){v||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}it._$ur=-2,it._$c2=1,it._$_b=2,it.prototype._$F0=function(t){this._$kP=t._$nP(),this._$dr=t._$nP()},it.prototype.readV2_opacity=function(t){t.getFormatVersion()>=Tt.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=t._$Tb())},it.prototype.init=function(t){},it.prototype._$Nr=function(t,i){},it.prototype.interpolateOpacity=function(t,i,e,r){this._$mS==null?e.setInterpolatedOpacity(1):e.setInterpolatedOpacity(G._$br(t,i,r,this._$mS))},it.prototype._$2b=function(t,i){},it.prototype._$nb=function(t,i,e,r,n,o,h){},it.prototype.getType=function(){},it.prototype._$gs=function(t){this._$dr=t},it.prototype._$a2=function(t){this._$kP=t},it.prototype.getTargetBaseDataID=function(){return this._$dr},it.prototype.getBaseDataID=function(){return this._$kP},it.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Ht._$2o()};function J(){}J._$W2=0,J._$CS=J._$W2,J._$Mo=function(){return!0},J._$XP=function(t){try{for(var i=getTimeMSec();getTimeMSec()-i<t;);}catch(e){e._$Rb()}},J.getUserTimeMSec=function(){return J._$CS==J._$W2?J.getSystemTimeMSec():J._$CS},J.setUserTimeMSec=function(t){J._$CS=t},J.updateUserTimeMSec=function(){return J._$CS=J.getSystemTimeMSec()},J.getTimeMSec=function(){return new Date().getTime()},J.getSystemTimeMSec=function(){return new Date().getTime()},J._$Q=function(t){},J._$jT=function(t,i,e,r,n){for(var o=0;o<n;o++)e[r+o]=t[i+o]};function mt(){v||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=mt._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}mt._$ds=-2,mt.prototype._$F0=function(t){this._$wL=t._$nP(),this._$VP=t._$6L(),this._$GP=t._$nP()},mt.prototype.getParamIndex=function(t){return this._$2r!=t&&(this._$8o=mt._$ds),this._$8o},mt.prototype._$Pb=function(t,i){this._$8o=t,this._$2r=i},mt.prototype.getParamID=function(){return this._$wL},mt.prototype._$yP=function(t){this._$wL=t},mt.prototype._$N2=function(){return this._$VP},mt.prototype._$d2=function(){return this._$GP},mt.prototype._$t2=function(t,i){this._$VP=t,this._$GP=i},mt.prototype._$Lr=function(){return this._$O2},mt.prototype._$wr=function(t){this._$O2=t},mt.prototype._$SL=function(){return this._$ri},mt.prototype._$AL=function(t){this._$ri=t};function _t(){}_t.startsWith=function(t,i,e){var r=i+e.length;if(r>=t.length)return!1;for(var n=i;n<r;n++)if(_t.getChar(t,n)!=e.charAt(n-i))return!1;return!0},_t.getChar=function(t,i){return String.fromCharCode(t.getUint8(i))},_t.createString=function(t,i,e){for(var r=new ArrayBuffer(2*e),n=new Uint16Array(r),o=0;o<e;o++)n[o]=t.getUint8(i+o);return String.fromCharCode.apply(null,n)},_t._$LS=function(t,i,e,r){t instanceof ArrayBuffer&&(t=new DataView(t));var n=e,o=!1,h=!1,_=0,a=_t.getChar(t,n);a=="-"&&(o=!0,n++);for(var s=!1;n<i;n++){switch(a=_t.getChar(t,n)){case"0":_*=10;break;case"1":_=10*_+1;break;case"2":_=10*_+2;break;case"3":_=10*_+3;break;case"4":_=10*_+4;break;case"5":_=10*_+5;break;case"6":_=10*_+6;break;case"7":_=10*_+7;break;case"8":_=10*_+8;break;case"9":_=10*_+9;break;case".":h=!0,n++,s=!0;break;default:s=!0}if(s)break}if(h)for(var f=.1,c=!1;n<i;n++){switch(a=_t.getChar(t,n)){case"0":break;case"1":_+=1*f;break;case"2":_+=2*f;break;case"3":_+=3*f;break;case"4":_+=4*f;break;case"5":_+=5*f;break;case"6":_+=6*f;break;case"7":_+=7*f;break;case"8":_+=8*f;break;case"9":_+=9*f;break;default:c=!0}if(f*=.1,c)break}return o&&(_=-_),r[0]=n,_};function D(){v||(this._$Ob=null)}D.prototype._$zP=function(){this._$Ob=new Array},D.prototype._$F0=function(t){this._$Ob=t._$nP()},D.prototype._$Ur=function(t){if(t._$WS())return!0;for(var i=t._$v2(),e=this._$Ob.length-1;e>=0;--e){var r=this._$Ob[e].getParamIndex(i);if(r==mt._$ds&&(r=t.getParamIndex(this._$Ob[e].getParamID())),t._$Xb(r))return!0}return!1},D.prototype._$Q2=function(t,i){for(var e,r,n=this._$Ob.length,o=t._$v2(),h=0,_=0;_<n;_++){var a=this._$Ob[_];if((e=a.getParamIndex(o))==mt._$ds&&(e=t.getParamIndex(a.getParamID()),a._$Pb(e,o)),e<0)throw new Exception("err 23242 : "+a.getParamID());var s=e<0?0:t.getParamFloat(e);r=a._$N2();var f,c,p=a._$d2(),y=-1,u=0;if(!(r<1))if(r==1)(f=p[0])-$t._$J<s&&s<f+$t._$J?(y=0,u=0):(y=0,i[0]=!0);else if(s<(f=p[0])-$t._$J)y=0,i[0]=!0;else if(s<f+$t._$J)y=0;else{for(var O=!1,I=1;I<r;++I){if(s<(c=p[I])+$t._$J){c-$t._$J<s?y=I:(y=I-1,u=(s-f)/(c-f),h++),O=!0;break}f=c}O||(y=r-1,u=0,i[0]=!0)}a._$wr(y),a._$AL(u)}return h},D.prototype._$zr=function(t,i,e){var r=1<<e;r+1>$t._$Qb&&console.log(`err 23245
`);for(var n=this._$Ob.length,o=1,h=1,_=0,a=0;a<r;++a)t[a]=0;for(var s=0;s<n;++s){var f=this._$Ob[s];if(f._$SL()==0){if((c=f._$Lr()*o)<0&&S._$3T)throw new Exception("err 23246");for(a=0;a<r;++a)t[a]+=c}else{var c=o*f._$Lr(),p=o*(f._$Lr()+1);for(a=0;a<r;++a)t[a]+=(a/h|0)%2==0?c:p;i[_++]=f._$SL(),h*=2}o*=f._$N2()}t[r]=65535,i[_]=-1},D.prototype._$h2=function(t,i,e){for(var r=new Float32Array(i),n=0;n<i;++n)r[n]=e[n];var o=new mt;o._$yP(t),o._$t2(i,r),this._$Ob.push(o)},D.prototype._$J2=function(t){for(var i=t,e=this._$Ob.length,r=0;r<e;++r){var n=this._$Ob[r],o=n._$N2(),h=i%n._$N2(),_=n._$d2()[h];console.log("%s[%d]=%7.2f / ",n.getParamID(),h,_),i/=o}console.log(`
`)},D.prototype.getParamCount=function(){return this._$Ob.length},D.prototype._$zs=function(){return this._$Ob};function et(){this.m=new Float32Array(16),this.identity()}et.prototype.identity=function(){for(var t=0;t<16;t++)this.m[t]=t%5==0?1:0},et.prototype.getArray=function(){return this.m},et.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},et.prototype.setMatrix=function(t){if(t!=null&&t.length==16)for(var i=0;i<16;i++)this.m[i]=t[i]},et.prototype.mult=function(t,i,e){return i==null?null:(this==i?this.mult_safe(this.m,t.m,i.m,e):this.mult_fast(this.m,t.m,i.m,e),i)},et.prototype.mult_safe=function(t,i,e,r){if(t==e){var n=new Array(16);this.mult_fast(t,i,n,r);for(var o=15;o>=0;--o)e[o]=n[o]}else this.mult_fast(t,i,e,r)},et.prototype.mult_fast=function(t,i,e,r){r?(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],e[3]=e[7]=e[11]=0,e[15]=1):(e[0]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],e[4]=t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],e[8]=t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],e[12]=t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],e[1]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],e[5]=t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],e[9]=t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],e[13]=t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],e[2]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],e[6]=t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],e[10]=t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],e[14]=t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],e[3]=t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],e[7]=t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],e[11]=t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],e[15]=t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15])},et.prototype.translate=function(t,i,e){this.m[12]=this.m[0]*t+this.m[4]*i+this.m[8]*e+this.m[12],this.m[13]=this.m[1]*t+this.m[5]*i+this.m[9]*e+this.m[13],this.m[14]=this.m[2]*t+this.m[6]*i+this.m[10]*e+this.m[14],this.m[15]=this.m[3]*t+this.m[7]*i+this.m[11]*e+this.m[15]},et.prototype.scale=function(t,i,e){this.m[0]*=t,this.m[4]*=i,this.m[8]*=e,this.m[1]*=t,this.m[5]*=i,this.m[9]*=e,this.m[2]*=t,this.m[6]*=i,this.m[10]*=e,this.m[3]*=t,this.m[7]*=i,this.m[11]*=e},et.prototype.rotateX=function(t){var i=Wt.fcos(t),e=Wt._$9(t),r=this.m[4];this.m[4]=r*i+this.m[8]*e,this.m[8]=r*-e+this.m[8]*i,r=this.m[5],this.m[5]=r*i+this.m[9]*e,this.m[9]=r*-e+this.m[9]*i,r=this.m[6],this.m[6]=r*i+this.m[10]*e,this.m[10]=r*-e+this.m[10]*i,r=this.m[7],this.m[7]=r*i+this.m[11]*e,this.m[11]=r*-e+this.m[11]*i},et.prototype.rotateY=function(t){var i=Wt.fcos(t),e=Wt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[8]*-e,this.m[8]=r*e+this.m[8]*i,r=this.m[1],this.m[1]=r*i+this.m[9]*-e,this.m[9]=r*e+this.m[9]*i,r=m[2],this.m[2]=r*i+this.m[10]*-e,this.m[10]=r*e+this.m[10]*i,r=m[3],this.m[3]=r*i+this.m[11]*-e,this.m[11]=r*e+this.m[11]*i},et.prototype.rotateZ=function(t){var i=Wt.fcos(t),e=Wt._$9(t),r=this.m[0];this.m[0]=r*i+this.m[4]*e,this.m[4]=r*-e+this.m[4]*i,r=this.m[1],this.m[1]=r*i+this.m[5]*e,this.m[5]=r*-e+this.m[5]*i,r=this.m[2],this.m[2]=r*i+this.m[6]*e,this.m[6]=r*-e+this.m[6]*i,r=this.m[3],this.m[3]=r*i+this.m[7]*e,this.m[7]=r*-e+this.m[7]*i};function q(t){v||_i.prototype.constructor.call(this,t)}q.prototype=new _i,q._$tP=new Object,q._$27=function(){q._$tP.clear()},q.getID=function(t){var i=q._$tP[t];return i==null&&(i=new q(t),q._$tP[t]=i),i},q.prototype._$3s=function(){return new q};function Y(){v||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}Y._$kS=-1,Y._$pS=0,Y._$hb=1,Y.STATE_IDENTITY=0,Y._$gb=1,Y._$fo=2,Y._$go=4,Y.prototype.transform=function(t,i,e){var r,n,o,h,_,a,s=0,f=0;switch(this._$hi){default:return;case Y._$go|Y._$fo|Y._$gb:for(r=this._$7,n=this._$H,o=this._$k,h=this._$f,_=this._$g,a=this._$w;--e>=0;){var c=t[s++],p=t[s++];i[f++]=r*c+n*p+o,i[f++]=h*c+_*p+a}return;case Y._$go|Y._$fo:for(r=this._$7,n=this._$H,h=this._$f,_=this._$g;--e>=0;)c=t[s++],p=t[s++],i[f++]=r*c+n*p,i[f++]=h*c+_*p;return;case Y._$go|Y._$gb:for(n=this._$H,o=this._$k,h=this._$f,a=this._$w;--e>=0;)c=t[s++],i[f++]=n*t[s++]+o,i[f++]=h*c+a;return;case Y._$go:for(n=this._$H,h=this._$f;--e>=0;)c=t[s++],i[f++]=n*t[s++],i[f++]=h*c;return;case Y._$fo|Y._$gb:for(r=this._$7,o=this._$k,_=this._$g,a=this._$w;--e>=0;)i[f++]=r*t[s++]+o,i[f++]=_*t[s++]+a;return;case Y._$fo:for(r=this._$7,_=this._$g;--e>=0;)i[f++]=r*t[s++],i[f++]=_*t[s++];return;case Y._$gb:for(o=this._$k,a=this._$w;--e>=0;)i[f++]=t[s++]+o,i[f++]=t[s++]+a;return;case Y.STATE_IDENTITY:return void(t==i&&s==f||J._$jT(t,s,i,f,2*e))}},Y.prototype.update=function(){this._$H==0&&this._$f==0?this._$7==1&&this._$g==1?this._$k==0&&this._$w==0?(this._$hi=Y.STATE_IDENTITY,this._$Z=Y._$pS):(this._$hi=Y._$gb,this._$Z=Y._$hb):this._$k==0&&this._$w==0?(this._$hi=Y._$fo,this._$Z=Y._$kS):(this._$hi=Y._$fo|Y._$gb,this._$Z=Y._$kS):this._$7==0&&this._$g==0?this._$k==0&&this._$w==0?(this._$hi=Y._$go,this._$Z=Y._$kS):(this._$hi=Y._$go|Y._$gb,this._$Z=Y._$kS):this._$k==0&&this._$w==0?(this._$hi=Y._$go|Y._$fo,this._$Z=Y._$kS):(this._$hi=Y._$go|Y._$fo|Y._$gb,this._$Z=Y._$kS)},Y.prototype._$RT=function(t){this._$IT(t);var i=t[0],e=t[2],r=t[1],n=t[3],o=Math.sqrt(i*i+r*r),h=i*n-e*r;o==0?S._$so&&console.log("affine._$RT() / rt==0"):(t[0]=o,t[1]=h/o,t[2]=(r*n+i*e)/h,t[3]=Math.atan2(r,i))},Y.prototype._$ho=function(t,i,e,r){var n=new Float32Array(6),o=new Float32Array(6);t._$RT(n),i._$RT(o);var h=new Float32Array(6);h[0]=n[0]+(o[0]-n[0])*e,h[1]=n[1]+(o[1]-n[1])*e,h[2]=n[2]+(o[2]-n[2])*e,h[3]=n[3]+(o[3]-n[3])*e,h[4]=n[4]+(o[4]-n[4])*e,h[5]=n[5]+(o[5]-n[5])*e,r._$CT(h)},Y.prototype._$CT=function(t){var i=Math.cos(t[3]),e=Math.sin(t[3]);this._$7=t[0]*i,this._$f=t[0]*e,this._$H=t[1]*(t[2]*i-e),this._$g=t[1]*(t[2]*e+i),this._$k=t[4],this._$w=t[5],this.update()},Y.prototype._$IT=function(t){t[0]=this._$7,t[1]=this._$f,t[2]=this._$H,t[3]=this._$g,t[4]=this._$k,t[5]=this._$w};function wt(){v||(F.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=wt._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}wt.prototype=new F,wt._$cs="VISIBLE:",wt._$ar="LAYOUT:",wt._$Co=0,wt._$D2=[],wt._$1T=1,wt.loadMotion=function(t){var i=new wt,e=[0],r=t.length;i._$yT=0;for(var n=0;n<r;++n){var o=255&t[n];if(o!=`
`&&o!="\r")if(o!="#")if(o!="$"){if("a"<=o&&o<="z"||"A"<=o&&o<="Z"||o=="_"){for(s=n,f=-1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o=="="){f=n;break}if(f>=0){var h=new Z;_t.startsWith(t,s,wt._$cs)?(h._$RP=Z._$hs,h._$4P=new String(t,s,f-s)):_t.startsWith(t,s,wt._$ar)?(h._$4P=new String(t,s+7,f-s-7),_t.startsWith(t,s+7,"ANCHOR_X")?h._$RP=Z._$xs:_t.startsWith(t,s+7,"ANCHOR_Y")?h._$RP=Z._$us:_t.startsWith(t,s+7,"SCALE_X")?h._$RP=Z._$qs:_t.startsWith(t,s+7,"SCALE_Y")?h._$RP=Z._$Ys:_t.startsWith(t,s+7,"X")?h._$RP=Z._$ws:_t.startsWith(t,s+7,"Y")&&(h._$RP=Z._$Ns)):(h._$RP=Z._$Fr,h._$4P=new String(t,s,f-s)),i.motions.push(h);var _=0;for(wt._$D2.clear(),n=f+1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"&&(p=_t._$LS(t,r,n,e),e[0]>0)){wt._$D2.push(p),_++;var a=e[0];if(a<n){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}n=a}h._$I0=wt._$D2._$BL(),_>i._$yT&&(i._$yT=_)}}}else{for(var s=n,f=-1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o=="="){f=n;break}var c=!1;if(f>=0){for(f==s+4&&t[s+1]=="f"&&t[s+2]=="p"&&t[s+3]=="s"&&(c=!0),n=f+1;n<r&&(o=255&t[n])!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"){var p=_t._$LS(t,r,n,e);e[0]>0&&c&&5<p&&p<121&&(i._$D0=p),n=e[0]}}for(;n<r&&t[n]!=`
`&&t[n]!="\r";++n);}else for(;n<r&&t[n]!=`
`&&t[n]!="\r";++n);}return i._$AS=1e3*i._$yT/i._$D0|0,i},wt.prototype.getDurationMSec=function(){return this._$AS},wt.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log(`
`)}},wt.prototype.updateParamExe=function(t,i,e,r){for(var n=(i-r._$z2)*this._$D0/1e3,o=0|n,h=n-o,_=0;_<this.motions.length;_++){var a=this.motions[_],s=a._$I0.length,f=a._$4P;if(a._$RP==Z._$hs){var c=a._$I0[o>=s?s-1:o];t.setParamFloat(f,c)}else if(!(Z._$ws<=a._$RP&&a._$RP<=Z._$Ys)){var p=t.getParamFloat(f),y=a._$I0[o>=s?s-1:o],u=p+(y+(a._$I0[o+1>=s?s-1:o+1]-y)*h-p)*e;t.setParamFloat(f,u)}}o>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0)},wt.prototype._$r0=function(){return this._$E},wt.prototype._$aL=function(t){this._$E=t},wt.prototype.isLoopFadeIn=function(){return this.loopFadeIn},wt.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t};function kt(){this._$P=new Float32Array(100),this.size=0}kt.prototype.clear=function(){this.size=0},kt.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);J._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},kt.prototype._$BL=function(){var t=new Float32Array(this.size);return J._$jT(this._$P,0,t,0,this.size),t};function Z(){this._$4P=null,this._$I0=null,this._$RP=null}Z._$Fr=0,Z._$hs=1,Z._$ws=100,Z._$Ns=101,Z._$xs=102,Z._$us=103,Z._$qs=104,Z._$Ys=105;function $t(){}$t._$Ms=1,$t._$Qs=2,$t._$i2=0,$t._$No=2,$t._$do=$t._$Ms,$t._$Ls=!0,$t._$1r=5,$t._$Qb=65,$t._$J=1e-4,$t._$FT=.001,$t._$Ss=3;function Tt(){}Tt._$o7=6,Tt._$S7=7,Tt._$s7=8,Tt._$77=9,Tt.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,Tt.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,Tt._$T7=Tt.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,Tt._$Is=-2004318072,Tt._$h0=0,Tt._$4L=23,Tt._$7P=33,Tt._$uT=function(t){console.log(`_$bo :: _$6 _$mo _$E0 : %d
`,t)},Tt._$9o=function(t){if(t<40||t<50||t<60)return Tt._$uT(t),null;if(t<100)switch(t){case 65:return new ii;case 66:return new D;case 67:return new mt;case 68:return new Nt;case 69:return new g;case 70:return new xt;default:return Tt._$uT(t),null}else if(t<150)switch(t){case 131:return new ci;case 133:return new Jt;case 136:return new X;case 137:return new fi;case 142:return new pi}return Tt._$uT(t),null};function C(t){v||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(C._$is),this._$_2=new Float32Array(C._$is),this._$vr=new Float32Array(C._$is),this._$Rr=new Float32Array(C._$is),this._$Or=new Float32Array(C._$is),this._$fs=new Float32Array(C._$is),this._$Js=new Array(C._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array($t._$Qb),this._$ZP=new Float32Array(2*$t._$1r),this._$Ri=t,this._$b0=C._$HP++,this.clipManager=null,this.dp_webgl=null)}C._$HP=0,C._$_0=!0,C._$V2=-1,C._$W0=-1,C._$jr=!1,C._$ZS=!0,C._$tr=-1e6,C._$lr=1e6,C._$is=32,C._$e=!1,C.prototype.getDrawDataIndex=function(t){for(var i=this._$aS.length-1;i>=0;--i)if(this._$aS[i]!=null&&this._$aS[i].getDrawDataID()==t)return i;return-1},C.prototype.getDrawData=function(t){if(t instanceof q){if(this._$Bo==null){this._$Bo=new Object;for(var i=this._$aS.length,e=0;e<i;e++){var r=this._$aS[e],n=r.getDrawDataID();n!=null&&(this._$Bo[n]=r)}}return this._$Bo[id]}return t<this._$aS.length?this._$aS[t]:null},C.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),this._$Bo!=null&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},C.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var t=this._$Ri.getModelImpl(),i=t._$Xr(),e=i.length,r=new Array,n=new Array,o=0;o<e;++o){var h=i[o];this._$F2.push(h),this._$Hr.push(h.init(this));for(var _=h.getBaseData(),a=_.length,s=0;s<a;++s)r.push(_[s]);for(s=0;s<a;++s){var f=_[s].init(this);f._$l2(o),n.push(f)}var c=h.getDrawData(),p=c.length;for(s=0;s<p;++s){var y=c[s],u=y.init(this);u._$IP=o,this._$aS.push(y),this._$8b.push(u)}}for(var O=r.length,I=Ht._$2o();;){var k=!1;for(o=0;o<O;++o){var rt=r[o];if(rt!=null){var L=rt.getTargetBaseDataID();(L==null||L==I||this.getBaseDataIndex(L)>=0)&&(this._$3S.push(rt),this._$db.push(n[o]),r[o]=null,k=!0)}}if(!k)break}var ot=t._$E2();if(ot!=null){var ht=ot._$1s();if(ht!=null){var ct=ht.length;for(o=0;o<ct;++o){var U=ht[o];U!=null&&this._$02(U.getParamID(),U.getDefaultValue(),U.getMinValue(),U.getMaxValue())}}}this.clipManager=new w(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},C.prototype.update=function(){C._$e&&T.start("_$zL");for(var t=this._$_2.length,i=0;i<t;i++)this._$_2[i]!=this._$vr[i]&&(this._$Js[i]=C._$ZS,this._$vr[i]=this._$_2[i]);var e=this._$3S.length,r=this._$aS.length,n=gt._$or(),o=gt._$Pr()-n+1;for((this._$Ws==null||this._$Ws.length<o)&&(this._$Ws=new Int16Array(o),this._$Vs=new Int16Array(o)),i=0;i<o;i++)this._$Ws[i]=C._$V2,this._$Vs[i]=C._$V2;for((this._$Er==null||this._$Er.length<r)&&(this._$Er=new Int16Array(r)),i=0;i<r;i++)this._$Er[i]=C._$W0;C._$e&&T.dump("_$zL"),C._$e&&T.start("_$UL");for(var h=null,_=0;_<e;++_){var a=this._$3S[_],s=this._$db[_];try{a._$Nr(this,s),a._$2b(this,s)}catch(I){h==null&&(h=I)}}h!=null&&C._$_0&&T._$Rb(h),C._$e&&T.dump("_$UL"),C._$e&&T.start("_$DL");for(var f=null,c=0;c<r;++c){var p=this._$aS[c],y=this._$8b[c];try{if(p._$Nr(this,y),y._$u2())continue;p._$2b(this,y);var u,O=Math.floor(p._$zS(this,y)-n);try{u=this._$Vs[O]}catch(I){console.log(`_$li :: %s / %s        @@_$fS
`,I.toString(),p.getDrawDataID().toString()),O=Math.floor(p._$zS(this,y)-n);continue}u==C._$V2?this._$Ws[O]=c:this._$Er[u]=c,this._$Vs[O]=c}catch(I){f==null&&(f=I,S._$sT(S._$H7))}}for(f!=null&&C._$_0&&T._$Rb(f),C._$e&&T.dump("_$DL"),C._$e&&T.start("_$eL"),i=this._$Js.length-1;i>=0;i--)this._$Js[i]=C._$jr;return this._$QT=!1,C._$e&&T.dump("_$eL"),!1},C.prototype.preDraw=function(t){this.clipManager!=null&&(t._$ZT(),this.clipManager.setupClip(this,t))},C.prototype.draw=function(t){if(this._$Ws!=null){var i=this._$Ws.length;t._$ZT();for(var e=0;e<i;++e){var r=this._$Ws[e];if(r!=C._$V2)for(;;){var n=this._$aS[r],o=this._$8b[r];if(o._$yo()){var h=o._$IP,_=this._$Hr[h];o._$VS=_.getPartsOpacity(),n.draw(t,this,o)}var a=this._$Er[r];if(a<=r||a==C._$W0)break;r=a}}}else T._$li("call _$Ri.update() before _$Ri.draw() ")},C.prototype.getParamIndex=function(t){for(var i=this._$pb.length-1;i>=0;--i)if(this._$pb[i]==t)return i;return this._$02(t,0,C._$tr,C._$lr)},C.prototype._$BS=function(t){return this.getBaseDataIndex(t)},C.prototype.getBaseDataIndex=function(t){for(var i=this._$3S.length-1;i>=0;--i)if(this._$3S[i]!=null&&this._$3S[i].getBaseDataID()==t)return i;return-1},C.prototype._$UT=function(t,i){var e=new Float32Array(i);return J._$jT(t,0,e,0,t.length),e},C.prototype._$02=function(t,i,e,r){if(this._$qo>=this._$pb.length){var n=this._$pb.length,o=new Array(2*n);J._$jT(this._$pb,0,o,0,n),this._$pb=o,this._$_2=this._$UT(this._$_2,2*n),this._$vr=this._$UT(this._$vr,2*n),this._$Rr=this._$UT(this._$Rr,2*n),this._$Or=this._$UT(this._$Or,2*n);var h=new Array;J._$jT(this._$Js,0,h,0,n),this._$Js=h}return this._$pb[this._$qo]=t,this._$_2[this._$qo]=i,this._$vr[this._$qo]=i,this._$Rr[this._$qo]=e,this._$Or[this._$qo]=r,this._$Js[this._$qo]=C._$ZS,this._$qo++},C.prototype._$Zo=function(t,i){this._$3S[t]=i},C.prototype.setParamFloat=function(t,i){i<this._$Rr[t]&&(i=this._$Rr[t]),i>this._$Or[t]&&(i=this._$Or[t]),this._$_2[t]=i},C.prototype.loadParam=function(){var t=this._$_2.length;t>this._$fs.length&&(t=this._$fs.length),J._$jT(this._$fs,0,this._$_2,0,t)},C.prototype.saveParam=function(){var t=this._$_2.length;t>this._$fs.length&&(this._$fs=new Float32Array(t)),J._$jT(this._$_2,0,this._$fs,0,t)},C.prototype._$v2=function(){return this._$co},C.prototype._$WS=function(){return this._$QT},C.prototype._$Xb=function(t){return this._$Js[t]==C._$ZS},C.prototype._$vs=function(){return this._$Es},C.prototype._$Tr=function(){return this._$ZP},C.prototype.getBaseData=function(t){return this._$3S[t]},C.prototype.getParamFloat=function(t){return this._$_2[t]},C.prototype.getParamMax=function(t){return this._$Or[t]},C.prototype.getParamMin=function(t){return this._$Rr[t]},C.prototype.setPartsOpacity=function(t,i){this._$Hr[t].setPartsOpacity(i)},C.prototype.getPartsOpacity=function(t){return this._$Hr[t].getPartsOpacity()},C.prototype.getPartsDataIndex=function(t){for(var i=this._$F2.length-1;i>=0;--i)if(this._$F2[i]!=null&&this._$F2[i]._$p2()==t)return i;return-1},C.prototype._$q2=function(t){return this._$db[t]},C.prototype._$C2=function(t){return this._$8b[t]},C.prototype._$Bb=function(t){return this._$Hr[t]},C.prototype._$5s=function(t,i){for(var e=this._$Ws.length,r=t,n=0;n<e;++n){var o=this._$Ws[n];if(o!=C._$V2)for(;;){var h=this._$8b[o];h._$yo()&&(h._$GT()._$B2(this,h,r),r+=i);var _=this._$Er[o];if(_<=o||_==C._$W0)break;o=_}}},C.prototype.setDrawParam=function(t){this.dp_webgl=t},C.prototype.getDrawParam=function(){return this.dp_webgl};function li(){}li._$0T=function(t){return li._$0T(new _$5(t))},li._$0T=function(t){if(!t.exists())throw new _$ls(t._$3b());for(var i,e=t.length(),r=new Int8Array(e),n=new _$Xs(new _$kb(t),8192),o=0;(i=n.read(r,o,e-o))>0;)o+=i;return r},li._$C=function(t){var i=null,e=null;try{i=t instanceof Array?t:new _$Xs(t,8192),e=new _$js;for(var r,n=new Int8Array(1e3);(r=i.read(n))>0;)e.write(n,0,r);return e._$TS()}finally{t!=null&&t.close(),e!=null&&(e.flush(),e.close())}};function oi(){v||(this._$12=null,this._$bb=null,this._$_L=null,this._$jo=null,this._$iL=null,this._$0L=null,this._$Br=null,this._$Dr=null,this._$Cb=null,this._$mr=null,this._$_L=ti.STATE_FIRST,this._$Br=4e3,this._$Dr=100,this._$Cb=50,this._$mr=150,this._$jo=!0,this._$iL="PARAM_EYE_L_OPEN",this._$0L="PARAM_EYE_R_OPEN")}oi.prototype._$T2=function(){return J.getUserTimeMSec()+Math._$10()*(2*this._$Br-1)},oi.prototype._$uo=function(t){this._$Br=t},oi.prototype._$QS=function(t,i,e){this._$Dr=t,this._$Cb=i,this._$mr=e},oi.prototype._$7T=function(t){var i,e=J.getUserTimeMSec(),r=0;switch(this._$_L){case STATE_CLOSING:(r=(e-this._$bb)/this._$Dr)>=1&&(r=1,this._$_L=ti.STATE_CLOSED,this._$bb=e),i=1-r;break;case STATE_CLOSED:(r=(e-this._$bb)/this._$Cb)>=1&&(this._$_L=ti.STATE_OPENING,this._$bb=e),i=0;break;case STATE_OPENING:(r=(e-this._$bb)/this._$mr)>=1&&(r=1,this._$_L=ti.STATE_INTERVAL,this._$12=this._$T2()),i=r;break;case STATE_INTERVAL:this._$12<e&&(this._$_L=ti.STATE_CLOSING,this._$bb=e),i=1;break;case STATE_FIRST:default:this._$_L=ti.STATE_INTERVAL,this._$12=this._$T2(),i=1}this._$jo||(i=-i),t.setParamFloat(this._$iL,i),t.setParamFloat(this._$0L,i)};var ti=function(){};ti.STATE_FIRST="STATE_FIRST",ti.STATE_INTERVAL="STATE_INTERVAL",ti.STATE_CLOSING="STATE_CLOSING",ti.STATE_CLOSED="STATE_CLOSED",ti.STATE_OPENING="STATE_OPENING";function Lt(){v||(tt.prototype.constructor.call(this),this._$sb=new Int32Array(Lt._$As),this._$U2=new Array,this.transform=null,this.gl=null,Lt._$NT==null&&(Lt._$NT=Lt._$9r(256),Lt._$vS=Lt._$9r(256),Lt._$no=Lt._$vb(256)))}Lt.prototype=new tt,Lt._$As=32,Lt._$Gr=!1,Lt._$NT=null,Lt._$vS=null,Lt._$no=null,Lt._$9r=function(t){return new Float32Array(t)},Lt._$vb=function(t){return new Int16Array(t)},Lt._$cr=function(t,i){return t==null||t._$yL()<i.length?((t=Lt._$9r(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},Lt._$mb=function(t,i){return t==null||t._$yL()<i.length?((t=Lt._$vb(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},Lt._$Hs=function(){return Lt._$Gr},Lt._$as=function(t){Lt._$Gr=t},Lt.prototype.setGL=function(t){this.gl=t},Lt.prototype.setTransform=function(t){this.transform=t},Lt.prototype._$ZT=function(){},Lt.prototype._$Uo=function(t,i,e,r,n,o,h,_){if(!(o<.01)){var a=this._$U2[t],s=o>.9?S.EXPAND_W:0;this.gl.drawElements(a,e,r,n,o,s,this.transform,_)}},Lt.prototype._$Rs=function(){throw new Error("_$Rs")},Lt.prototype._$Ds=function(t){throw new Error("_$Ds")},Lt.prototype._$K2=function(){for(var t=0;t<this._$sb.length;t++)this._$sb[t]!=0&&(this.gl._$Sr(1,this._$sb,t),this._$sb[t]=0)},Lt.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$sb[t]=i},Lt.prototype.setTexture=function(t,i){this._$sb.length<t+1&&this._$nS(t),this._$U2[t]=i},Lt.prototype._$nS=function(t){var i=Math.max(2*this._$sb.length,t+1+10),e=new Int32Array(i);J._$jT(this._$sb,0,e,0,this._$sb.length),this._$sb=e;var r=new Array;J._$jT(this._$U2,0,r,0,this._$U2.length),this._$U2=r};function Nt(){v||(it.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}Nt.prototype=new it,Nt._$Xo=new Float32Array(2),Nt._$io=new Float32Array(2),Nt._$0o=new Float32Array(2),Nt._$Lo=new Float32Array(2),Nt._$To=new Float32Array(2),Nt._$Po=new Float32Array(2),Nt._$gT=new Array,Nt.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP(),this._$Y0=new Array},Nt.prototype.getType=function(){return it._$c2},Nt.prototype._$F0=function(t){it.prototype._$F0.call(this,t),this._$GS=t._$nP(),this._$Y0=t._$nP(),it.prototype.readV2_opacity.call(this,t)},Nt.prototype.init=function(t){var i=new xi(this);return i._$Yr=new g,this._$32()&&(i._$Wr=new g),i},Nt.prototype._$Nr=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(this._$GS._$Ur(t)){var r=Nt._$gT;r[0]=!1;var n=this._$GS._$Q2(t,r);i._$Ib(r[0]),this.interpolateOpacity(t,this._$GS,i,r);var o=t._$vs(),h=t._$Tr();if(this._$GS._$zr(o,h,n),n<=0){var _=this._$Y0[o[0]];e._$Yr.init(_)}else if(n==1){_=this._$Y0[o[0]];var a=this._$Y0[o[1]],s=h[0];e._$Yr._$fL=_._$fL+(a._$fL-_._$fL)*s,e._$Yr._$gL=_._$gL+(a._$gL-_._$gL)*s,e._$Yr._$B0=_._$B0+(a._$B0-_._$B0)*s,e._$Yr._$z0=_._$z0+(a._$z0-_._$z0)*s,e._$Yr._$qT=_._$qT+(a._$qT-_._$qT)*s}else if(n==2){_=this._$Y0[o[0]],a=this._$Y0[o[1]];var f=this._$Y0[o[2]],c=this._$Y0[o[3]],p=(s=h[0],h[1]),y=_._$fL+(a._$fL-_._$fL)*s,u=f._$fL+(c._$fL-f._$fL)*s;e._$Yr._$fL=y+(u-y)*p,y=_._$gL+(a._$gL-_._$gL)*s,u=f._$gL+(c._$gL-f._$gL)*s,e._$Yr._$gL=y+(u-y)*p,y=_._$B0+(a._$B0-_._$B0)*s,u=f._$B0+(c._$B0-f._$B0)*s,e._$Yr._$B0=y+(u-y)*p,y=_._$z0+(a._$z0-_._$z0)*s,u=f._$z0+(c._$z0-f._$z0)*s,e._$Yr._$z0=y+(u-y)*p,y=_._$qT+(a._$qT-_._$qT)*s,u=f._$qT+(c._$qT-f._$qT)*s,e._$Yr._$qT=y+(u-y)*p}else if(n==3){var O=this._$Y0[o[0]],I=this._$Y0[o[1]],k=this._$Y0[o[2]],rt=this._$Y0[o[3]],L=this._$Y0[o[4]],ot=this._$Y0[o[5]],ht=this._$Y0[o[6]],ct=this._$Y0[o[7]],U=(s=h[0],p=h[1],h[2]),R=(y=O._$fL+(I._$fL-O._$fL)*s,u=k._$fL+(rt._$fL-k._$fL)*s,L._$fL+(ot._$fL-L._$fL)*s),yt=ht._$fL+(ct._$fL-ht._$fL)*s;e._$Yr._$fL=(1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p),y=O._$gL+(I._$gL-O._$gL)*s,u=k._$gL+(rt._$gL-k._$gL)*s,R=L._$gL+(ot._$gL-L._$gL)*s,yt=ht._$gL+(ct._$gL-ht._$gL)*s,e._$Yr._$gL=(1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p),y=O._$B0+(I._$B0-O._$B0)*s,u=k._$B0+(rt._$B0-k._$B0)*s,R=L._$B0+(ot._$B0-L._$B0)*s,yt=ht._$B0+(ct._$B0-ht._$B0)*s,e._$Yr._$B0=(1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p),y=O._$z0+(I._$z0-O._$z0)*s,u=k._$z0+(rt._$z0-k._$z0)*s,R=L._$z0+(ot._$z0-L._$z0)*s,yt=ht._$z0+(ct._$z0-ht._$z0)*s,e._$Yr._$z0=(1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p),y=O._$qT+(I._$qT-O._$qT)*s,u=k._$qT+(rt._$qT-k._$qT)*s,R=L._$qT+(ot._$qT-L._$qT)*s,yt=ht._$qT+(ct._$qT-ht._$qT)*s,e._$Yr._$qT=(1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p)}else if(n==4){var Rt=this._$Y0[o[0]],Ut=this._$Y0[o[1]],Yt=this._$Y0[o[2]],nt=this._$Y0[o[3]],K=this._$Y0[o[4]],lt=this._$Y0[o[5]],V=this._$Y0[o[6]],pt=this._$Y0[o[7]],ft=this._$Y0[o[8]],st=this._$Y0[o[9]],at=this._$Y0[o[10]],H=this._$Y0[o[11]],Q=this._$Y0[o[12]],zt=this._$Y0[o[13]],Mt=this._$Y0[o[14]],ut=this._$Y0[o[15]],Pt=(s=h[0],p=h[1],U=h[2],h[3]),At=(y=Rt._$fL+(Ut._$fL-Rt._$fL)*s,u=Yt._$fL+(nt._$fL-Yt._$fL)*s,R=K._$fL+(lt._$fL-K._$fL)*s,yt=V._$fL+(pt._$fL-V._$fL)*s,ft._$fL+(st._$fL-ft._$fL)*s),vt=at._$fL+(H._$fL-at._$fL)*s,It=Q._$fL+(zt._$fL-Q._$fL)*s,Ct=Mt._$fL+(ut._$fL-Mt._$fL)*s;e._$Yr._$fL=(1-Pt)*((1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p))+Pt*((1-U)*(At+(vt-At)*p)+U*(It+(Ct-It)*p)),y=Rt._$gL+(Ut._$gL-Rt._$gL)*s,u=Yt._$gL+(nt._$gL-Yt._$gL)*s,R=K._$gL+(lt._$gL-K._$gL)*s,yt=V._$gL+(pt._$gL-V._$gL)*s,At=ft._$gL+(st._$gL-ft._$gL)*s,vt=at._$gL+(H._$gL-at._$gL)*s,It=Q._$gL+(zt._$gL-Q._$gL)*s,Ct=Mt._$gL+(ut._$gL-Mt._$gL)*s,e._$Yr._$gL=(1-Pt)*((1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p))+Pt*((1-U)*(At+(vt-At)*p)+U*(It+(Ct-It)*p)),y=Rt._$B0+(Ut._$B0-Rt._$B0)*s,u=Yt._$B0+(nt._$B0-Yt._$B0)*s,R=K._$B0+(lt._$B0-K._$B0)*s,yt=V._$B0+(pt._$B0-V._$B0)*s,At=ft._$B0+(st._$B0-ft._$B0)*s,vt=at._$B0+(H._$B0-at._$B0)*s,It=Q._$B0+(zt._$B0-Q._$B0)*s,Ct=Mt._$B0+(ut._$B0-Mt._$B0)*s,e._$Yr._$B0=(1-Pt)*((1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p))+Pt*((1-U)*(At+(vt-At)*p)+U*(It+(Ct-It)*p)),y=Rt._$z0+(Ut._$z0-Rt._$z0)*s,u=Yt._$z0+(nt._$z0-Yt._$z0)*s,R=K._$z0+(lt._$z0-K._$z0)*s,yt=V._$z0+(pt._$z0-V._$z0)*s,At=ft._$z0+(st._$z0-ft._$z0)*s,vt=at._$z0+(H._$z0-at._$z0)*s,It=Q._$z0+(zt._$z0-Q._$z0)*s,Ct=Mt._$z0+(ut._$z0-Mt._$z0)*s,e._$Yr._$z0=(1-Pt)*((1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p))+Pt*((1-U)*(At+(vt-At)*p)+U*(It+(Ct-It)*p)),y=Rt._$qT+(Ut._$qT-Rt._$qT)*s,u=Yt._$qT+(nt._$qT-Yt._$qT)*s,R=K._$qT+(lt._$qT-K._$qT)*s,yt=V._$qT+(pt._$qT-V._$qT)*s,At=ft._$qT+(st._$qT-ft._$qT)*s,vt=at._$qT+(H._$qT-at._$qT)*s,It=Q._$qT+(zt._$qT-Q._$qT)*s,Ct=Mt._$qT+(ut._$qT-Mt._$qT)*s,e._$Yr._$qT=(1-Pt)*((1-U)*(y+(u-y)*p)+U*(R+(yt-R)*p))+Pt*((1-U)*(At+(vt-At)*p)+U*(It+(Ct-It)*p))}else{for(var Xt=0|Math.pow(2,n),ei=new Float32Array(Xt),hi=0;hi<Xt;hi++){for(var di=hi,vi=1,gi=0;gi<n;gi++)vi*=di%2==0?1-h[gi]:h[gi],di/=2;ei[hi]=vi}for(var si=new Array,qt=0;qt<Xt;qt++)si[qt]=this._$Y0[o[qt]];var yi=0,Si=0,Ai=0,Ii=0,ri=0;for(qt=0;qt<Xt;qt++)yi+=ei[qt]*si[qt]._$fL,Si+=ei[qt]*si[qt]._$gL,Ai+=ei[qt]*si[qt]._$B0,Ii+=ei[qt]*si[qt]._$z0,ri+=ei[qt]*si[qt]._$qT;e._$Yr._$fL=yi,e._$Yr._$gL=Si,e._$Yr._$B0=Ai,e._$Yr._$z0=Ii,e._$Yr._$qT=ri}_=this._$Y0[o[0]],e._$Yr.reflectX=_.reflectX,e._$Yr.reflectY=_.reflectY}},Nt.prototype._$2b=function(t,i){this!=i._$GT()&&console.log("### assert!! ### ");var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==it._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)S._$so&&T._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var n=t.getBaseData(e._$8r);if(n!=null){var o=t._$q2(e._$8r),h=Nt._$Xo;h[0]=e._$Yr._$fL,h[1]=e._$Yr._$gL;var _=Nt._$io;_[0]=0,_[1]=-.1,o._$GT().getType()==it._$c2?_[1]=-10:_[1]=-.1;var a=Nt._$0o;this._$Jr(t,n,o,h,_,a);var s=Wt._$92(_,a);n._$nb(t,o,h,h,1,0,2),e._$Wr._$fL=h[0],e._$Wr._$gL=h[1],e._$Wr._$B0=e._$Yr._$B0,e._$Wr._$z0=e._$Yr._$z0,e._$Wr._$qT=e._$Yr._$qT-s*Wt._$NS;var f=o.getTotalScale();e.setTotalScale_notForClient(f*e._$Wr._$B0);var c=o.getTotalOpacity();e.setTotalOpacity(c*e.getInterpolatedOpacity()),e._$Wr.reflectX=e._$Yr.reflectX,e._$Wr.reflectY=e._$Yr.reflectY,e._$hS(o._$yo())}else e._$hS(!1)}}else e.setTotalScale_notForClient(e._$Yr._$B0),e.setTotalOpacity(e.getInterpolatedOpacity())},Nt.prototype._$nb=function(t,i,e,r,n,o,h){this!=i._$GT()&&console.log("### assert!! ### ");for(var _,a,s=i,f=s._$Wr!=null?s._$Wr:s._$Yr,c=Math.sin(Wt._$bS*f._$qT),p=Math.cos(Wt._$bS*f._$qT),y=s.getTotalScale(),u=f.reflectX?-1:1,O=f.reflectY?-1:1,I=p*y*u,k=-c*y*O,rt=c*y*u,L=p*y*O,ot=f._$fL,ht=f._$gL,ct=n*h,U=o;U<ct;U+=h)_=e[U],a=e[U+1],r[U]=I*_+k*a+ot,r[U+1]=rt*_+L*a+ht},Nt.prototype._$Jr=function(t,i,e,r,n,o){i!=e._$GT()&&console.log("### assert!! ### ");var h=Nt._$Lo;Nt._$Lo[0]=r[0],Nt._$Lo[1]=r[1],i._$nb(t,e,h,h,1,0,2);for(var _=Nt._$To,a=Nt._$Po,s=1,f=0;f<10;f++){if(a[0]=r[0]+s*n[0],a[1]=r[1]+s*n[1],i._$nb(t,e,a,_,1,0,2),_[0]-=h[0],_[1]-=h[1],_[0]!=0||_[1]!=0)return o[0]=_[0],void(o[1]=_[1]);if(a[0]=r[0]-s*n[0],a[1]=r[1]-s*n[1],i._$nb(t,e,a,_,1,0,2),_[0]-=h[0],_[1]-=h[1],_[0]!=0||_[1]!=0)return _[0]=-_[0],_[0]=-_[0],o[0]=_[0],void(o[1]=_[1]);s*=.1}S._$so&&console.log(`_$L0 to transform _$SP
`)};function xi(t){Kt.prototype.constructor.call(this,t),this._$8r=it._$ur,this._$Yr=null,this._$Wr=null}xi.prototype=new Kt;function gt(){v||(B.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}gt.prototype=new B,gt._$ur=-2,gt._$ES=500,gt._$wb=2,gt._$8S=3,gt._$os=4,gt._$52=gt._$ES,gt._$R2=gt._$ES,gt._$Sb=function(t){for(var i=t.length-1;i>=0;--i){var e=t[i];e<gt._$52?gt._$52=e:e>gt._$R2&&(gt._$R2=e)}},gt._$or=function(){return gt._$52},gt._$Pr=function(){return gt._$R2},gt.prototype._$F0=function(t){this._$gP=t._$nP(),this._$dr=t._$nP(),this._$GS=t._$nP(),this._$qb=t._$6L(),this._$Lb=t._$cS(),this._$mS=t._$Tb(),t.getFormatVersion()>=Tt._$T7?(this.clipID=t._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,gt._$Sb(this._$Lb)},gt.prototype.getClipIDList=function(){return this.clipIDList},gt.prototype._$Nr=function(t,i){if(i._$IS[0]=!1,i._$Us=G._$Z2(t,this._$GS,i._$IS,this._$Lb),!S._$Zs){if(i._$IS[0])return}i._$7s=G._$br(t,this._$GS,i._$IS,this._$mS)},gt.prototype._$2b=function(t){},gt.prototype.getDrawDataID=function(){return this._$gP},gt.prototype._$j2=function(t){this._$gP=t},gt.prototype.getOpacity=function(t,i){return i._$7s},gt.prototype._$zS=function(t,i){return i._$Us},gt.prototype.getTargetBaseDataID=function(){return this._$dr},gt.prototype._$gs=function(t){this._$dr=t},gt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=Ht._$2o()},gt.prototype.getType=function(){};function pi(){v||(this._$NL=null,this._$3S=null,this._$aS=null,pi._$42++)}pi._$42=0,pi.prototype._$1b=function(){return this._$3S},pi.prototype.getDrawDataList=function(){return this._$aS},pi.prototype._$F0=function(t){this._$NL=t._$nP(),this._$aS=t._$nP(),this._$3S=t._$nP()},pi.prototype._$kr=function(t){t._$Zo(this._$3S),t._$xo(this._$aS),this._$3S=null,this._$aS=null};function Qt(){v||(l.prototype.constructor.call(this),this._$zo=new Lt)}Qt.prototype=new l,Qt.loadModel=function(t){var i=new Qt;return l._$62(i,t),i},Qt.loadModel=function(t){var i=new Qt;return l._$62(i,t),i},Qt._$to=function(){return new Qt},Qt._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(i.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=Qt.loadModel(i._$3b()),n=0;n<e.length;n++){var o=new _$5(e[n]);if(o.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+o._$PL());r.setTexture(n,_$nL._$_o(t,o._$3b()))}return r},Qt.prototype.setGL=function(t){this._$zo.setGL(t)},Qt.prototype.setTransform=function(t){this._$zo.setTransform(t)},Qt.prototype.draw=function(){this._$5S.draw(this._$zo)},Qt.prototype._$K2=function(){this._$zo._$K2()},Qt.prototype.setTexture=function(t,i){this._$zo==null&&T._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},Qt.prototype.setTexture=function(t,i){this._$zo==null&&T._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(t,i)},Qt.prototype._$Rs=function(){return this._$zo._$Rs()},Qt.prototype._$Ds=function(t){this._$zo._$Ds(t)},Qt.prototype.getDrawParam=function(){return this._$zo};function Bt(){v||(F.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=Bt._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}Bt.prototype=new F,Bt._$cs="VISIBLE:",Bt._$ar="LAYOUT:",Bt.MTN_PREFIX_FADEIN="FADEIN:",Bt.MTN_PREFIX_FADEOUT="FADEOUT:",Bt._$Co=0,Bt._$1T=1,Bt.loadMotion=function(t){var i=li._$C(t);return Bt.loadMotion(i)};function ai(t,i){return String.fromCharCode(t.getUint8(i))}Bt.loadMotion=function(t){t instanceof ArrayBuffer&&(t=new DataView(t));var i=new Bt,e=[0],r=t.byteLength;i._$yT=0;for(var n=0;n<r;++n){var o=ai(t,n),h=o.charCodeAt(0);if(o!=`
`&&o!="\r")if(o!="#")if(o!="$"){if(97<=h&&h<=122||65<=h&&h<=90||o=="_"){for(c=n,p=-1;n<r&&(o=ai(t,n))!="\r"&&o!=`
`;++n)if(o=="="){p=n;break}if(p>=0){var _=new Z;_t.startsWith(t,c,Bt._$cs)?(_._$RP=Z._$hs,_._$4P=_t.createString(t,c,p-c)):_t.startsWith(t,c,Bt._$ar)?(_._$4P=_t.createString(t,c+7,p-c-7),_t.startsWith(t,c+7,"ANCHOR_X")?_._$RP=Z._$xs:_t.startsWith(t,c+7,"ANCHOR_Y")?_._$RP=Z._$us:_t.startsWith(t,c+7,"SCALE_X")?_._$RP=Z._$qs:_t.startsWith(t,c+7,"SCALE_Y")?_._$RP=Z._$Ys:_t.startsWith(t,c+7,"X")?_._$RP=Z._$ws:_t.startsWith(t,c+7,"Y")&&(_._$RP=Z._$Ns)):(_._$RP=Z._$Fr,_._$4P=_t.createString(t,c,p-c)),i.motions.push(_);var a=0,s=[];for(n=p+1;n<r&&(o=ai(t,n))!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"&&(u=_t._$LS(t,r,n,e),e[0]>0)){s.push(u),a++;var f=e[0];if(f<n){console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);break}n=f-1}_._$I0=new Float32Array(s),a>i._$yT&&(i._$yT=a)}}}else{for(var c=n,p=-1;n<r&&(o=ai(t,n))!="\r"&&o!=`
`;++n)if(o=="="){p=n;break}var y=!1;if(p>=0){for(p==c+4&&ai(t,c+1)=="f"&&ai(t,c+2)=="p"&&ai(t,c+3)=="s"&&(y=!0),n=p+1;n<r&&(o=ai(t,n))!="\r"&&o!=`
`;++n)if(o!=","&&o!=" "&&o!="	"){var u=_t._$LS(t,r,n,e);e[0]>0&&y&&5<u&&u<121&&(i._$D0=u),n=e[0]}}for(;n<r&&ai(t,n)!=`
`&&ai(t,n)!="\r";++n);}else for(;n<r&&ai(t,n)!=`
`&&ai(t,n)!="\r";++n);}return i._$rr=1e3*i._$yT/i._$D0|0,i},Bt.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},Bt.prototype.getLoopDurationMSec=function(){return this._$rr},Bt.prototype.dump=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];console.log("_$wL[%s] [%d]. ",i._$4P,i._$I0.length);for(var e=0;e<i._$I0.length&&e<10;e++)console.log("%5.2f ,",i._$I0[e]);console.log(`
`)}},Bt.prototype.updateParamExe=function(t,i,e,r){for(var n=(i-r._$z2)*this._$D0/1e3,o=0|n,h=n-o,_=0;_<this.motions.length;_++){var a=this.motions[_],s=a._$I0.length,f=a._$4P;if(a._$RP==Z._$hs){var c=a._$I0[o>=s?s-1:o];t.setParamFloat(f,c)}else if(!(Z._$ws<=a._$RP&&a._$RP<=Z._$Ys)){var p=t.getParamIndex(f),y=t.getModelContext(),u=.4*(y.getParamMax(p)-y.getParamMin(p)),O=y.getParamFloat(p),I=a._$I0[o>=s?s-1:o],k=a._$I0[o+1>=s?s-1:o+1],rt=O+((I<k&&k-I>u||I>k&&I-k>u?I:I+(k-I)*h)-O)*e;t.setParamFloat(f,rt)}}o>=this._$yT&&(this._$E?(r._$z2=i,this.loopFadeIn&&(r._$bs=i)):r._$9L=!0),this._$eP=e},Bt.prototype._$r0=function(){return this._$E},Bt.prototype._$aL=function(t){this._$E=t},Bt.prototype._$S0=function(){return this._$D0},Bt.prototype._$U0=function(t){this._$D0=t},Bt.prototype.isLoopFadeIn=function(){return this.loopFadeIn},Bt.prototype.setLoopFadeIn=function(t){this.loopFadeIn=t};function kt(){this._$P=new Float32Array(100),this.size=0}kt.prototype.clear=function(){this.size=0},kt.prototype.add=function(t){if(this._$P.length<=this.size){var i=new Float32Array(2*this.size);J._$jT(this._$P,0,i,0,this.size),this._$P=i}this._$P[this.size++]=t},kt.prototype._$BL=function(){var t=new Float32Array(this.size);return J._$jT(this._$P,0,t,0,this.size),t};function Z(){this._$4P=null,this._$I0=null,this._$RP=null}Z._$Fr=0,Z._$hs=1,Z._$ws=100,Z._$Ns=101,Z._$xs=102,Z._$us=103,Z._$qs=104,Z._$Ys=105;function ii(){v||(it.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}ii.prototype=new it,ii._$gT=new Array,ii.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},ii.prototype._$F0=function(t){it.prototype._$F0.call(this,t),this._$A=t._$6L(),this._$o=t._$6L(),this._$GS=t._$nP(),this._$Eo=t._$nP(),it.prototype.readV2_opacity.call(this,t)},ii.prototype.init=function(t){var i=new Oi(this),e=(this._$o+1)*(this._$A+1);return i._$Cr!=null&&(i._$Cr=null),i._$Cr=new Float32Array(2*e),i._$hr!=null&&(i._$hr=null),this._$32()?i._$hr=new Float32Array(2*e):i._$hr=null,i},ii.prototype._$Nr=function(t,i){var e=i;if(this._$GS._$Ur(t)){var r=this._$VT(),n=ii._$gT;n[0]=!1,G._$Vr(t,this._$GS,n,r,this._$Eo,e._$Cr,0,2),i._$Ib(n[0]),this.interpolateOpacity(t,this._$GS,i,n)}},ii.prototype._$2b=function(t,i){var e=i;if(e._$hS(!0),this._$32()){var r=this.getTargetBaseDataID();if(e._$8r==it._$ur&&(e._$8r=t.getBaseDataIndex(r)),e._$8r<0)S._$so&&T._$li("_$L _$0P _$G :: %s",r),e._$hS(!1);else{var n=t.getBaseData(e._$8r),o=t._$q2(e._$8r);if(n!=null&&o._$yo()){var h=o.getTotalScale();e.setTotalScale_notForClient(h);var _=o.getTotalOpacity();e.setTotalOpacity(_*e.getInterpolatedOpacity()),n._$nb(t,o,e._$Cr,e._$hr,this._$VT(),0,2),e._$hS(!0)}else e._$hS(!1)}}else e.setTotalOpacity(e.getInterpolatedOpacity())},ii.prototype._$nb=function(t,i,e,r,n,o,h){var _=i,a=_._$hr!=null?_._$hr:_._$Cr;ii.transformPoints_sdk2(e,r,n,o,h,a,this._$o,this._$A)},ii.transformPoints_sdk2=function(t,i,e,r,n,o,h,_){for(var a,s,f,c=e*n,p=0,y=0,u=0,O=0,I=0,k=0,rt=!1,L=r;L<c;L+=n){var ot,ht,ct,U;if(ct=t[L],ht=(U=t[L+1])*_,(ot=ct*h)<0||ht<0||h<=ot||_<=ht){var R=h+1;if(!rt){rt=!0,p=.25*(o[2*(0+0*R)]+o[2*(h+0*R)]+o[2*(0+_*R)]+o[2*(h+_*R)]),y=.25*(o[2*(0+0*R)+1]+o[2*(h+0*R)+1]+o[2*(0+_*R)+1]+o[2*(h+_*R)+1]);var yt=o[2*(h+_*R)]-o[2*(0+0*R)],Rt=o[2*(h+_*R)+1]-o[2*(0+0*R)+1],Ut=o[2*(h+0*R)]-o[2*(0+_*R)],Yt=o[2*(h+0*R)+1]-o[2*(0+_*R)+1];p-=.5*((u=.5*(yt+Ut))+(I=.5*(yt-Ut))),y-=.5*((O=.5*(Rt+Yt))+(k=.5*(Rt-Yt)))}if(-2<ct&&ct<3&&-2<U&&U<3)if(ct<=0)if(U<=0){var nt=o[2*(0+0*R)],K=o[2*(0+0*R)+1],lt=p-2*u,V=y-2*O,pt=p-2*I,ft=y-2*k,st=p-2*u-2*I,at=y-2*O-2*k;(H=.5*(ct- -2))+(Q=.5*(U- -2))<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q))}else if(U>=1)pt=o[2*(0+_*R)],ft=o[2*(0+_*R)+1],st=p-2*u+1*I,at=y-2*O+1*k,nt=p+3*I,K=y+3*k,lt=p-2*u+3*I,V=y-2*O+3*k,(H=.5*(ct- -2))+(Q=.5*(U-1))<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q));else{(ut=0|ht)==_&&(ut=_-1);var H=.5*(ct- -2),Q=ht-ut,zt=ut/_,Mt=(ut+1)/_;pt=o[2*(0+ut*R)],ft=o[2*(0+ut*R)+1],nt=o[2*(0+(ut+1)*R)],K=o[2*(0+(ut+1)*R)+1],st=p-2*u+zt*I,at=y-2*O+zt*k,lt=p-2*u+Mt*I,V=y-2*O+Mt*k,H+Q<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q))}else if(1<=ct)if(U<=0)lt=o[2*(h+0*R)],V=o[2*(h+0*R)+1],nt=p+3*u,K=y+3*O,st=p+1*u-2*I,at=y+1*O-2*k,pt=p+3*u-2*I,ft=y+3*O-2*k,(H=.5*(ct-1))+(Q=.5*(U- -2))<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q));else if(U>=1)st=o[2*(h+_*R)],at=o[2*(h+_*R)+1],pt=p+3*u+1*I,ft=y+3*O+1*k,lt=p+1*u+3*I,V=y+1*O+3*k,nt=p+3*u+3*I,K=y+3*O+3*k,(H=.5*(ct-1))+(Q=.5*(U-1))<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q));else{var ut;(ut=0|ht)==_&&(ut=_-1),H=.5*(ct-1),Q=ht-ut,zt=ut/_,Mt=(ut+1)/_,st=o[2*(h+ut*R)],at=o[2*(h+ut*R)+1],lt=o[2*(h+(ut+1)*R)],V=o[2*(h+(ut+1)*R)+1],pt=p+3*u+zt*I,ft=y+3*O+zt*k,nt=p+3*u+Mt*I,K=y+3*O+Mt*k,H+Q<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q))}else if(U<=0){(vt=0|ot)==h&&(vt=h-1),H=ot-vt,Q=.5*(U- -2);var Pt=vt/h,At=(vt+1)/h;lt=o[2*(vt+0*R)],V=o[2*(vt+0*R)+1],nt=o[2*(vt+1+0*R)],K=o[2*(vt+1+0*R)+1],st=p+Pt*u-2*I,at=y+Pt*O-2*k,pt=p+At*u-2*I,ft=y+At*O-2*k,H+Q<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q))}else if(U>=1){var vt;(vt=0|ot)==h&&(vt=h-1),H=ot-vt,Q=.5*(U-1),Pt=vt/h,At=(vt+1)/h,st=o[2*(vt+_*R)],at=o[2*(vt+_*R)+1],pt=o[2*(vt+1+_*R)],ft=o[2*(vt+1+_*R)+1],lt=p+Pt*u+3*I,V=y+Pt*O+3*k,nt=p+At*u+3*I,K=y+At*O+3*k,H+Q<=1?(i[L]=st+(pt-st)*H+(lt-st)*Q,i[L+1]=at+(ft-at)*H+(V-at)*Q):(i[L]=nt+(lt-nt)*(1-H)+(pt-nt)*(1-Q),i[L+1]=K+(V-K)*(1-H)+(ft-K)*(1-Q))}else A.err.printf(`_$li calc : %.4f , %.4f          @@BDBoxGrid
`,ct,U);else i[L]=p+ct*u+U*I,i[L+1]=y+ct*O+U*k}else a=2*((0|ot)+(0|ht)*(h+1)),(s=ot-(0|ot))+(f=ht-(0|ht))<1?(i[L]=o[a]*(1-s-f)+o[a+2]*s+o[a+2*(h+1)]*f,i[L+1]=o[a+1]*(1-s-f)+o[a+3]*s+o[a+2*(h+1)+1]*f):(i[L]=o[a+2*(h+1)+2]*(s-1+f)+o[a+2*(h+1)]*(1-s)+o[a+2]*(1-f),i[L+1]=o[a+2*(h+1)+3]*(s-1+f)+o[a+2*(h+1)+1]*(1-s)+o[a+3]*(1-f))}},ii.prototype.transformPoints_sdk1=function(t,i,e,r,n,o,h){for(var _,a,s,f,c,p,y,u=i,O=this._$o,I=this._$A,k=n*h,rt=u._$hr!=null?u._$hr:u._$Cr,L=o;L<k;L+=h)S._$ts?(_=e[L],a=e[L+1],_<0?_=0:_>1&&(_=1),a<0?a=0:a>1&&(a=1),f=0|(a*=I),(s=0|(_*=O))>O-1&&(s=O-1),f>I-1&&(f=I-1),p=_-s,y=a-f,c=2*(s+f*(O+1))):(p=(_=e[L]*O)-(0|_),y=(a=e[L+1]*I)-(0|a),c=2*((0|_)+(0|a)*(O+1))),p+y<1?(r[L]=rt[c]*(1-p-y)+rt[c+2]*p+rt[c+2*(O+1)]*y,r[L+1]=rt[c+1]*(1-p-y)+rt[c+3]*p+rt[c+2*(O+1)+1]*y):(r[L]=rt[c+2*(O+1)+2]*(p-1+y)+rt[c+2*(O+1)]*(1-p)+rt[c+2]*(1-y),r[L+1]=rt[c+2*(O+1)+3]*(p-1+y)+rt[c+2*(O+1)+1]*(1-p)+rt[c+3]*(1-y))},ii.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},ii.prototype.getType=function(){return it._$_b};function Oi(t){Kt.prototype.constructor.call(this,t),this._$8r=it._$ur,this._$Cr=null,this._$hr=null}Oi.prototype=new Kt;function Jt(){v||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,Jt._$42++)}Jt._$42=0,Jt.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},Jt.prototype._$F0=function(t){this._$g0=t._$8L(),this.visible=t._$8L(),this._$NL=t._$nP(),this._$3S=t._$nP(),this._$aS=t._$nP()},Jt.prototype.init=function(t){var i=new Li(this);return i.setPartsOpacity(this.isVisible()?1:0),i},Jt.prototype._$6o=function(t){if(this._$3S==null)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(t)},Jt.prototype._$3o=function(t){if(this._$aS==null)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(t)},Jt.prototype._$Zo=function(t){this._$3S=t},Jt.prototype._$xo=function(t){this._$aS=t},Jt.prototype.isVisible=function(){return this.visible},Jt.prototype._$uL=function(){return this._$g0},Jt.prototype._$KP=function(t){this.visible=t},Jt.prototype._$ET=function(t){this._$g0=t},Jt.prototype.getBaseData=function(){return this._$3S},Jt.prototype.getDrawData=function(){return this._$aS},Jt.prototype._$p2=function(){return this._$NL},Jt.prototype._$ob=function(t){this._$NL=t},Jt.prototype.getPartsID=function(){return this._$NL},Jt.prototype._$MP=function(t){this._$NL=t};function Li(t){this._$VS=null,this._$e0=null,this._$e0=t}Li.prototype=new function(){},Li.prototype.getPartsOpacity=function(){return this._$VS},Li.prototype.setPartsOpacity=function(t){this._$VS=t};function _i(t){v||(this.id=t)}_i._$L7=function(){d._$27(),Ht._$27(),q._$27(),x._$27()},_i.prototype.toString=function(){return this.id};function fi(){v||(this._$4S=null)}fi.prototype._$1s=function(){return this._$4S},fi.prototype._$zP=function(){this._$4S=new Array},fi.prototype._$F0=function(t){this._$4S=t._$nP()},fi.prototype._$Ks=function(t){this._$4S.push(t)};function Ot(t,i){this.canvas=t,this.context=i,this.viewport=new Array(0,0,t.width,t.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}Ot.tr=new ni,Ot._$50=new ni,Ot._$Ti=new Array(0,0),Ot._$Pi=new Array(0,0),Ot._$B=new Array(0,0),Ot.prototype._$lP=function(t,i,e,r){this.viewport=new Array(t,i,e,r)},Ot.prototype._$bL=function(){this.context.save();var t=this.viewport;t!=null&&(this.context.beginPath(),this.context._$Li(t[0],t[1],t[2],t[3]),this.context.clip())},Ot.prototype._$ei=function(){this.context.restore()},Ot.prototype.drawElements=function(t,i,e,r,n,o,h,_){try{n!=this._$Qo&&(this._$Qo=n,this.context.globalAlpha=n);for(var a=i.length,s=t.width,f=t.height,c=this.context,p=this._$xP,y=this._$uP,u=this._$6r,O=this._$3r,I=Ot.tr,k=Ot._$Ti,rt=Ot._$Pi,L=Ot._$B,ot=0;ot<a;ot+=3){c.save();var ht=i[ot],ct=i[ot+1],U=i[ot+2],R=p+u*e[2*ht],yt=y+O*e[2*ht+1],Rt=p+u*e[2*ct],Ut=y+O*e[2*ct+1],Yt=p+u*e[2*U],nt=y+O*e[2*U+1];h&&(h._$PS(R,yt,L),R=L[0],yt=L[1],h._$PS(Rt,Ut,L),Rt=L[0],Ut=L[1],h._$PS(Yt,nt,L),Yt=L[0],nt=L[1]);var K=s*r[2*ht],lt=f-f*r[2*ht+1],V=s*r[2*ct],pt=f-f*r[2*ct+1],ft=s*r[2*U],st=f-f*r[2*U+1],at=Math.atan2(pt-lt,V-K),H=Math.atan2(Ut-yt,Rt-R),Q=Rt-R,zt=Ut-yt,Mt=Math.sqrt(Q*Q+zt*zt),ut=V-K,Pt=pt-lt,At=Mt/Math.sqrt(ut*ut+Pt*Pt);b._$ni(ft,st,K,lt,V-K,pt-lt,-(pt-lt),V-K,k),b._$ni(Yt,nt,R,yt,Rt-R,Ut-yt,-(Ut-yt),Rt-R,rt);var vt=(rt[0]-k[0])/k[1],It=Math.min(K,V,ft),Ct=Math.max(K,V,ft),Xt=Math.min(lt,pt,st),ei=Math.max(lt,pt,st),hi=Math.floor(It),di=Math.floor(Xt),vi=Math.ceil(Ct),gi=Math.ceil(ei);if(I.identity(),I.translate(R,yt),I.rotate(H),I.scale(1,rt[1]/k[1]),I.shear(vt,0),I.scale(At,At),I.rotate(-at),I.translate(-K,-lt),I.setContext(c),o||(o=1.2),S.IGNORE_EXPAND&&(o=0),S.USE_CACHED_POLYGON_IMAGE){var si=_._$e0;if(si.gl_cacheImage=si.gl_cacheImage||{},!si.gl_cacheImage[ot]){var qt=Ot.createCanvas(vi-hi,gi-di);S.DEBUG_DATA.LDGL_CANVAS_MB=S.DEBUG_DATA.LDGL_CANVAS_MB||0,S.DEBUG_DATA.LDGL_CANVAS_MB+=(vi-hi)*(gi-di)*4;var yi=qt.getContext("2d");yi.translate(-hi,-di),Ot.clip(yi,I,o,Mt,K,lt,V,pt,ft,st,R,yt,Rt,Ut,Yt,nt),yi.drawImage(t,0,0),si.gl_cacheImage[ot]={cacheCanvas:qt,cacheContext:yi}}c.drawImage(si.gl_cacheImage[ot].cacheCanvas,hi,di)}else S.IGNORE_CLIP||Ot.clip(c,I,o,Mt,K,lt,V,pt,ft,st,R,yt,Rt,Ut,Yt,nt),S.USE_ADJUST_TRANSLATION&&(It=0,Ct=s,Xt=0,ei=f),c.drawImage(t,It,Xt,Ct-It,ei-Xt,It,Xt,Ct-It,ei-Xt);c.restore()}}catch(Si){T._$Rb(Si)}},Ot.clip=function(t,i,e,r,n,o,h,_,a,s,f,c,p,y,u,O){e>.02?Ot.expandClip(t,i,e,r,f,c,p,y,u,O):Ot.clipWithTransform(t,null,n,o,h,_,a,s)},Ot.expandClip=function(t,i,e,r,n,o,h,_,a,s){var f=h-n,c=_-o,p=a-n,y=s-o,u=f*y-c*p>0?e:-e,O=-c,I=f,k=a-h,rt=s-_,L=-rt,ot=k,ht=Math.sqrt(k*k+rt*rt),ct=-y,U=p,R=Math.sqrt(p*p+y*y),yt=n-u*O/r,Rt=o-u*I/r,Ut=h-u*O/r,Yt=_-u*I/r,nt=h-u*L/ht,K=_-u*ot/ht,lt=a-u*L/ht,V=s-u*ot/ht,pt=n+u*ct/R,ft=o+u*U/R,st=a+u*ct/R,at=s+u*U/R,H=Ot._$50;return i._$P2(H)!=null&&(Ot.clipWithTransform(t,H,yt,Rt,Ut,Yt,nt,K,lt,V,st,at,pt,ft),!0)},Ot.clipWithTransform=function(t,i,e,r,n,o,h,_){if(arguments.length<7)T._$li("err : @LDGL.clip()");else if(arguments[1]instanceof ni){var a=Ot._$B,s=i,f=arguments;if(t.beginPath(),s){s._$PS(f[2],f[3],a),t.moveTo(a[0],a[1]);for(var c=4;c<f.length;c+=2)s._$PS(f[c],f[c+1],a),t.lineTo(a[0],a[1])}else for(t.moveTo(f[2],f[3]),c=4;c<f.length;c+=2)t.lineTo(f[c],f[c+1]);t.clip()}else T._$li("err : a[0] is _$6 LDTransform @LDGL.clip()")},Ot.createCanvas=function(t,i){var e=document.createElement("canvas");return e.setAttribute("width",t),e.setAttribute("height",i),e||T._$li("err : "+e),e},Ot.dumpValues=function(){for(var t="",i=0;i<arguments.length;i++)t+="["+i+"]= "+arguments[i].toFixed(3)+" , ";console.log(t)};function ci(){v||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}ci.prototype._$F0=function(t){this._$TT=t._$_T(),this._$LT=t._$_T(),this._$FS=t._$_T(),this._$wL=t._$nP()},ci.prototype.getMinValue=function(){return this._$TT},ci.prototype.getMaxValue=function(){return this._$LT},ci.prototype.getDefaultValue=function(){return this._$FS},ci.prototype.getParamID=function(){return this._$wL};function Kt(t){v||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=t,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}Kt.prototype._$yo=function(){return this._$AT&&!this._$JS},Kt.prototype._$hS=function(t){this._$AT=t},Kt.prototype._$GT=function(){return this._$e0},Kt.prototype._$l2=function(t){this._$IP=t},Kt.prototype.getPartsIndex=function(){return this._$IP},Kt.prototype._$x2=function(){return this._$JS},Kt.prototype._$Ib=function(t){this._$JS=t},Kt.prototype.getTotalScale=function(){return this.totalScale},Kt.prototype.setTotalScale_notForClient=function(t){this.totalScale=t},Kt.prototype.getInterpolatedOpacity=function(){return this._$7s},Kt.prototype.setInterpolatedOpacity=function(t){this._$7s=t},Kt.prototype.getTotalOpacity=function(t){return this.totalOpacity},Kt.prototype.setTotalOpacity=function(t){this.totalOpacity=t};function S(){}S._$2s="2.1.00_1",S._$Kr=201001e3,S._$sP=!0,S._$so=!0,S._$cb=!1,S._$3T=!0,S._$Ts=!0,S._$fb=!0,S._$ts=!0,S.L2D_DEFORMER_EXTEND=!0,S._$Wb=!1,S._$yr=!1,S._$Zs=!1,S.L2D_NO_ERROR=0,S._$i7=1e3,S._$9s=1001,S._$es=1100,S._$r7=2e3,S._$07=2001,S._$b7=2002,S._$H7=4e3,S.L2D_COLOR_BLEND_MODE_MULT=0,S.L2D_COLOR_BLEND_MODE_ADD=1,S.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,S._$6b=!0,S._$cT=0,S.clippingMaskBufferSize=256,S.glContext=new Array,S.frameBuffers=new Array,S.fTexture=new Array,S.IGNORE_CLIP=!1,S.IGNORE_EXPAND=!1,S.EXPAND_W=2,S.USE_ADJUST_TRANSLATION=!0,S.USE_CANVAS_TRANSFORM=!0,S.USE_CACHED_POLYGON_IMAGE=!1,S.DEBUG_DATA={},S.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},S.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},S.PROFILE_IOS_DEFAULT=S.PROFILE_IOS_QUALITY,S.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},S.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},S.initProfile=function(){Dt.isIOS()?S.setupProfile(S.PROFILE_IOS_DEFAULT):Dt.isAndroid()?S.setupProfile(S.PROFILE_ANDROID):S.setupProfile(S.PROFILE_DESKTOP)},S.setupProfile=function(t,i){if(typeof t=="number")switch(t){case 9901:t=S.PROFILE_IOS_SPEED;break;case 9902:t=S.PROFILE_IOS_QUALITY;break;case 9903:t=S.PROFILE_IOS_DEFAULT;break;case 9904:t=S.PROFILE_ANDROID;break;case 9905:t=S.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+t)}arguments.length<2&&(i=!0),i&&console.log("profile : "+t.PROFILE_NAME);for(var e in t)S[e]=t[e],i&&console.log("  ["+e+"] = "+t[e])},S.init=function(){S._$6b&&(console.log("Live2D %s",S._$2s),S._$6b=!1,S.initProfile())},S.getVersionStr=function(){return S._$2s},S.getVersionNo=function(){return S._$Kr},S._$sT=function(t){S._$cT=t},S.getError=function(){var t=S._$cT;return S._$cT=0,t},S.dispose=function(){S.glContext=[],S.frameBuffers=[],S.fTexture=[]},S.setGL=function(t,i){var e=i||0;S.glContext[e]=t},S.getGL=function(t){return S.glContext[t]},S.setClippingMaskBufferSize=function(t){S.clippingMaskBufferSize=t},S.getClippingMaskBufferSize=function(){return S.clippingMaskBufferSize},S.deleteBuffer=function(t){S.getGL(t).deleteFramebuffer(S.frameBuffers[t].framebuffer),delete S.frameBuffers[t],delete S.glContext[t]};function Ci(){}Ci._$r2=function(t){return t<0?0:t>1?1:.5-.5*Math.cos(t*Wt.PI_F)};function $i(t){v||(this._$ib=t)}$i._$fr=-1,$i.prototype.toString=function(){return this._$ib};function xt(){v||(gt.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=xt._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=xt._$42++)}xt.prototype=new gt,xt._$42=0,xt._$Os=30,xt._$ms=0,xt._$ns=1,xt._$_s=2,xt._$gT=new Array,xt.prototype._$_S=function(t){this._$LP=t},xt.prototype.getTextureNo=function(){return this._$LP},xt.prototype._$ZL=function(){return this._$Qi},xt.prototype._$H2=function(){return this._$JP},xt.prototype.getNumPoints=function(){return this._$d0},xt.prototype.getType=function(){return gt._$wb},xt.prototype._$B2=function(t,i,e){var r=i,n=r._$hr!=null?r._$hr:r._$Cr;switch($t._$do){default:case $t._$Ms:throw new Error("_$L _$ro ");case $t._$Qs:for(var o=this._$d0-1;o>=0;--o)n[o*$t._$No+4]=e}},xt.prototype._$zP=function(){this._$GS=new D,this._$GS._$zP()},xt.prototype._$F0=function(t){gt.prototype._$F0.call(this,t),this._$LP=t._$6L(),this._$d0=t._$6L(),this._$Yo=t._$6L();var i=t._$nP();this._$BP=new Int16Array(3*this._$Yo);for(var e=3*this._$Yo-1;e>=0;--e)this._$BP[e]=i[e];if(this._$Eo=t._$nP(),this._$Qi=t._$nP(),t.getFormatVersion()>=Tt._$s7){if(this._$JP=t._$6L(),this._$JP!=0){if((1&this._$JP)!=0){var r=t._$6L();this._$5P==null&&(this._$5P=new Object),this._$5P._$Hb=parseInt(r)}(this._$JP&xt._$Os)!=0?this._$6s=(this._$JP&xt._$Os)>>1:this._$6s=xt._$ms,(32&this._$JP)!=0&&(this.culling=!1)}}else this._$JP=0},xt.prototype.init=function(t){var i=new Di(this),e=this._$d0*$t._$No,r=this._$32();switch(i._$Cr!=null&&(i._$Cr=null),i._$Cr=new Float32Array(e),i._$hr!=null&&(i._$hr=null),i._$hr=r?new Float32Array(e):null,$t._$do){default:case $t._$Ms:if($t._$Ls)for(var n=this._$d0-1;n>=0;--n){var o=n<<1;this._$Qi[o+1]=1-this._$Qi[o+1]}break;case $t._$Qs:for(n=this._$d0-1;n>=0;--n){o=n<<1;var h=n*$t._$No,_=this._$Qi[o],a=this._$Qi[o+1];i._$Cr[h]=_,i._$Cr[h+1]=a,i._$Cr[h+4]=0,r&&(i._$hr[h]=_,i._$hr[h+1]=a,i._$hr[h+4]=0)}}return i},xt.prototype._$Nr=function(t,i){var e=i;if(this!=e._$GT()&&console.log("### assert!! ### "),this._$GS._$Ur(t)&&(gt.prototype._$Nr.call(this,t,e),!e._$IS[0])){var r=xt._$gT;r[0]=!1,G._$Vr(t,this._$GS,r,this._$d0,this._$Eo,e._$Cr,$t._$i2,$t._$No)}},xt.prototype._$2b=function(t,i){try{this!=i._$GT()&&console.log("### assert!! ### ");var e=!1;i._$IS[0]&&(e=!0);var r=i;if(!e&&(gt.prototype._$2b.call(this,t),this._$32())){var n=this.getTargetBaseDataID();if(r._$8r==gt._$ur&&(r._$8r=t.getBaseDataIndex(n)),r._$8r<0)S._$so&&T._$li("_$L _$0P _$G :: %s",n);else{var o=t.getBaseData(r._$8r),h=t._$q2(r._$8r);o==null||h._$x2()?r._$AT=!1:(o._$nb(t,h,r._$Cr,r._$hr,this._$d0,$t._$i2,$t._$No),r._$AT=!0),r.baseOpacity=h.getTotalOpacity()}}}catch(_){throw _}},xt.prototype.draw=function(t,i,e){if(this!=e._$GT()&&console.log("### assert!! ### "),!e._$IS[0]){var r=e,n=this._$LP;n<0&&(n=1);var o=this.getOpacity(i,r)*e._$VS*e.baseOpacity,h=r._$hr!=null?r._$hr:r._$Cr;t.setClipBufPre_clipContextForDraw(e.clipBufPre_clipContext),t._$WP(this.culling),t._$Uo(n,3*this._$Yo,this._$BP,h,this._$Qi,o,this._$6s,r)}},xt.prototype.dump=function(){console.log(`  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) 
`,this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var t=0;t<this._$BP.length;t++)console.log("%5d ,",this._$BP[t]);for(console.log(`
  _$5i _$30`),t=0;t<this._$Eo.length;t++){console.log(`
    _$30[%d] = `,t);for(var i=this._$Eo[t],e=0;e<i.length;e++)console.log("%6.2f, ",i[e])}console.log(`
`)},xt.prototype._$72=function(t){return this._$5P==null?null:this._$5P[t]},xt.prototype.getIndexArray=function(){return this._$BP};function Di(t){Mi.prototype.constructor.call(this,t),this._$8r=gt._$ur,this._$Cr=null,this._$hr=null}Di.prototype=new Mi,Di.prototype.getTransformedPoints=function(){return this._$hr!=null?this._$hr:this._$Cr};function Ni(){v||(this.x=null,this.y=null)}Ni.prototype._$HT=function(t){this.x=t.x,this.y=t.y},Ni.prototype._$HT=function(t,i){this.x=t,this.y=i};function Vt(t){v||(l.prototype.constructor.call(this),this.drawParamWebGL=new jt(t),this.drawParamWebGL.setGL(S.getGL(t)))}Vt.prototype=new l,Vt.loadModel=function(t){var i=new Vt;return l._$62(i,t),i},Vt.loadModel=function(t,i){var e=new Vt(i||0);return l._$62(e,t),e},Vt._$to=function(){return new Vt},Vt._$er=function(t){var i=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(i.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+i._$PL());for(var e=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],r=Vt.loadModel(i._$3b()),n=0;n<e.length;n++){var o=new _$5(e[n]);if(o.exists()==0)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+o._$PL());r.setTexture(n,_$nL._$_o(t,o._$3b()))}return r},Vt.prototype.setGL=function(t){S.setGL(t)},Vt.prototype.setTransform=function(t){this.drawParamWebGL.setTransform(t)},Vt.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},Vt.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},Vt.prototype._$K2=function(){this.drawParamWebGL._$K2()},Vt.prototype.setTexture=function(t,i){this.drawParamWebGL==null&&T._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},Vt.prototype.setTexture=function(t,i){this.drawParamWebGL==null&&T._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(t,i)},Vt.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},Vt.prototype._$Ds=function(t){this.drawParamWebGL._$Ds(t)},Vt.prototype.getDrawParam=function(){return this.drawParamWebGL},Vt.prototype.setMatrix=function(t){this.drawParamWebGL.setMatrix(t)},Vt.prototype.setPremultipliedAlpha=function(t){this.drawParamWebGL.setPremultipliedAlpha(t)},Vt.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},Vt.prototype.setAnisotropy=function(t){this.drawParamWebGL.setAnisotropy(t)},Vt.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()};function Ti(){v||(this.motions=null,this._$eb=!1,this.motions=new Array)}Ti.prototype._$tb=function(){return this.motions},Ti.prototype.startMotion=function(t,i){for(var e=null,r=this.motions.length,n=0;n<r;++n)(e=this.motions[n])!=null&&(e._$qS(e._$w0.getFadeOut()),this._$eb&&T._$Ji(`MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)
`,r,e._$sr));if(t==null)return-1;(e=new wi)._$w0=t,this.motions.push(e);var o=e._$sr;return this._$eb&&T._$Ji(`MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)
`,r,o),o},Ti.prototype.updateParam=function(t){try{for(var i=!1,e=0;e<this.motions.length;e++){var r=this.motions[e];if(r!=null){var n=r._$w0;n!=null?(n.updateParam(t,r),i=!0,r.isFinished()&&(this._$eb&&T._$Ji(`MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)
`,this.motions.length-1,r._$sr),this.motions.splice(e,1),e--)):(this.motions=this.motions.splice(e,1),e--)}else this.motions.splice(e,1),e--}return i}catch(o){return T._$li(o),!0}},Ti.prototype.isFinished=function(t){if(arguments.length>=1){for(var i=0;i<this.motions.length;i++)if((e=this.motions[i])!=null&&e._$sr==t&&!e.isFinished())return!1;return!0}for(i=0;i<this.motions.length;i++){var e;if((e=this.motions[i])!=null)if(e._$w0!=null){if(!e.isFinished())return!1}else this.motions.splice(i,1),i--;else this.motions.splice(i,1),i--}return!0},Ti.prototype.stopAllMotions=function(){for(var t=0;t<this.motions.length;t++){var i=this.motions[t];i!=null?(i._$w0,this.motions.splice(t,1),t--):(this.motions.splice(t,1),t--)}},Ti.prototype._$Zr=function(t){this._$eb=t},Ti.prototype._$e=function(){console.log(`-- _$R --
`);for(var t=0;t<this.motions.length;t++){var i=this.motions[t]._$w0;console.log(`MotionQueueEnt[%d] :: %s
`,this.motions.length,i.toString())}};function wi(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=wi._$Gs++}wi._$Gs=0,wi.prototype.isFinished=function(){return this._$9L},wi.prototype._$qS=function(t){var i=J.getUserTimeMSec()+t;(this._$Do<0||i<this._$Do)&&(this._$Do=i)},wi.prototype._$Bs=function(){return this._$sr};function ni(){this.m=new Array(1,0,0,0,1,0,0,0,1)}ni.prototype.setContext=function(t){var i=this.m;t.transform(i[0],i[1],i[3],i[4],i[6],i[7])},ni.prototype.toString=function(){for(var t="LDTransform { ",i=0;i<9;i++)t+=this.m[i].toFixed(2)+" ,";return t+=" }"},ni.prototype.identity=function(){var t=this.m;t[0]=t[4]=t[8]=1,t[1]=t[2]=t[3]=t[5]=t[6]=t[7]=0},ni.prototype._$PS=function(t,i,e){e==null&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},ni.prototype._$P2=function(t){t||(t=new ni);var i=this.m,e=i[0],r=i[1],n=i[2],o=i[3],h=i[4],_=i[5],a=i[6],s=i[7],f=i[8],c=e*h*f+r*_*a+n*o*s-e*_*s-n*h*a-r*o*f;if(c==0)return null;var p=1/c;return t.m[0]=p*(h*f-s*_),t.m[1]=p*(s*n-r*f),t.m[2]=p*(r*_-h*n),t.m[3]=p*(a*_-o*f),t.m[4]=p*(e*f-a*n),t.m[5]=p*(o*n-e*_),t.m[6]=p*(o*s-a*h),t.m[7]=p*(a*r-e*s),t.m[8]=p*(e*h-o*r),t},ni.prototype.transform=function(t,i,e){e==null&&(e=new Array(0,0));var r=this.m;return e[0]=r[0]*t+r[3]*i+r[6],e[1]=r[1]*t+r[4]*i+r[7],e},ni.prototype.translate=function(t,i){var e=this.m;e[6]=e[0]*t+e[3]*i+e[6],e[7]=e[1]*t+e[4]*i+e[7],e[8]=e[2]*t+e[5]*i+e[8]},ni.prototype.scale=function(t,i){var e=this.m;e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=i,e[4]*=i,e[5]*=i},ni.prototype.shear=function(t,i){var e=this.m,r=e[0]+e[3]*i,n=e[1]+e[4]*i,o=e[2]+e[5]*i;e[3]=e[0]*t+e[3],e[4]=e[1]*t+e[4],e[5]=e[2]*t+e[5],e[0]=r,e[1]=n,e[2]=o},ni.prototype.rotate=function(t){var i=this.m,e=Math.cos(t),r=Math.sin(t),n=i[0]*e+i[3]*r,o=i[1]*e+i[4]*r,h=i[2]*e+i[5]*r;i[3]=-i[0]*r+i[3]*e,i[4]=-i[1]*r+i[4]*e,i[5]=-i[2]*r+i[5]*e,i[0]=n,i[1]=o,i[2]=h},ni.prototype.concatenate=function(t){var i=this.m,e=t.m,r=i[0]*e[0]+i[3]*e[1]+i[6]*e[2],n=i[1]*e[0]+i[4]*e[1]+i[7]*e[2],o=i[2]*e[0]+i[5]*e[1]+i[8]*e[2],h=i[0]*e[3]+i[3]*e[4]+i[6]*e[5],_=i[1]*e[3]+i[4]*e[4]+i[7]*e[5],a=i[2]*e[3]+i[5]*e[4]+i[8]*e[5],s=i[0]*e[6]+i[3]*e[7]+i[6]*e[8],f=i[1]*e[6]+i[4]*e[7]+i[7]*e[8],c=i[2]*e[6]+i[5]*e[7]+i[8]*e[8];m[0]=r,m[1]=n,m[2]=o,m[3]=h,m[4]=_,m[5]=a,m[6]=s,m[7]=f,m[8]=c};function Ht(t){v||_i.prototype.constructor.call(this,t)}Ht.prototype=new _i,Ht._$eT=null,Ht._$tP=new Object,Ht._$2o=function(){return Ht._$eT==null&&(Ht._$eT=Ht.getID("DST_BASE")),Ht._$eT},Ht._$27=function(){Ht._$tP.clear(),Ht._$eT=null},Ht.getID=function(t){var i=Ht._$tP[t];return i==null&&(i=new Ht(t),Ht._$tP[t]=i),i},Ht.prototype._$3s=function(){return new Ht};function jt(t){v||(tt.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=t,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}jt.prototype=new tt,jt._$9r=function(t){return new Float32Array(t)},jt._$vb=function(t){return new Int16Array(t)},jt._$cr=function(t,i){return t==null||t._$yL()<i.length?((t=jt._$9r(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},jt._$mb=function(t,i){return t==null||t._$yL()<i.length?((t=jt._$vb(2*i.length)).put(i),t._$oT(0)):(t.clear(),t.put(i),t._$oT(0)),t},jt._$Hs=function(){return this._$Gr},jt._$as=function(t){this._$Gr=t},jt.prototype.getGL=function(){return this.gl},jt.prototype.setGL=function(t){this.gl=t},jt.prototype.setTransform=function(t){this.transform=t},jt.prototype._$ZT=function(){var t=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=t.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.DEPTH_TEST),t.frontFace(t.CW),t.enable(t.BLEND),t.colorMask(1,1,1,1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)},jt.prototype._$Uo=function(t,i,e,r,n,o,h,_){if(!(o<.01&&this.clipBufPre_clipContextMask==null)){o>.9&&S.EXPAND_W;var a=this.gl;if(this.gl==null)throw new Error("gl is null");var s=1*this._$C0*o,f=1*this._$tT*o,c=1*this._$WL*o,p=this._$lT*o;if(this.clipBufPre_clipContextMask!=null){a.frontFace(a.CCW),a.useProgram(this.shaderProgram),this._$vS=Ei(a,this._$vS,r),this._$no=Bi(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Ei(a,this._$NT,n),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var y=this.getClipBufPre_clipContextMask().layoutChannelNo,u=this.getChannelFlagAsColor(y);a.uniform4f(this.u_channelFlag,u.r,u.g,u.b,u.a);var O=this.getClipBufPre_clipContextMask().layoutBounds;a.uniform4f(this.u_baseColor_Loc,2*O.x-1,2*O.y-1,2*O._$EL()-1,2*O._$5T()-1),a.uniform1i(this.u_maskFlag_Loc,!0)}else this.getClipBufPre_clipContextDraw()!=null?(a.useProgram(this.shaderProgramOff),this._$vS=Ei(a,this._$vS,r),this._$no=Bi(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc_Off),a.vertexAttribPointer(this.a_position_Loc_Off,2,a.FLOAT,!1,0,0),this._$NT=Ei(a,this._$NT,n),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc_Off,1),a.enableVertexAttribArray(this.a_texCoord_Loc_Off),a.vertexAttribPointer(this.a_texCoord_Loc_Off,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),a.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,S.fTexture[this.glno]),a.uniform1i(this.s_texture1_Loc_Off,2),y=this.getClipBufPre_clipContextDraw().layoutChannelNo,u=this.getChannelFlagAsColor(y),a.uniform4f(this.u_channelFlag_Loc_Off,u.r,u.g,u.b,u.a),a.uniform4f(this.u_baseColor_Loc_Off,s,f,c,p)):(a.useProgram(this.shaderProgram),this._$vS=Ei(a,this._$vS,r),this._$no=Bi(a,this._$no,e),a.enableVertexAttribArray(this.a_position_Loc),a.vertexAttribPointer(this.a_position_Loc,2,a.FLOAT,!1,0,0),this._$NT=Ei(a,this._$NT,n),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures[t]),a.uniform1i(this.s_texture0_Loc,1),a.enableVertexAttribArray(this.a_texCoord_Loc),a.vertexAttribPointer(this.a_texCoord_Loc,2,a.FLOAT,!1,0,0),a.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),a.uniform4f(this.u_baseColor_Loc,s,f,c,p),a.uniform1i(this.u_maskFlag_Loc,!1));this.culling?this.gl.enable(a.CULL_FACE):this.gl.disable(a.CULL_FACE),this.gl.enable(a.BLEND);var I,k,rt,L;if(this.clipBufPre_clipContextMask!=null)I=a.ONE,k=a.ONE_MINUS_SRC_ALPHA,rt=a.ONE,L=a.ONE_MINUS_SRC_ALPHA;else switch(h){case xt._$ms:I=a.ONE,k=a.ONE_MINUS_SRC_ALPHA,rt=a.ONE,L=a.ONE_MINUS_SRC_ALPHA;break;case xt._$ns:I=a.ONE,k=a.ONE,rt=a.ZERO,L=a.ONE;break;case xt._$_s:I=a.DST_COLOR,k=a.ONE_MINUS_SRC_ALPHA,rt=a.ZERO,L=a.ONE}a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(I,k,rt,L),this.anisotropyExt&&a.texParameteri(a.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var ot=e.length;a.drawElements(a.TRIANGLES,ot,a.UNSIGNED_SHORT,0),a.bindTexture(a.TEXTURE_2D,null)}};function Ei(t,i,e){return i==null&&(i=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}function Bi(t,i,e){return i==null&&(i=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.DYNAMIC_DRAW),i}jt.prototype._$Rs=function(){throw new Error("_$Rs")},jt.prototype._$Ds=function(t){throw new Error("_$Ds")},jt.prototype._$K2=function(){for(var t=0;t<this.textures.length;t++)this.textures[t]!=0&&(this.gl._$K2(1,this.textures,t),this.textures[t]=null)},jt.prototype.setTexture=function(t,i){this.textures[t]=i},jt.prototype.initShader=function(){var t=this.gl;this.loadShaders2(),this.a_position_Loc=t.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=t.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=t.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=t.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=t.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=t.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=t.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=t.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=t.getUniformLocation(this.shaderProgramOff,"u_baseColor")},jt.prototype.disposeShader=function(){var t=this.gl;this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},jt.prototype.compileShader=function(t,i){var e=this.gl,r=i,n=e.createShader(t);if(n==null)return T._$Ji("_$L0 to create shader"),null;if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(n);return T._$Ji("_$L0 to compile shader : "+o),e.deleteShader(n),null}return n},jt.prototype.loadShaders2=function(){var t=this.gl;if(this.shaderProgram=t.createProgram(),!this.shaderProgram||(this.shaderProgramOff=t.createProgram(),!this.shaderProgramOff))return!1;if(this.vertShader=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}"),!this.vertShader)return T._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(t.VERTEX_SHADER,"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}"),!this.vertShaderOff)return T._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}"),!this.fragShader)return T._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(t.FRAGMENT_SHADER,"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}"),!this.fragShaderOff)return T._$Ji("OffFragment shader compile _$li!"),!1;if(t.attachShader(this.shaderProgram,this.vertShader),t.attachShader(this.shaderProgram,this.fragShader),t.attachShader(this.shaderProgramOff,this.vertShaderOff),t.attachShader(this.shaderProgramOff,this.fragShaderOff),t.linkProgram(this.shaderProgram),t.linkProgram(this.shaderProgramOff),!t.getProgramParameter(this.shaderProgram,t.LINK_STATUS)){var i=t.getProgramInfoLog(this.shaderProgram);return T._$Ji("_$L0 to link program: "+i),this.vertShader&&(t.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(t.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(t.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(t.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(t.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(t.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},jt.prototype.createFramebuffer=function(){var t=this.gl,i=S.clippingMaskBufferSize,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),S.fTexture[this.glno]=n,{framebuffer:e,renderbuffer:r,texture:S.fTexture[this.glno]}};function Zt(t){v||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=t,this._$F=0)}Zt.prototype._$fP=function(){var t,i,e,r=this._$ST();if((128&r)==0)return 255&r;if((128&(t=this._$ST()))==0)return(127&r)<<7|127&t;if((128&(i=this._$ST()))==0)return(127&r)<<14|(127&t)<<7|255&i;if((128&(e=this._$ST()))==0)return(127&r)<<21|(127&t)<<14|(127&i)<<7|255&e;throw new $i("_$L _$0P  _")},Zt.prototype.getFormatVersion=function(){return this._$S2},Zt.prototype._$gr=function(t){this._$S2=t},Zt.prototype._$3L=function(){return this._$fP()},Zt.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},Zt.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},Zt.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},Zt.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},Zt.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},Zt.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new $i("_$L _$q read long")},Zt.prototype._$po=function(){return this._$zT(),this._$T.getInt8(this._$F++)!=0};var Gi=!0;Zt.prototype._$bT=function(){this._$zT();var t=this._$3L(),i=null;if(Gi)try{var e=new ArrayBuffer(2*t);i=new Uint16Array(e);for(var r=0;r<t;++r)i[r]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,i)}catch(o){Gi=!1}try{var n=new Array;if(i==null)for(r=0;r<t;++r)n[r]=this._$T.getUint8(this._$F++);else for(r=0;r<t;++r)n[r]=i[r];return String.fromCharCode.apply(null,n)}catch(o){console.log("read utf8 / _$rT _$L0 !! : "+o)}},Zt.prototype._$cS=function(){this._$zT();for(var t=this._$3L(),i=new Int32Array(t),e=0;e<t;e++)i[e]=this._$T.getInt32(this._$F),this._$F+=4;return i},Zt.prototype._$Tb=function(){this._$zT();for(var t=this._$3L(),i=new Float32Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat32(this._$F),this._$F+=4;return i},Zt.prototype._$5b=function(){this._$zT();for(var t=this._$3L(),i=new Float64Array(t),e=0;e<t;e++)i[e]=this._$T.getFloat64(this._$F),this._$F+=8;return i},Zt.prototype._$nP=function(){return this._$Jb(-1)},Zt.prototype._$Jb=function(t){if(this._$zT(),t<0&&(t=this._$3L()),t==Tt._$7P){var i=this._$6L();if(0<=i&&i<this._$Ko.length)return this._$Ko[i];throw new $i("_$sL _$4i @_$m0")}var e=this._$4b(t);return this._$Ko.push(e),e},Zt.prototype._$4b=function(t){if(t==0)return null;if(t==50){var i=this._$bT();return n=q.getID(i)}if(t==51)return i=this._$bT(),n=Ht.getID(i);if(t==134)return i=this._$bT(),n=x.getID(i);if(t==60)return i=this._$bT(),n=d.getID(i);if(t>=48){var e=Tt._$9o(t);return e!=null?(e._$F0(this),e):null}switch(t){case 1:return this._$bT();case 10:return new function(){v||(this.color=null)}(this._$6L(),!0);case 11:return new E(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new E(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new z(this._$mP(),this._$mP());case 14:return new z(this._$_T(),this._$_T());case 15:for(var r=this._$3L(),n=new Array(r),o=0;o<r;o++)n[o]=this._$nP();return n;case 17:return n=new Y(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());case 21:return new P(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new Ni(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new $i("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+t);default:throw new $i("_$6 _$q : _$nP() NO _$i : "+t)}},Zt.prototype._$8L=function(){return this._$hL==0?this._$v0=this._$ST():this._$hL==8&&(this._$v0=this._$ST(),this._$hL=0),(this._$v0>>7-this._$hL++&1)==1},Zt.prototype._$zT=function(){this._$hL!=0&&(this._$hL=0)};function Wt(){}Wt._$2S=Math.PI/180,Wt._$bS=Math.PI/180,Wt._$wS=180/Math.PI,Wt._$NS=180/Math.PI,Wt.PI_F=Math.PI,Wt._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],Wt._$92=function(t,i){var e=Math.atan2(t[1],t[0]),r=Math.atan2(i[1],i[0]);return Wt._$tS(e,r)},Wt._$tS=function(t,i){for(var e=t-i;e<-Math.PI;)e+=2*Math.PI;for(;e>Math.PI;)e-=2*Math.PI;return e},Wt._$9=function(t){return Math.sin(t)},Wt.fcos=function(t){return Math.cos(t)};function Mi(t){v||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=t)}Mi.prototype._$u2=function(){return this._$IS[0]},Mi.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},Mi.prototype._$GT=function(){return this._$e0};function Dt(){}Dt._$W2=0,Dt.SYSTEM_INFO=null,Dt.USER_AGENT=navigator.userAgent,Dt.isIPhone=function(){return Dt.SYSTEM_INFO||Dt.setup(),Dt.SYSTEM_INFO._isIPhone},Dt.isIOS=function(){return Dt.SYSTEM_INFO||Dt.setup(),Dt.SYSTEM_INFO._isIPhone||Dt.SYSTEM_INFO._isIPad},Dt.isAndroid=function(){return Dt.SYSTEM_INFO||Dt.setup(),Dt.SYSTEM_INFO._isAndroid},Dt.getOSVersion=function(){return Dt.SYSTEM_INFO||Dt.setup(),Dt.SYSTEM_INFO.version},Dt.getOS=function(){return Dt.SYSTEM_INFO||Dt.setup(),Dt.SYSTEM_INFO._isIPhone||Dt.SYSTEM_INFO._isIPad?"iOS":Dt.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},Dt.setup=function(){var t=Dt.USER_AGENT;function i(n,o){for(var h=n.substring(o).split(/[ _,;\.]/),_=0,a=0;a<=2&&!isNaN(h[a]);a++){var s=parseInt(h[a]);if(s<0||s>999){T._$li("err : "+s+" @UtHtml5.setup()"),_=0;break}_+=s*Math.pow(1e3,2-a)}return _}var e,r=Dt.SYSTEM_INFO={userAgent:t};if((e=t.indexOf("iPhone OS "))>=0)r.os="iPhone",r._isIPhone=!0,r.version=i(t,e+"iPhone OS ".length);else if((e=t.indexOf("iPad"))>=0){if((e=t.indexOf("CPU OS"))<0)return void T._$li(" err : "+t+" @UtHtml5.setup()");r.os="iPad",r._isIPad=!0,r.version=i(t,e+"CPU OS ".length)}else(e=t.indexOf("Android"))>=0?(r.os="Android",r._isAndroid=!0,r.version=i(t,e+"Android ".length)):(r.os="-",r.version=-1)},S.init(),v=!1,M.UtSystem=J,M.UtDebug=T,M.LDTransform=ni,M.LDGL=Ot,M.Live2D=S,M.Live2DModelWebGL=Vt,M.Live2DModelJS=Qt,M.Live2DMotion=Bt,M.MotionQueueManager=Ti,M.PhysicsHair=N,M.AMotion=F,M.PartsDataID=x,M.DrawDataID=q,M.BaseDataID=Ht,M.ParamID=d}).call(M,j(13))},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.L2DBaseModel=M.L2DExpressionMotion=M.L2DExpressionParam=M.L2DEyeBlink=M.EYE_STATE=M.L2DMatrix44=M.L2DModelMatrix=M.L2DMotionManager=M.L2DPhysics=M.L2DPartsParam=M.L2DPose=M.L2DViewMatrix=M.Live2DFramework=M.L2DTargetPoint=void 0;var A=j(2);function v(){this.live2DModel=null,this.modelMatrix=null,this.eyeBlink=null,this.physics=null,this.pose=null,this.debugMode=!1,this.initialized=!1,this.updating=!1,this.alpha=1,this.accAlpha=0,this.lipSync=!1,this.lipSyncValue=0,this.accelX=0,this.accelY=0,this.accelZ=0,this.dragX=0,this.dragY=0,this.startTimeMSec=null,this.mainMotionManager=new d,this.expressionManager=new d,this.motions={},this.expressions={},this.isTexLoaded=!1}var l=0;v.prototype.getModelMatrix=function(){return this.modelMatrix},v.prototype.setAlpha=function($){$>.999&&($=1),$<.001&&($=0),this.alpha=$},v.prototype.getAlpha=function(){return this.alpha},v.prototype.isInitialized=function(){return this.initialized},v.prototype.setInitialized=function($){this.initialized=$},v.prototype.isUpdating=function(){return this.updating},v.prototype.setUpdating=function($){this.updating=$},v.prototype.getLive2DModel=function(){return this.live2DModel},v.prototype.setLipSync=function($){this.lipSync=$},v.prototype.setLipSyncValue=function($){this.lipSyncValue=$},v.prototype.setAccel=function($,g,b){this.accelX=$,this.accelY=g,this.accelZ=b},v.prototype.setDrag=function($,g){this.dragX=$,this.dragY=g},v.prototype.getMainMotionManager=function(){return this.mainMotionManager},v.prototype.getExpressionManager=function(){return this.expressionManager},v.prototype.loadModelData=function($,g){var b=bt.getPlatformManager();this.debugMode&&b.log("Load model : "+$);var E=this;b.loadLive2DModel($,function(G){E.live2DModel=G,E.live2DModel.saveParam(),A.Live2D.getError()==0?(E.modelMatrix=new x(E.live2DModel.getCanvasWidth(),E.live2DModel.getCanvasHeight()),E.modelMatrix.setWidth(2),E.modelMatrix.setCenterPosition(0,0),g(E.live2DModel)):console.error("Error : Failed to loadModelData().")})},v.prototype.loadTexture=function($,g,b){l++;var E=bt.getPlatformManager();this.debugMode&&E.log("Load Texture : "+g);var G=this;E.loadTexture(this.live2DModel,$,g,function(){--l==0&&(G.isTexLoaded=!0),typeof b=="function"&&b()})},v.prototype.loadMotion=function($,g,b){var E=bt.getPlatformManager();this.debugMode&&E.log("Load Motion : "+g);var G=null,z=this;E.loadBytes(g,function(B){G=A.Live2DMotion.loadMotion(B),$!=null&&(z.motions[$]=G),b(G)})},v.prototype.loadExpression=function($,g,b){var E=bt.getPlatformManager();this.debugMode&&E.log("Load Expression : "+g);var G=this;E.loadBytes(g,function(z){$!=null&&(G.expressions[$]=w.loadJson(z)),typeof b=="function"&&b()})},v.prototype.loadPose=function($,g){var b=bt.getPlatformManager();this.debugMode&&b.log("Load Pose : "+$);var E=this;try{b.loadBytes($,function(G){E.pose=N.load(G),typeof g=="function"&&g()})}catch(G){console.warn(G)}},v.prototype.loadPhysics=function($){var g=bt.getPlatformManager();this.debugMode&&g.log("Load Physics : "+$);var b=this;try{g.loadBytes($,function(E){b.physics=X.load(E)})}catch(E){console.warn(E)}},v.prototype.hitTestSimple=function($,g,b){if(this.live2DModel===null)return!1;var E=this.live2DModel.getDrawDataIndex($);if(E<0)return!1;for(var G=this.live2DModel.getTransformedPoints(E),z=this.live2DModel.getCanvasWidth(),B=0,tt=this.live2DModel.getCanvasHeight(),Et=0,it=0;it<G.length;it+=2){var J=G[it],mt=G[it+1];J<z&&(z=J),J>B&&(B=J),mt<tt&&(tt=mt),mt>Et&&(Et=mt)}var _t=this.modelMatrix.invertTransformX(g),D=this.modelMatrix.invertTransformY(b);return z<=_t&&_t<=B&&tt<=D&&D<=Et};function w(){A.AMotion.prototype.constructor.call(this),this.paramList=new Array}w.prototype=new A.AMotion,w.EXPRESSION_DEFAULT="DEFAULT",w.TYPE_SET=0,w.TYPE_ADD=1,w.TYPE_MULT=2,w.loadJson=function($){var g=new w,b=bt.getPlatformManager().jsonParseFromBytes($);if(g.setFadeIn(parseInt(b.fade_in)>0?parseInt(b.fade_in):1e3),g.setFadeOut(parseInt(b.fade_out)>0?parseInt(b.fade_out):1e3),b.params==null)return g;var E=b.params,G=E.length;g.paramList=[];for(var z=0;z<G;z++){var B=E[z],tt=B.id.toString(),Et=parseFloat(B.val),it=w.TYPE_ADD,J=B.calc!=null?B.calc.toString():"add";if((it=J==="add"?w.TYPE_ADD:J==="mult"?w.TYPE_MULT:J==="set"?w.TYPE_SET:w.TYPE_ADD)==w.TYPE_ADD)Et-=mt=B.def==null?0:parseFloat(B.def);else if(it==w.TYPE_MULT){var mt;(mt=B.def==null?1:parseFloat(B.def))==0&&(mt=1),Et/=mt}var _t=new W;_t.id=tt,_t.type=it,_t.value=Et,g.paramList.push(_t)}return g},w.prototype.updateParamExe=function($,g,b,E){for(var G=this.paramList.length-1;G>=0;--G){var z=this.paramList[G];z.type==w.TYPE_ADD?$.addToParamFloat(z.id,z.value,b):z.type==w.TYPE_MULT?$.multParamFloat(z.id,z.value,b):z.type==w.TYPE_SET&&$.setParamFloat(z.id,z.value,b)}};function W(){this.id="",this.type=-1,this.value=null}function F(){this.nextBlinkTime=null,this.stateStartTime=null,this.blinkIntervalMsec=null,this.eyeState=T.STATE_FIRST,this.blinkIntervalMsec=4e3,this.closingMotionMsec=100,this.closedMotionMsec=50,this.openingMotionMsec=150,this.closeIfZero=!0,this.eyeID_L="PARAM_EYE_L_OPEN",this.eyeID_R="PARAM_EYE_R_OPEN"}F.prototype.calcNextBlink=function(){return A.UtSystem.getUserTimeMSec()+Math.random()*(2*this.blinkIntervalMsec-1)},F.prototype.setInterval=function($){this.blinkIntervalMsec=$},F.prototype.setEyeMotion=function($,g,b){this.closingMotionMsec=$,this.closedMotionMsec=g,this.openingMotionMsec=b},F.prototype.updateParam=function($){var g,b=A.UtSystem.getUserTimeMSec(),E=0;switch(this.eyeState){case T.STATE_CLOSING:(E=(b-this.stateStartTime)/this.closingMotionMsec)>=1&&(E=1,this.eyeState=T.STATE_CLOSED,this.stateStartTime=b),g=1-E;break;case T.STATE_CLOSED:(E=(b-this.stateStartTime)/this.closedMotionMsec)>=1&&(this.eyeState=T.STATE_OPENING,this.stateStartTime=b),g=0;break;case T.STATE_OPENING:(E=(b-this.stateStartTime)/this.openingMotionMsec)>=1&&(E=1,this.eyeState=T.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink()),g=E;break;case T.STATE_INTERVAL:this.nextBlinkTime<b&&(this.eyeState=T.STATE_CLOSING,this.stateStartTime=b),g=1;break;case T.STATE_FIRST:default:this.eyeState=T.STATE_INTERVAL,this.nextBlinkTime=this.calcNextBlink(),g=1}this.closeIfZero||(g=-g),$.setParamFloat(this.eyeID_L,g),$.setParamFloat(this.eyeID_R,g)};var T=function(){};T.STATE_FIRST="STATE_FIRST",T.STATE_INTERVAL="STATE_INTERVAL",T.STATE_CLOSING="STATE_CLOSING",T.STATE_CLOSED="STATE_CLOSED",T.STATE_OPENING="STATE_OPENING";function P(){this.tr=new Float32Array(16),this.identity()}P.mul=function($,g,b){var E,G,z,B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<4;E++)for(G=0;G<4;G++)for(z=0;z<4;z++)B[E+4*G]+=$[E+4*z]*g[z+4*G];for(E=0;E<16;E++)b[E]=B[E]},P.prototype.identity=function(){for(var $=0;$<16;$++)this.tr[$]=$%5==0?1:0},P.prototype.getArray=function(){return this.tr},P.prototype.getCopyMatrix=function(){return new Float32Array(this.tr)},P.prototype.setMatrix=function($){if(this.tr!=null&&this.tr.length==this.tr.length)for(var g=0;g<16;g++)this.tr[g]=$[g]},P.prototype.getScaleX=function(){return this.tr[0]},P.prototype.getScaleY=function(){return this.tr[5]},P.prototype.transformX=function($){return this.tr[0]*$+this.tr[12]},P.prototype.transformY=function($){return this.tr[5]*$+this.tr[13]},P.prototype.invertTransformX=function($){return($-this.tr[12])/this.tr[0]},P.prototype.invertTransformY=function($){return($-this.tr[13])/this.tr[5]},P.prototype.multTranslate=function($,g){var b=[1,0,0,0,0,1,0,0,0,0,1,0,$,g,0,1];P.mul(b,this.tr,this.tr)},P.prototype.translate=function($,g){this.tr[12]=$,this.tr[13]=g},P.prototype.translateX=function($){this.tr[12]=$},P.prototype.translateY=function($){this.tr[13]=$},P.prototype.multScale=function($,g){var b=[$,0,0,0,0,g,0,0,0,0,1,0,0,0,0,1];P.mul(b,this.tr,this.tr)},P.prototype.scale=function($,g){this.tr[0]=$,this.tr[5]=g};function x($,g){P.prototype.constructor.call(this),this.width=$,this.height=g}x.prototype=new P,x.prototype.setPosition=function($,g){this.translate($,g)},x.prototype.setCenterPosition=function($,g){var b=this.width*this.getScaleX(),E=this.height*this.getScaleY();this.translate($-b/2,g-E/2)},x.prototype.top=function($){this.setY($)},x.prototype.bottom=function($){var g=this.height*this.getScaleY();this.translateY($-g)},x.prototype.left=function($){this.setX($)},x.prototype.right=function($){var g=this.width*this.getScaleX();this.translateX($-g)},x.prototype.centerX=function($){var g=this.width*this.getScaleX();this.translateX($-g/2)},x.prototype.centerY=function($){var g=this.height*this.getScaleY();this.translateY($-g/2)},x.prototype.setX=function($){this.translateX($)},x.prototype.setY=function($){this.translateY($)},x.prototype.setHeight=function($){var g=$/this.height,b=-g;this.scale(g,b)},x.prototype.setWidth=function($){var g=$/this.width,b=-g;this.scale(g,b)};function d(){A.MotionQueueManager.prototype.constructor.call(this),this.currentPriority=null,this.reservePriority=null,this.super=A.MotionQueueManager.prototype}d.prototype=new A.MotionQueueManager,d.prototype.getCurrentPriority=function(){return this.currentPriority},d.prototype.getReservePriority=function(){return this.reservePriority},d.prototype.reserveMotion=function($){return!(this.reservePriority>=$)&&!(this.currentPriority>=$)&&(this.reservePriority=$,!0)},d.prototype.setReservePriority=function($){this.reservePriority=$},d.prototype.updateParam=function($){var g=A.MotionQueueManager.prototype.updateParam.call(this,$);return this.isFinished()&&(this.currentPriority=0),g},d.prototype.startMotionPrio=function($,g){return g==this.reservePriority&&(this.reservePriority=0),this.currentPriority=g,this.startMotion($,!1)};function X(){this.physicsList=new Array,this.startTimeMSec=A.UtSystem.getUserTimeMSec()}X.load=function($){for(var g=new X,b=bt.getPlatformManager().jsonParseFromBytes($).physics_hair,E=b.length,G=0;G<E;G++){var z=b[G],B=new A.PhysicsHair,tt=z.setup,Et=parseFloat(tt.length),it=parseFloat(tt.regist),J=parseFloat(tt.mass);B.setup(Et,it,J);for(var mt=z.src,_t=mt.length,D=0;D<_t;D++){var et=mt[D],q=et.id,Y=A.PhysicsHair.Src.SRC_TO_X;(Tt=et.ptype)==="x"?Y=A.PhysicsHair.Src.SRC_TO_X:Tt==="y"?Y=A.PhysicsHair.Src.SRC_TO_Y:Tt==="angle"?Y=A.PhysicsHair.Src.SRC_TO_G_ANGLE:A.UtDebug.error("live2d","Invalid parameter:PhysicsHair.Src");var wt=parseFloat(et.scale),kt=parseFloat(et.weight);B.addSrcParam(Y,q,wt,kt)}var Z=z.targets,$t=Z.length;for(D=0;D<$t;D++){var Tt,C=Z[D];q=C.id,Y=A.PhysicsHair.Target.TARGET_FROM_ANGLE,(Tt=C.ptype)==="angle"?Y=A.PhysicsHair.Target.TARGET_FROM_ANGLE:Tt==="angle_v"?Y=A.PhysicsHair.Target.TARGET_FROM_ANGLE_V:A.UtDebug.error("live2d","Invalid parameter:PhysicsHair.Target"),wt=parseFloat(C.scale),kt=parseFloat(C.weight),B.addTargetParam(Y,q,wt,kt)}g.physicsList.push(B)}return g},X.prototype.updateParam=function($){for(var g=A.UtSystem.getUserTimeMSec()-this.startTimeMSec,b=0;b<this.physicsList.length;b++)this.physicsList[b].update($,g)};function N(){this.lastTime=0,this.lastModel=null,this.partsGroups=new Array}N.load=function($){for(var g=new N,b=bt.getPlatformManager().jsonParseFromBytes($).parts_visible,E=b.length,G=0;G<E;G++){for(var z=b[G].group,B=z.length,tt=new Array,Et=0;Et<B;Et++){var it=z[Et],J=new St(it.id);if(tt[Et]=J,it.link!=null){var mt=it.link,_t=mt.length;J.link=new Array;for(var D=0;D<_t;D++){var et=new St(mt[D]);J.link.push(et)}}}g.partsGroups.push(tt)}return g},N.prototype.updateParam=function($){if($!=null){$!=this.lastModel&&this.initParam($),this.lastModel=$;var g=A.UtSystem.getUserTimeMSec(),b=this.lastTime==0?0:(g-this.lastTime)/1e3;this.lastTime=g,b<0&&(b=0);for(var E=0;E<this.partsGroups.length;E++)this.normalizePartsOpacityGroup($,this.partsGroups[E],b),this.copyOpacityOtherParts($,this.partsGroups[E])}},N.prototype.initParam=function($){if($!=null)for(var g=0;g<this.partsGroups.length;g++)for(var b=this.partsGroups[g],E=0;E<b.length;E++){b[E].initIndex($);var G=b[E].partsIndex,z=b[E].paramIndex;if(!(G<0)){var B=$.getParamFloat(z)!=0;if($.setPartsOpacity(G,B?1:0),$.setParamFloat(z,B?1:0),b[E].link!=null)for(var tt=0;tt<b[E].link.length;tt++)b[E].link[tt].initIndex($)}}},N.prototype.normalizePartsOpacityGroup=function($,g,b){for(var E=-1,G=1,z=0;z<g.length;z++){var B=g[z].partsIndex,tt=g[z].paramIndex;if(!(B<0)&&$.getParamFloat(tt)!=0){if(E>=0)break;E=z,G=$.getPartsOpacity(B),(G+=b/.5)>1&&(G=1)}}for(E<0&&(E=0,G=1),z=0;z<g.length;z++)if(!((B=g[z].partsIndex)<0))if(E==z)$.setPartsOpacity(B,G);else{var Et,it=$.getPartsOpacity(B);(1-(Et=G<.5?-.5*G/.5+1:.5*(1-G)/.5))*(1-G)>.15&&(Et=1-.15/(1-G)),it>Et&&(it=Et),$.setPartsOpacity(B,it)}},N.prototype.copyOpacityOtherParts=function($,g){for(var b=0;b<g.length;b++){var E=g[b];if(E.link!=null&&!(E.partsIndex<0))for(var G=$.getPartsOpacity(E.partsIndex),z=0;z<E.link.length;z++){var B=E.link[z];B.partsIndex<0||$.setPartsOpacity(B.partsIndex,G)}}};function St($){this.paramIndex=-1,this.partsIndex=-1,this.link=null,this.id=$}St.prototype.initIndex=function($){this.paramIndex=$.getParamIndex("VISIBLE:"+this.id),this.partsIndex=$.getPartsDataIndex(A.PartsDataID.getID(this.id)),$.setParamFloat(this.paramIndex,1)};function Ft(){this.EPSILON=.01,this.faceTargetX=0,this.faceTargetY=0,this.faceX=0,this.faceY=0,this.faceVX=0,this.faceVY=0,this.lastTimeSec=0}Ft.FRAME_RATE=60,Ft.prototype.setPoint=function($,g){this.faceTargetX=$,this.faceTargetY=g},Ft.prototype.getX=function(){return this.faceX},Ft.prototype.getY=function(){return this.faceY},Ft.prototype.update=function(){var $=40/7.5/Ft.FRAME_RATE;if(this.lastTimeSec!=0){var g=A.UtSystem.getUserTimeMSec(),b=(g-this.lastTimeSec)*Ft.FRAME_RATE/1e3;this.lastTimeSec=g;var E=b*$/(.15*Ft.FRAME_RATE),G=this.faceTargetX-this.faceX,z=this.faceTargetY-this.faceY;if(!(Math.abs(G)<=this.EPSILON&&Math.abs(z)<=this.EPSILON)){var B=Math.sqrt(G*G+z*z),tt=$*z/B,Et=$*G/B-this.faceVX,it=tt-this.faceVY,J=Math.sqrt(Et*Et+it*it);(J<-E||J>E)&&(Et*=E/J,it*=E/J,J=E),this.faceVX+=Et,this.faceVY+=it;var mt=.5*(Math.sqrt(E*E+16*E*B-8*E*B)-E),_t=Math.sqrt(this.faceVX*this.faceVX+this.faceVY*this.faceVY);_t>mt&&(this.faceVX*=mt/_t,this.faceVY*=mt/_t),this.faceX+=this.faceVX,this.faceY+=this.faceVY}}else this.lastTimeSec=A.UtSystem.getUserTimeMSec()};function dt(){P.prototype.constructor.call(this),this.screenLeft=null,this.screenRight=null,this.screenTop=null,this.screenBottom=null,this.maxLeft=null,this.maxRight=null,this.maxTop=null,this.maxBottom=null}dt.prototype=new P,dt.prototype.adjustTranslate=function($,g){this.tr[0]*this.maxLeft+(this.tr[12]+$)>this.screenLeft&&($=this.screenLeft-this.tr[0]*this.maxLeft-this.tr[12]),this.tr[0]*this.maxRight+(this.tr[12]+$)<this.screenRight&&($=this.screenRight-this.tr[0]*this.maxRight-this.tr[12]),this.tr[5]*this.maxTop+(this.tr[13]+g)<this.screenTop&&(g=this.screenTop-this.tr[5]*this.maxTop-this.tr[13]),this.tr[5]*this.maxBottom+(this.tr[13]+g)>this.screenBottom&&(g=this.screenBottom-this.tr[5]*this.maxBottom-this.tr[13]);var b=[1,0,0,0,0,1,0,0,0,0,1,0,$,g,0,1];P.mul(b,this.tr,this.tr)},dt.prototype.adjustScale=function($,g,b){this.tr[0];var E=[1,0,0,0,0,1,0,0,0,0,1,0,$,g,0,1],G=[b,0,0,0,0,b,0,0,0,0,1,0,0,0,0,1],z=[1,0,0,0,0,1,0,0,0,0,1,0,-$,-g,0,1];P.mul(z,this.tr,this.tr),P.mul(G,this.tr,this.tr),P.mul(E,this.tr,this.tr)},dt.prototype.setScreenRect=function($,g,b,E){this.screenLeft=$,this.screenRight=g,this.screenTop=E,this.screenBottom=b},dt.prototype.setMaxScreenRect=function($,g,b,E){this.maxLeft=$,this.maxRight=g,this.maxTop=E,this.maxBottom=b},dt.prototype.getScreenLeft=function(){return this.screenLeft},dt.prototype.getScreenRight=function(){return this.screenRight},dt.prototype.getScreenBottom=function(){return this.screenBottom},dt.prototype.getScreenTop=function(){return this.screenTop},dt.prototype.getMaxLeft=function(){return this.maxLeft},dt.prototype.getMaxRight=function(){return this.maxRight},dt.prototype.getMaxBottom=function(){return this.maxBottom},dt.prototype.getMaxTop=function(){return this.maxTop};function bt(){}bt.platformManager=null,bt.getPlatformManager=function(){return bt.platformManager},bt.setPlatformManager=function($){bt.platformManager=$},M.L2DTargetPoint=Ft,M.Live2DFramework=bt,M.L2DViewMatrix=dt,M.L2DPose=N,M.L2DPartsParam=St,M.L2DPhysics=X,M.L2DMotionManager=d,M.L2DModelMatrix=x,M.L2DMatrix44=P,M.EYE_STATE=T,M.L2DEyeBlink=F,M.L2DExpressionParam=W,M.L2DExpressionMotion=w,M.L2DBaseModel=v},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.cDefine={VIEW_LOGICAL_LEFT:-1,VIEW_LOGICAL_RIGHT:1,VIEW_LOGICAL_MAX_LEFT:-2,VIEW_LOGICAL_MAX_RIGHT:2,VIEW_LOGICAL_MAX_BOTTOM:-2,VIEW_LOGICAL_MAX_TOP:2,PRIORITY_NONE:0,PRIORITY_IDLE:1,PRIORITY_NORMAL:2,PRIORITY_FORCE:3,MOTION_GROUP_IDLE:"idle",MOTION_GROUP_TAP_BODY:"tap_body",MOTION_GROUP_FLICK_HEAD:"flick_head",MOTION_GROUP_PINCH_IN:"pinch_in",MOTION_GROUP_PINCH_OUT:"pinch_out",MOTION_GROUP_SHAKE:"shake",HIT_AREA_HEAD:"head",HIT_AREA_BODY:"body"}},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},v=window.device,l={},w=[];window.device=l;var W=window.document.documentElement,F=window.navigator.userAgent.toLowerCase(),T=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];l.macos=function(){return P("mac")},l.ios=function(){return l.iphone()||l.ipod()||l.ipad()},l.iphone=function(){return!l.windows()&&P("iphone")},l.ipod=function(){return P("ipod")},l.ipad=function(){return P("ipad")},l.android=function(){return!l.windows()&&P("android")},l.androidPhone=function(){return l.android()&&P("mobile")},l.androidTablet=function(){return l.android()&&!P("mobile")},l.blackberry=function(){return P("blackberry")||P("bb10")||P("rim")},l.blackberryPhone=function(){return l.blackberry()&&!P("tablet")},l.blackberryTablet=function(){return l.blackberry()&&P("tablet")},l.windows=function(){return P("windows")},l.windowsPhone=function(){return l.windows()&&P("phone")},l.windowsTablet=function(){return l.windows()&&P("touch")&&!l.windowsPhone()},l.fxos=function(){return(P("(mobile")||P("(tablet"))&&P(" rv:")},l.fxosPhone=function(){return l.fxos()&&P("mobile")},l.fxosTablet=function(){return l.fxos()&&P("tablet")},l.meego=function(){return P("meego")},l.cordova=function(){return window.cordova&&location.protocol==="file:"},l.nodeWebkit=function(){return A(window.process)==="object"},l.mobile=function(){return l.androidPhone()||l.iphone()||l.ipod()||l.windowsPhone()||l.blackberryPhone()||l.fxosPhone()||l.meego()},l.tablet=function(){return l.ipad()||l.androidTablet()||l.blackberryTablet()||l.windowsTablet()||l.fxosTablet()},l.desktop=function(){return!l.tablet()&&!l.mobile()},l.television=function(){for(var $=0;$<T.length;){if(P(T[$]))return!0;$++}return!1},l.portrait=function(){return window.innerHeight/window.innerWidth>1},l.landscape=function(){return window.innerHeight/window.innerWidth<1},l.noConflict=function(){return window.device=v,this};function P($){return F.indexOf($)!==-1}function x($){return W.className.match(new RegExp($,"i"))}function d($){var g=null;x($)||(g=W.className.replace(/^\s+|\s+$/g,""),W.className=g+" "+$)}function X($){x($)&&(W.className=W.className.replace(" "+$,""))}l.ios()?l.ipad()?d("ios ipad tablet"):l.iphone()?d("ios iphone mobile"):l.ipod()&&d("ios ipod mobile"):l.macos()?d("macos desktop"):l.android()?l.androidTablet()?d("android tablet"):d("android mobile"):l.blackberry()?l.blackberryTablet()?d("blackberry tablet"):d("blackberry mobile"):l.windows()?l.windowsTablet()?d("windows tablet"):l.windowsPhone()?d("windows mobile"):d("windows desktop"):l.fxos()?l.fxosTablet()?d("fxos tablet"):d("fxos mobile"):l.meego()?d("meego mobile"):l.nodeWebkit()?d("node-webkit"):l.television()?d("television"):l.desktop()&&d("desktop"),l.cordova()&&d("cordova");function N(){l.landscape()?(X("portrait"),d("landscape"),St("landscape")):(X("landscape"),d("portrait"),St("portrait")),bt()}function St($){for(var g in w)w[g]($)}l.onChangeOrientation=function($){typeof $=="function"&&w.push($)};var Ft="resize";Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(Ft="onorientationchange"),window.addEventListener?window.addEventListener(Ft,N,!1):window.attachEvent?window.attachEvent(Ft,N):window[Ft]=N,N();function dt($){for(var g=0;g<$.length;g++)if(l[$[g]]())return $[g];return"unknown"}l.type=dt(["mobile","tablet","desktop"]),l.os=dt(["ios","iphone","ipad","ipod","android","blackberry","windows","fxos","meego","television"]);function bt(){l.orientation=dt(["portrait","landscape"])}bt(),M.default=l},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.currCanvas=M.currWebGL=M.createElement=void 0;var A=j(1),v=j(0),l=j(12),w=void 0,W=void 0;M.createElement=function(){var F=document.getElementById(A.config.name.div);F!==null&&document.body.removeChild(F);var T=document.createElement("div");T.id=A.config.name.div,T.className="live2d-widget-container",T.style.setProperty("position","fixed"),T.style.setProperty(A.config.display.position,A.config.display.hOffset+"px"),T.style.setProperty("bottom",A.config.display.vOffset+"px"),T.style.setProperty("width",A.config.display.width+"px"),T.style.setProperty("height",A.config.display.height+"px"),T.style.setProperty("z-index",99999),T.style.setProperty("opacity",A.config.react.opacity),T.style.setProperty("pointer-events","none"),document.body.appendChild(T),v.L2Dwidget.emit("create-container",T),A.config.dialog.enable&&(0,l.createDialogElement)(T);var P=document.createElement("canvas");P.setAttribute("id",A.config.name.canvas),P.setAttribute("width",A.config.display.width*A.config.display.superSample),P.setAttribute("height",A.config.display.height*A.config.display.superSample),P.style.setProperty("position","absolute"),P.style.setProperty("left","0px"),P.style.setProperty("top","0px"),P.style.setProperty("width",A.config.display.width+"px"),P.style.setProperty("height",A.config.display.height+"px"),A.config.dev.border&&P.style.setProperty("border","dashed 1px #CCC"),T.appendChild(P),M.currCanvas=W=document.getElementById(A.config.name.canvas),v.L2Dwidget.emit("create-canvas",P),function(){for(var x=["webgl2","webgl","experimental-webgl2","experimental-webgl","webkit-3d","moz-webgl"],d=0;d<x.length;d++)try{var X=W.getContext(x[d],{alpha:!0,antialias:!0,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!1});X&&(M.currWebGL=w=X)}catch(N){}w||(console.error("Live2D widgets: Failed to create WebGL context."),window.WebGLRenderingContext||console.error("Your browser may not support WebGL, check https://get.webgl.org/ for futher information."))}()},M.currWebGL=w,M.currCanvas=W},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.MatrixStack=A;function A(){}A.matrixStack=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A.depth=0,A.currentMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A.tmp=new Array(16),A.reset=function(){this.depth=0},A.loadIdentity=function(){for(var v=0;v<16;v++)this.currentMatrix[v]=v%5==0?1:0},A.push=function(){var v=16*(this.depth+1);this.matrixStack.length<v+16&&(this.matrixStack.length=v+16);for(var l=0;l<16;l++)this.matrixStack[v+l]=this.currentMatrix[l];this.depth++},A.pop=function(){this.depth--,this.depth<0&&(myError("Invalid matrix stack."),this.depth=0);for(var v=16*this.depth,l=0;l<16;l++)this.currentMatrix[l]=this.matrixStack[v+l]},A.getMatrix=function(){return this.currentMatrix},A.multMatrix=function(v){var l,w,W;for(l=0;l<16;l++)this.tmp[l]=0;for(l=0;l<4;l++)for(w=0;w<4;w++)for(W=0;W<4;W++)this.tmp[l+4*w]+=this.currentMatrix[l+4*W]*v[W+4*w];for(l=0;l<16;l++)this.currentMatrix[l]=this.tmp[l]}},function(Gt,M,j){Gt.exports=j(0)},function(Gt,M,j){"use strict";Gt.exports={model:{jsonPath:"https://unpkg.com/live2d-widget-model-shizuku@latest/assets/shizuku.model.json",scale:1},display:{superSample:2,width:200,height:400,position:"right",hOffset:0,vOffset:-20},mobile:{show:!0,scale:.8,motion:!0},name:{canvas:"live2dcanvas",div:"live2d-widget"},react:{opacity:1},dev:{border:!1},dialog:{enable:!1,hitokoto:!1}}},function(Gt,M,j){"use strict";var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v};Gt.exports=function v(l,w){l=l||{};function W(x,d){for(var X in d)if(d.hasOwnProperty(X)){var N=d[X];if(X==="__proto__")continue;var St=x[X];St==null?x[X]=N:(St===void 0?"undefined":A(St))==="object"&&St!==null&&(N===void 0?"undefined":A(N))==="object"&&N!==null&&v(St,N)}}for(var F=arguments.length,T=0;T<F;){var P=arguments[T++];P&&W(l,P)}return l}},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.captureFrame=M.theRealInit=void 0;var A,v=j(1),l=j(6),w=j(2),W=j(3),F=j(14),T=j(7),P=j(4),x=j(5),d=(A=x,A&&A.__esModule?A:{default:A}),X=j(0),N=null,St=void 0,Ft=!1,dt=null,bt=null,$=null,g=null,b=!1,E=.5;function G(D,et,q){if(et.x<q.left+q.width&&et.y<q.top+q.height&&et.x>q.left&&et.y>q.top)return et;var Y=D.x-et.x,wt=D.y-et.y;function kt(Jt,Li){return 180*Math.acos((_i={x:0,y:1},fi=function(Ot,ci){var Kt=Math.sqrt(Ot*Ot+ci*ci);return{x:Ot/Kt,y:ci/Kt}}(Jt,Li),_i.x*fi.x+_i.y*fi.y))/Math.PI;var _i,fi}var Z=kt(Y,wt);et.x<D.x&&(Z=360-Z);var $t=360-kt(q.left-D.x,-1*(q.top-D.y)),Tt=360-kt(q.left-D.x,-1*(q.top+q.height-D.y)),C=kt(q.left+q.width-D.x,-1*(q.top-D.y)),li=kt(q.left+q.width-D.x,-1*(q.top+q.height-D.y)),oi=wt/Y,ti={};if(Z<C){var Lt=q.top-D.y,Nt=Lt/oi;ti={y:D.y+Lt,x:D.x+Nt}}else if(Z<li){var xi=q.left+q.width-D.x,gt=xi*oi;ti={y:D.y+gt,x:D.x+xi}}else if(Z<Tt){var pi=q.top+q.height-D.y,Qt=pi/oi;ti={y:D.y+pi,x:D.x+Qt}}else if(Z<$t){var Bt=D.x-q.left,ai=Bt*oi;ti={y:D.y-ai,x:D.x-Bt}}else{var ii=q.top-D.y,Oi=ii/oi;ti={y:D.y+ii,x:D.x+Oi}}return ti}function z(D){b=!0;var et=l.currCanvas.getBoundingClientRect(),q=mt(D.clientX-et.left),Y=_t(D.clientY-et.top),wt=G({x:et.left+et.width/2,y:et.top+et.height*E},{x:D.clientX,y:D.clientY},et),kt=it(wt.x-et.left),Z=J(wt.y-et.top);P.cDefine.DEBUG_MOUSE_LOG&&console.log("modelTapEvent onMouseDown device( x:"+D.clientX+" y:"+D.clientY+" ) view( x:"+kt+" y:"+Z+")"),X.L2Dwidget.emit("tap",D),N.tapEvent(kt,Z)}function B(){b&&(b=!1),dt.setPoint(0,0)}function tt(D){if(D.type=="mousedown")z(D);else if(D.type=="mousemove")(function(et){b=!0;var q=l.currCanvas.getBoundingClientRect(),Y=mt(et.clientX-q.left),wt=_t(et.clientY-q.top),kt=G({x:q.left+q.width/2,y:q.top+q.height*E},{x:et.clientX,y:et.clientY},q),Z=it(kt.x-q.left),$t=J(kt.y-q.top);P.cDefine.DEBUG_MOUSE_LOG&&console.log("modelTurnHead onMouseMove device( x:"+et.clientX+" y:"+et.clientY+" ) view( x:"+Z+" y:"+$t+")"),dt.setPoint(Z,$t)})(D);else if(D.type=="mouseup"){if("button"in D&&D.button!=0)return}else D.type=="mouseleave"&&B()}function Et(D){var et=D.touches[0];D.type=="touchstart"?D.touches.length==1&&z(et):D.type=="touchmove"?function(q){var Y=l.currCanvas.getBoundingClientRect(),wt=mt(q.clientX-Y.left),kt=_t(q.clientY-Y.top),Z=G({x:Y.left+Y.width/2,y:Y.top+Y.height*E},{x:q.clientX,y:q.clientY},Y),$t=it(Z.x-Y.left),Tt=J(Z.y-Y.top);P.cDefine.DEBUG_MOUSE_LOG&&console.log("followPointer onMouseMove device( x:"+q.clientX+" y:"+q.clientY+" ) view( x:"+$t+" y:"+Tt+")"),b&&dt.setPoint($t,Tt)}(et):D.type=="touchend"&&B()}function it(D){var et=g.transformX(D);return bt.invertTransformX(et)}function J(D){var et=g.transformY(D);return bt.invertTransformY(et)}function mt(D){return g.transformX(D)}function _t(D){return g.transformY(D)}M.theRealInit=function(){(0,l.createElement)(),l.currCanvas.addEventListener&&(window.addEventListener("click",tt),window.addEventListener("mousedown",tt),window.addEventListener("mousemove",tt),window.addEventListener("mouseup",tt),document.addEventListener("mouseleave",tt),window.addEventListener("touchstart",Et),window.addEventListener("touchend",Et),window.addEventListener("touchmove",Et)),N=new F.cManager(X.L2Dwidget),dt=new W.L2DTargetPoint;var D=l.currCanvas.getBoundingClientRect(),et=D.height/D.width,q=P.cDefine.VIEW_LOGICAL_LEFT,Y=P.cDefine.VIEW_LOGICAL_RIGHT,wt=-et,kt=et;(bt=new W.L2DViewMatrix).setScreenRect(q,Y,wt,kt),bt.setMaxScreenRect(P.cDefine.VIEW_LOGICAL_MAX_LEFT,P.cDefine.VIEW_LOGICAL_MAX_RIGHT,P.cDefine.VIEW_LOGICAL_MAX_BOTTOM,P.cDefine.VIEW_LOGICAL_MAX_TOP),Z=d.default.mobile()&&v.config.mobile.scale||v.config.model.scale,bt.adjustScale(0,0,Z);var Z;($=new W.L2DMatrix44).multScale(1,D.width/D.height),(g=new W.L2DMatrix44).multTranslate(-D.width/2,-D.height/2),g.multScale(2/D.width,-2/D.height),w.Live2D.setGL(l.currWebGL),l.currWebGL.clearColor(0,0,0,0),$t=v.config.model.jsonPath,N.reloadFlg=!0,N.count++,N.changeModel(l.currWebGL,$t);var $t;Ft||(Ft=!0,function Tt(){(function(){T.MatrixStack.reset(),T.MatrixStack.loadIdentity(),dt.update(),N.setDrag(dt.getX(),dt.getY()),l.currWebGL.clear(l.currWebGL.COLOR_BUFFER_BIT),T.MatrixStack.multMatrix($.getArray()),T.MatrixStack.multMatrix(bt.getArray()),T.MatrixStack.push();for(var li=0;li<N.numModels();li++){var oi=N.getModel(li);if(oi==null)return;oi.initialized&&!oi.updating&&(oi.update(),oi.draw(l.currWebGL))}T.MatrixStack.pop()})();var C=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;C(Tt,l.currCanvas),St!==void 0&&(St(l.currCanvas.toDataURL()),St=void 0)}())},M.captureFrame=function(D){St=D}},function(Gt,M,j){"use strict";var A=j(1),v=j(0);document.head.innerHTML+=`
<style>
  .live2d-widget-dialog-container {
    width: 300px;
    height: 120px;
    position: absolute;
    bottom: 65%;
    right: 0px;
    transform-origin: right;
    padding: 12px;
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
  }
  .live2d-widget-dialog {
    width: 100%;
    height: 100%;
    color: #917159;
    font-size: 16px;
    padding: 12px;
    border: 2px solid rgb(236, 203, 180);
    background: rgb(252, 248, 244);
    box-sizing: border-box;
    border-radius: 10px;
    transform: rotate(-2deg);
    opacity: 0;
    transition: 200ms opacity;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px;
    animation: live2d-widget-dialog-tingle 4s ease-in-out 0s infinite alternate;
  }
  @keyframes live2d-widget-dialog-tingle {
    0% { transform: translate(-1px, 1.5px) rotate(-2deg); }
    100% { transform: translate(1px, -1.5px) rotate(2deg); }
  }
</style>
`;var l=void 0,w=void 0,W=void 0;function F(){w.style.opacity=1}function T(){w.style.opacity=0}function P(d){F(),w.innerText=d,clearTimeout(W),W=setTimeout(function(){T()},5e3)}function x(){var d=new XMLHttpRequest;d.open("get","https://v1.hitokoto.cn"),d.setRequestHeader("Cache-Control","no-cache"),d.onreadystatechange=function(){d.readyState===4&&(P(JSON.parse(d.responseText).hitokoto),setTimeout(x,1e4))},d.send()}Gt.exports={createDialogElement:function(X){(l=document.createElement("div")).className="live2d-widget-dialog-container",l.style.transform="scale("+A.config.display.width/250+")",(w=document.createElement("div")).className="live2d-widget-dialog",l.appendChild(w),X.appendChild(l),v.L2Dwidget.emit("create-dialog",l),A.config.dialog.hitokoto&&x()},displayDialog:F,hiddenDialog:T,alertText:P,showHitokotoLoop:x}},function(Gt,M){Gt.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.cManager=void 0;var A=j(3),v=j(15),l=j(16),w=j(4);function W(F){this.eventemitter=F,this.models=[],this.count=-1,this.reloadFlg=!1,A.Live2DFramework.setPlatformManager(new v.PlatformManager)}W.prototype.createModel=function(){var F=new l.cModel;return this.models.push(F),F},W.prototype.changeModel=function(F,T){this.reloadFlg&&(this.reloadFlg=!1,this.releaseModel(0,F),this.createModel(),this.models[0].load(F,T))},W.prototype.getModel=function(F){return F>=this.models.length?null:this.models[F]},W.prototype.releaseModel=function(F,T){this.models.length<=F||(this.models[F].release(T),delete this.models[F],this.models.splice(F,1))},W.prototype.numModels=function(){return this.models.length},W.prototype.setDrag=function(F,T){for(var P=0;P<this.models.length;P++)this.models[P].setDrag(F,T)},W.prototype.tapEvent=function(F,T){w.cDefine.DEBUG_LOG&&console.log("tapEvent view x:"+F+" y:"+T);for(var P=0;P<this.models.length;P++)this.models[P].hitTest(w.cDefine.HIT_AREA_HEAD,F,T)?(this.eventemitter.emit("tapface"),w.cDefine.DEBUG_LOG&&console.log("Tap face."),this.models[P].setRandomExpression()):this.models[P].hitTest(w.cDefine.HIT_AREA_BODY,F,T)&&(this.eventemitter.emit("tapbody"),w.cDefine.DEBUG_LOG&&console.log("Tap body. models["+P+"]"),this.models[P].startRandomMotion(w.cDefine.MOTION_GROUP_TAP_BODY,w.cDefine.PRIORITY_NORMAL));return!0},M.cManager=W},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.PlatformManager=l;var A=j(6),v=j(2);function l(){}l.prototype.loadBytes=function(w,W){var F=new XMLHttpRequest;F.open("GET",w,!0),F.responseType="arraybuffer",F.onload=function(){switch(F.status){case 200:W(F.response);break;default:console.error("Failed to load ("+F.status+") : "+w)}},F.send(null)},l.prototype.loadString=function(w){this.loadBytes(w,function(W){return W})},l.prototype.loadLive2DModel=function(w,W){var F=null;this.loadBytes(w,function(T){F=v.Live2DModelWebGL.loadModel(T),W(F)})},l.prototype.loadTexture=function(w,W,F,T){var P=new Image;P.crossOrigin="Anonymous",P.src=F,P.onload=onload,P.onerror=onerror,P.onload=function(){var x=A.currWebGL,d=x.createTexture();if(!d)return console.error("Failed to generate gl texture name."),-1;w.isPremultipliedAlpha()||x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,1),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,d),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,P),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR_MIPMAP_NEAREST),x.generateMipmap(x.TEXTURE_2D),w.setTexture(W,d),d=null,typeof T=="function"&&T()},P.onerror=function(){console.error("Failed to load image : "+F)}},l.prototype.jsonParseFromBytes=function(w){var W,F=new Uint8Array(w,0,3);return W=F[0]==239&&F[1]==187&&F[2]==191?String.fromCharCode.apply(null,new Uint8Array(w,3)):String.fromCharCode.apply(null,new Uint8Array(w)),JSON.parse(W)},l.prototype.log=function(w){console.log(w)}},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.cModel=F;var A=j(3),v=j(17),l=j(7),w=j(4),W=j(2);function F(){A.L2DBaseModel.prototype.constructor.call(this),this.modelHomeDir="",this.modelSetting=null,this.tmpMatrix=[]}F.prototype=new A.L2DBaseModel,F.prototype.load=function(T,P,x){this.setUpdating(!0),this.setInitialized(!1),this.modelHomeDir=P.substring(0,P.lastIndexOf("/")+1),this.modelSetting=new v.ModelSettingJson;var d=this;this.modelSetting.loadModelSetting(P,function(){var X=d.modelHomeDir+d.modelSetting.getModelFile();d.loadModelData(X,function(N){for(var St=0;St<d.modelSetting.getTextureNum();St++){if(/^https?:\/\/|^\/\//i.test(d.modelSetting.getTextureFile(St)))var Ft=d.modelSetting.getTextureFile(St);else Ft=d.modelHomeDir+d.modelSetting.getTextureFile(St);d.loadTexture(St,Ft,function(){if(d.isTexLoaded){if(d.modelSetting.getExpressionNum()>0){d.expressions={};for(var dt=0;dt<d.modelSetting.getExpressionNum();dt++){var bt=d.modelSetting.getExpressionName(dt),$=d.modelHomeDir+d.modelSetting.getExpressionFile(dt);d.loadExpression(bt,$)}}else d.expressionManager=null,d.expressions={};if(d.eyeBlink==null&&(d.eyeBlink=new A.L2DEyeBlink),d.modelSetting.getPhysicsFile()!=null?d.loadPhysics(d.modelHomeDir+d.modelSetting.getPhysicsFile()):d.physics=null,d.modelSetting.getPoseFile()!=null?d.loadPose(d.modelHomeDir+d.modelSetting.getPoseFile(),function(){d.pose.updateParam(d.live2DModel)}):d.pose=null,d.modelSetting.getLayout()!=null){var g=d.modelSetting.getLayout();g.width!=null&&d.modelMatrix.setWidth(g.width),g.height!=null&&d.modelMatrix.setHeight(g.height),g.x!=null&&d.modelMatrix.setX(g.x),g.y!=null&&d.modelMatrix.setY(g.y),g.center_x!=null&&d.modelMatrix.centerX(g.center_x),g.center_y!=null&&d.modelMatrix.centerY(g.center_y),g.top!=null&&d.modelMatrix.top(g.top),g.bottom!=null&&d.modelMatrix.bottom(g.bottom),g.left!=null&&d.modelMatrix.left(g.left),g.right!=null&&d.modelMatrix.right(g.right)}for(dt=0;dt<d.modelSetting.getInitParamNum();dt++)d.live2DModel.setParamFloat(d.modelSetting.getInitParamID(dt),d.modelSetting.getInitParamValue(dt));for(dt=0;dt<d.modelSetting.getInitPartsVisibleNum();dt++)d.live2DModel.setPartsOpacity(d.modelSetting.getInitPartsVisibleID(dt),d.modelSetting.getInitPartsVisibleValue(dt));d.live2DModel.saveParam(),d.preloadMotionGroup(w.cDefine.MOTION_GROUP_IDLE),d.mainMotionManager.stopAllMotions(),d.setUpdating(!1),d.setInitialized(!0),typeof x=="function"&&x()}})}})})},F.prototype.release=function(T){var P=A.Live2DFramework.getPlatformManager();T.deleteTexture(P.texture)},F.prototype.preloadMotionGroup=function(T){for(var P=this,x=0;x<this.modelSetting.getMotionNum(T);x++){var d=this.modelSetting.getMotionFile(T,x);this.loadMotion(d,this.modelHomeDir+d,function(X){X.setFadeIn(P.modelSetting.getMotionFadeIn(T,x)),X.setFadeOut(P.modelSetting.getMotionFadeOut(T,x))})}},F.prototype.update=function(){if(this.live2DModel!=null){var T=2*((W.UtSystem.getUserTimeMSec()-this.startTimeMSec)/1e3)*Math.PI;this.mainMotionManager.isFinished()&&this.startRandomMotion(w.cDefine.MOTION_GROUP_IDLE,w.cDefine.PRIORITY_IDLE),this.live2DModel.loadParam(),this.mainMotionManager.updateParam(this.live2DModel)||this.eyeBlink!=null&&this.eyeBlink.updateParam(this.live2DModel),this.live2DModel.saveParam(),this.expressionManager==null||this.expressions==null||this.expressionManager.isFinished()||this.expressionManager.updateParam(this.live2DModel),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",30*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",30*this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",this.dragX*this.dragY*-30,1),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",10*this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_X",this.dragX,1),this.live2DModel.addToParamFloat("PARAM_EYE_BALL_Y",this.dragY,1),this.live2DModel.addToParamFloat("PARAM_ANGLE_X",Number(15*Math.sin(T/6.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Y",Number(8*Math.sin(T/3.5345)),.5),this.live2DModel.addToParamFloat("PARAM_ANGLE_Z",Number(10*Math.sin(T/5.5345)),.5),this.live2DModel.addToParamFloat("PARAM_BODY_ANGLE_X",Number(4*Math.sin(T/15.5345)),.5),this.live2DModel.setParamFloat("PARAM_BREATH",Number(.5+.5*Math.sin(T/3.2345)),1),this.physics!=null&&this.physics.updateParam(this.live2DModel),this.lipSync==null&&this.live2DModel.setParamFloat("PARAM_MOUTH_OPEN_Y",this.lipSyncValue),this.pose!=null&&this.pose.updateParam(this.live2DModel),this.live2DModel.update()}else w.cDefine.DEBUG_LOG&&console.error("Failed to update.")},F.prototype.setRandomExpression=function(){var T=[];for(var P in this.expressions)T.push(P);var x=parseInt(Math.random()*T.length);this.setExpression(T[x])},F.prototype.startRandomMotion=function(T,P){var x=this.modelSetting.getMotionNum(T),d=parseInt(Math.random()*x);this.startMotion(T,d,P)},F.prototype.startMotion=function(T,P,x){var d=this.modelSetting.getMotionFile(T,P);if(d!=null&&d!=""){if(x==w.cDefine.PRIORITY_FORCE)this.mainMotionManager.setReservePriority(x);else if(!this.mainMotionManager.reserveMotion(x))return void(w.cDefine.DEBUG_LOG&&console.log("Motion is running."));var X,N=this;this.motions[T]==null?this.loadMotion(T,this.modelHomeDir+d,function(St){X=St,N.setFadeInFadeOut(T,P,x,X)}):(X=this.motions[T],N.setFadeInFadeOut(T,P,x,X))}else w.cDefine.DEBUG_LOG&&console.error("Failed to motion.")},F.prototype.setFadeInFadeOut=function(T,P,x,d){var X=this.modelSetting.getMotionFile(T,P);if(d.setFadeIn(this.modelSetting.getMotionFadeIn(T,P)),d.setFadeOut(this.modelSetting.getMotionFadeOut(T,P)),w.cDefine.DEBUG_LOG&&console.log("Start motion : "+X),this.modelSetting.getMotionSound(T,P)==null)this.mainMotionManager.startMotionPrio(d,x);else{var N=this.modelSetting.getMotionSound(T,P),St=document.createElement("audio");St.src=this.modelHomeDir+N,w.cDefine.DEBUG_LOG&&console.log("Start sound : "+N),St.play(),this.mainMotionManager.startMotionPrio(d,x)}},F.prototype.setExpression=function(T){var P=this.expressions[T];w.cDefine.DEBUG_LOG&&console.log("Expression : "+T),this.expressionManager.startMotion(P,!1)},F.prototype.draw=function(T){l.MatrixStack.push(),l.MatrixStack.multMatrix(this.modelMatrix.getArray()),this.tmpMatrix=l.MatrixStack.getMatrix(),this.live2DModel.setMatrix(this.tmpMatrix),this.live2DModel.draw(),l.MatrixStack.pop()},F.prototype.hitTest=function(T,P,x){for(var d=this.modelSetting.getHitAreaNum(),X=0;X<d;X++)if(T==this.modelSetting.getHitAreaName(X)){var N=this.modelSetting.getHitAreaID(X);return this.hitTestSimple(N,P,x)}return!1}},function(Gt,M,j){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ModelSettingJson=v;var A=j(3);function v(){this.NAME="name",this.ID="id",this.MODEL="model",this.TEXTURES="textures",this.HIT_AREAS="hit_areas",this.PHYSICS="physics",this.POSE="pose",this.EXPRESSIONS="expressions",this.MOTION_GROUPS="motions",this.SOUND="sound",this.FADE_IN="fade_in",this.FADE_OUT="fade_out",this.LAYOUT="layout",this.INIT_PARAM="init_param",this.INIT_PARTS_VISIBLE="init_parts_visible",this.VALUE="val",this.FILE="file",this.json={}}v.prototype.loadModelSetting=function(l,w){var W=this;A.Live2DFramework.getPlatformManager().loadBytes(l,function(F){var T=String.fromCharCode.apply(null,new Uint8Array(F));W.json=JSON.parse(T),w()})},v.prototype.getTextureFile=function(l){return this.json[this.TEXTURES]==null||this.json[this.TEXTURES][l]==null?null:this.json[this.TEXTURES][l]},v.prototype.getModelFile=function(){return this.json[this.MODEL]},v.prototype.getTextureNum=function(){return this.json[this.TEXTURES]==null?0:this.json[this.TEXTURES].length},v.prototype.getHitAreaNum=function(){return this.json[this.HIT_AREAS]==null?0:this.json[this.HIT_AREAS].length},v.prototype.getHitAreaID=function(l){return this.json[this.HIT_AREAS]==null||this.json[this.HIT_AREAS][l]==null?null:this.json[this.HIT_AREAS][l][this.ID]},v.prototype.getHitAreaName=function(l){return this.json[this.HIT_AREAS]==null||this.json[this.HIT_AREAS][l]==null?null:this.json[this.HIT_AREAS][l][this.NAME]},v.prototype.getPhysicsFile=function(){return this.json[this.PHYSICS]},v.prototype.getPoseFile=function(){return this.json[this.POSE]},v.prototype.getExpressionNum=function(){return this.json[this.EXPRESSIONS]==null?0:this.json[this.EXPRESSIONS].length},v.prototype.getExpressionFile=function(l){return this.json[this.EXPRESSIONS]==null?null:this.json[this.EXPRESSIONS][l][this.FILE]},v.prototype.getExpressionName=function(l){return this.json[this.EXPRESSIONS]==null?null:this.json[this.EXPRESSIONS][l][this.NAME]},v.prototype.getLayout=function(){return this.json[this.LAYOUT]},v.prototype.getInitParamNum=function(){return this.json[this.INIT_PARAM]==null?0:this.json[this.INIT_PARAM].length},v.prototype.getMotionNum=function(l){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][l]==null?0:this.json[this.MOTION_GROUPS][l].length},v.prototype.getMotionFile=function(l,w){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][l]==null||this.json[this.MOTION_GROUPS][l][w]==null?null:this.json[this.MOTION_GROUPS][l][w][this.FILE]},v.prototype.getMotionSound=function(l,w){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][l]==null||this.json[this.MOTION_GROUPS][l][w]==null||this.json[this.MOTION_GROUPS][l][w][this.SOUND]==null?null:this.json[this.MOTION_GROUPS][l][w][this.SOUND]},v.prototype.getMotionFadeIn=function(l,w){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][l]==null||this.json[this.MOTION_GROUPS][l][w]==null||this.json[this.MOTION_GROUPS][l][w][this.FADE_IN]==null?1e3:this.json[this.MOTION_GROUPS][l][w][this.FADE_IN]},v.prototype.getMotionFadeOut=function(l,w){return this.json[this.MOTION_GROUPS]==null||this.json[this.MOTION_GROUPS][l]==null||this.json[this.MOTION_GROUPS][l][w]==null||this.json[this.MOTION_GROUPS][l][w][this.FADE_OUT]==null?1e3:this.json[this.MOTION_GROUPS][l][w][this.FADE_OUT]},v.prototype.getInitParamID=function(l){return this.json[this.INIT_PARAM]==null||this.json[this.INIT_PARAM][l]==null?null:this.json[this.INIT_PARAM][l][this.ID]},v.prototype.getInitParamValue=function(l){return this.json[this.INIT_PARAM]==null||this.json[this.INIT_PARAM][l]==null?NaN:this.json[this.INIT_PARAM][l][this.VALUE]},v.prototype.getInitPartsVisibleNum=function(){return this.json[this.INIT_PARTS_VISIBLE]==null?0:this.json[this.INIT_PARTS_VISIBLE].length},v.prototype.getInitPartsVisibleID=function(l){return this.json[this.INIT_PARTS_VISIBLE]==null||this.json[this.INIT_PARTS_VISIBLE][l]==null?null:this.json[this.INIT_PARTS_VISIBLE][l][this.ID]},v.prototype.getInitPartsVisibleValue=function(l){return this.json[this.INIT_PARTS_VISIBLE]==null||this.json[this.INIT_PARTS_VISIBLE][l]==null?NaN:this.json[this.INIT_PARTS_VISIBLE][l][this.VALUE]}}]))}}]);
