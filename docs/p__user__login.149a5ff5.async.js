(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4053],{761620:function(B){B.exports={login:"login___LFxDs",getCaptcha:"getCaptcha___9F10t",icon:"icon___2VK3K",other:"other___2F7Be",register:"register___31gTm",prefixIcon:"prefixIcon___dN9_f",submit:"submit___Q43EO"}},640401:function(B){B.exports={main:"main___2rucS",icon:"icon___5TklJ",other:"other___3tFpJ",register:"register___1VMmz"}},6650:function(B,O,a){"use strict";a.r(O),a.d(O,{default:function(){return $e}});var Ge=a(809227),ee=a(261949),z=a(379812),h=a(721961),Je=a(350927),te=a(315480),ae=a(981617),ne=a(661197),re=a(102100),e=a(556692),ue=a(421326),se=a(484776),oe=a(640401),S=a.n(oe),Qe=a(182785),D=a(848603),Re=a(108919),$=a(117881),le=a(195758),ie=a(664612),ce=a(638933),K=a.n(ce),me=(0,e.createContext)({}),M=me,He=a(401045),ve=a(799293),Xe=a(48602),W=a(808117),Ye=a(10087),j=a(671035),we=a(15746),G=a(631314),C=a(995510),J=a(941877),ke=a(765418),ge=a(133),de=a(788397),Q=a(94232),fe=a(923076),he=a(176821),Ce=a(96985),Ee=a(468215),Ze=a(669989),ye=a(761620),d=a.n(ye),R={UserName:{props:{size:"large",id:"userName",prefix:e.createElement(he.Z,{style:{color:"#1890ff"},className:d().prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:e.createElement(Ce.Z,{className:d().prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:e.createElement(Ee.Z,{className:d().prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:e.createElement(Ze.Z,{className:d().prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},Te=a(444283),be=["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"],V=D.Z.Item,Se=function(t){var n=t.onChange,u=t.defaultValue,s=t.customProps,i=s===void 0?{}:s,v=t.rules,c={rules:v||i.rules};return n&&(c.onChange=n),u&&(c.initialValue=u),c},pe=function(t){var n=(0,e.useState)(t.countDown||0),u=(0,h.Z)(n,2),s=u[0],i=u[1],v=(0,e.useState)(!1),c=(0,h.Z)(v,2),m=c[0],g=c[1],I=t.onChange,p=t.customProps,L=t.defaultValue,f=t.rules,y=t.name,F=t.getCaptchaButtonText,N=t.getCaptchaSecondText,o=t.updateActive,l=t.type,k=t.tabUtil,Ke=(0,Q.Z)(t,be),We=(0,e.useCallback)(function(){var T=(0,de.Z)((0,J.Z)().mark(function x(A){var U;return(0,J.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Te.m)(A);case 2:if(U=b.sent,U!==!1){b.next=5;break}return b.abrupt("return");case 5:ge.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234"),g(!0);case 7:case"end":return b.stop()}},x)}));return function(x){return T.apply(this,arguments)}}(),[]);if((0,e.useEffect)(function(){var T=0,x=t.countDown;return m&&(T=window.setInterval(function(){i(function(A){return A<=1?(g(!1),clearInterval(T),x||60):A-1})},1e3)),function(){return clearInterval(T)}},[m]),!y)return null;var q=Se(t),_=Ke||{};if(l==="Captcha"){var je=(0,fe.Z)(_,["onGetCaptcha","countDown"]);return e.createElement(V,{shouldUpdate:!0},function(T){var x=T.getFieldValue;return e.createElement(ve.Z,{gutter:8},e.createElement(j.Z,{span:16},e.createElement(V,(0,C.Z)({name:y},q),e.createElement(G.Z,(0,C.Z)({},p,je)))),e.createElement(j.Z,{span:8},e.createElement(W.Z,{disabled:m,className:d().getCaptcha,size:"large",onClick:function(){var U=x("mobile");We(U)}},m?"".concat(s," \u79D2"):"\u83B7\u53D6\u9A8C\u8BC1\u7801")))})}return e.createElement(V,(0,C.Z)({name:y},q),e.createElement(G.Z,(0,C.Z)({},p,_)))},H={};Object.keys(R).forEach(function(r){var t=R[r];H[r]=function(n){return e.createElement(M.Consumer,null,function(u){return e.createElement(pe,(0,C.Z)({customProps:t.props,rules:t.rules},n,{type:r},u,{updateActive:u.updateActive}))})}});var P=H,Le=["className"],xe=D.Z.Item,Fe=function(t){var n=t.className,u=(0,Q.Z)(t,Le),s=K()(d().submit,n);return e.createElement(xe,null,e.createElement(W.Z,(0,C.Z)({size:"large",className:s,type:"primary",htmlType:"submit"},u)))},Ne=Fe,Ae=$.Z.TabPane,Be=function(){var r=0;return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r+=1,"".concat(t).concat(r)}}(),Pe=function(t){(0,e.useEffect)(function(){var u=Be("login-tab-"),s=t.tabUtil;s&&s.addTab(u)},[]);var n=t.children;return e.createElement(Ae,t,t.active&&n)},X=function(t){return e.createElement(M.Consumer,null,function(n){return e.createElement(Pe,(0,C.Z)({tabUtil:n.tabUtil},t))})};X.typeName="LoginTab";var Ie=X,E=function(t){var n=t.className,u=(0,e.useState)([]),s=(0,h.Z)(u,2),i=s[0],v=s[1],c=(0,e.useState)(),m=(0,h.Z)(c,2),g=m[0],I=m[1],p=(0,ie.Z)("",{value:t.activeKey,onChange:t.onTabChange}),L=(0,h.Z)(p,2),f=L[0],y=L[1],F=[],N=[];return e.Children.forEach(t.children,function(o){!o||(o.type.typeName==="LoginTab"?F.push(o):N.push(o))}),e.createElement(M.Provider,{value:{tabUtil:{addTab:function(l){v([].concat((0,le.Z)(i),[l]))},removeTab:function(l){v(i.filter(function(k){return k!==l}))}},updateActive:function(l){g[f]?g[f].push(l):g[f]=[l],I(g)}}},e.createElement("div",{className:K()(n,d().login)},e.createElement(D.Z,{form:t.form,onFinish:function(l){t.onSubmit&&t.onSubmit(l)}},i.length?e.createElement(e.Fragment,null,e.createElement($.Z,{animated:!1,className:d().tabs,activeKey:f,onChange:function(l){y(l)}},F),N):t.children)))};E.Tab=Ie,E.Submit=Ne,E.UserName=P.UserName,E.Password=P.Password,E.Mobile=P.Mobile,E.Captcha=P.Captcha;var Z=E,Y=Z.Tab,Ue=Z.UserName,De=Z.Password,Me=Z.Mobile,Ve=Z.Captcha,Oe=Z.Submit,w=function(t){var n=t.content;return e.createElement(te.Z,{style:{marginBottom:24},message:n,type:"error",showIcon:!0})},ze=function(t){var n=t.userAndlogin,u=n===void 0?{}:n,s=t.submitting,i=u.status,v=u.type,c=(0,e.useState)(!0),m=(0,h.Z)(c,2),g=m[0],I=m[1],p=(0,e.useState)("account"),L=(0,h.Z)(p,2),f=L[0],y=L[1],F=function(o){var l=t.dispatch;l({type:"userAndlogin/login",payload:(0,z.Z)((0,z.Z)({},o),{},{type:f})})};return e.createElement("div",{className:S().main},e.createElement(Z,{activeKey:f,onTabChange:y,onSubmit:F},e.createElement(Y,{key:"account",tab:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},i==="error"&&v==="account"&&!s&&e.createElement(w,{content:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design\uFF09"}),e.createElement(Ue,{name:"userName",placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),e.createElement(De,{name:"password",placeholder:"\u5BC6\u7801: ant.design",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})),e.createElement(Y,{key:"mobile",tab:"\u624B\u673A\u53F7\u767B\u5F55"},i==="error"&&v==="mobile"&&!s&&e.createElement(w,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),e.createElement(Me,{name:"mobile",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),e.createElement(Ve,{name:"captcha",placeholder:"\u9A8C\u8BC1\u7801",countDown:120,getCaptchaButtonText:"",getCaptchaSecondText:"\u79D2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}]})),e.createElement("div",null,e.createElement(ee.Z,{checked:g,onChange:function(o){return I(o.target.checked)}},"\u81EA\u52A8\u767B\u5F55"),e.createElement("a",{style:{float:"right"}},"\u5FD8\u8BB0\u5BC6\u7801")),e.createElement(Oe,{loading:s},"\u767B\u5F55"),e.createElement("div",{className:S().other},"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F",e.createElement(ae.Z,{className:S().icon}),e.createElement(ne.Z,{className:S().icon}),e.createElement(re.Z,{className:S().icon}),e.createElement(ue.rU,{className:S().register,to:"/user/register"},"\u6CE8\u518C\u8D26\u6237"))))},$e=(0,se.$j)(function(r){var t=r.userAndlogin,n=r.loading;return{userAndlogin:t,submitting:n.effects["userAndlogin/login"]}})(ze)}}]);
