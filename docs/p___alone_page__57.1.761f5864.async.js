(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9283],{851065:function(Z,f,r){"use strict";r.r(f),r.d(f,{_:function(){return T}});var x=r(15746),E=r(631314),p=r(721961),t=r(556692),L=r(946508),N=r(156464),U=r(422397),c=new L.f("\u667A\u5DE5\u7F51\u7EDC\u68B3\u7406_Cp_SaveLoad"),T=function(){var j=(0,t.useState)(c.loadData____\u5141\u8BB8\u90E8\u5206\u6570\u636E\u6B8B\u7F3A()),I=(0,p.Z)(j,2),o=I[0],h=I[1];function K(){var s,i,C,P,F,S="\u672A\u8BB0\u5F55",y=(s=o.vpc_\u533A\u57DF)===null||s===void 0?void 0:s.split(`
`).map(function(e){return e.trim()}).filter(function(e){return!!e}).map(function(e){var n,u,a,l=e.split(/\s+/),v=(0,p.Z)(l,2),d=v[0],O=v[1];if(l.length===2)u=d,S=u,a=O;else if(l.length===1)u=S,a=d;else{var g="\u683C\u5F0F\u9519\u8BEF\uFF01\uFF01  ".concat(e);alert(g)}if(!a){var b="\u5730\u5740\u672A\u6709\u6548\u622A\u53D6\uFF01\uFF01\uFF01   ".concat(e);alert(b)}return{add\u548Cname:"".concat(u,"  |  ").concat(a),net\u540D:u,rawNetAdd:a,subnet:N.s.subnet____\u5207\u8BB0\u53EA\u80FD\u653E\u6BB5____\u7EAFIP\u4E0D\u4F1A\u62A5\u9519\u4F46\u6709\u5927\u5751((n=a)!==null&&n!==void 0?n:"")}}),D=(i=o.\u5355\u7EAFip_\u6570\u7EC4)===null||i===void 0?void 0:i.split(`
`).map(function(e){return e.trim()}).filter(function(e){return!!e}),A=(C=JSON.parse((F=o.cmdbIP_\u6570\u7EC4)!==null&&F!==void 0?F:"{}"))===null||C===void 0||(P=C.data)===null||P===void 0?void 0:P.info,m={},_={};function R(e){var n;return{ip:e.host.bk_host_innerip,name:e.host.host_name_alias,module:(n=e.module[0])===null||n===void 0?void 0:n.TopModuleName}}if(y&&D&&A){var B=[],W=[];y.forEach(function(e){var n=e.add\u548Cname;if(!n)throw new Error("rawNetAdd\u4E0D\u5E94\u4E3A\u7A7A\uFF1F".concat(JSON.stringify(e)));m[n]===void 0&&(m[n]=[]),_[n]===void 0&&(_[n]=[]),D.forEach(function(u){if(e.subnet.contains(u)){var a;(a=m[n])===null||a===void 0||a.push(u),B.push(u)}}),A.forEach(function(u){var a=u.host.bk_host_innerip;if(e.subnet.contains(a)){var l;(l=_[n])===null||l===void 0||l.push(R(u)),W.push(u)}})}),m.\u672A\u5F52\u7C7B=D.filter(function(e){return!B.includes(e)}),_.\u672A\u5F52\u7C7B=A.filter(function(e){return!W.includes(e)}).map(function(e){return R(e)})}return Object.entries(_).forEach(function(e){var n=(0,p.Z)(e,2),u=n[0],a=n[1];_[u]=a.sort(function(l,v){var d=l.ip,O=v.ip,g=Number(d.split(".").map(function(M){return"000".concat(M).slice(-3)}).join("")),b=Number(O.split(".").map(function(M){return"000".concat(M).slice(-3)}).join(""));return g-b})}),_}return t.createElement(t.Fragment,null,t.createElement("div",{style:{display:"flex",flexDirection:"row"}},t.createElement("div",{style:{minWidth:"40em"}},t.createElement("h1",null,"VPC\u533A\u57DF"),t.createElement(E.Z.TextArea,{autoSize:{minRows:10},value:o.vpc_\u533A\u57DF,onChange:function(i){c.simple_set_and_save("vpc_\u533A\u57DF",i,o,h)}})),t.createElement("div",{style:{minWidth:"15em"}},t.createElement("h1",null,"\u8D44\u4EA7IP"),t.createElement(E.Z.TextArea,{autoSize:{minRows:10,maxRows:16},value:o.\u5355\u7EAFip_\u6570\u7EC4,onChange:function(i){c.simple_set_and_save("\u5355\u7EAFip_\u6570\u7EC4",i,o,h)}})),t.createElement("div",{style:{minWidth:"15em"}},t.createElement("h1",null,"\uFF08\u4ECEAPI\u63A5\u53E3\u6293\u53D6\uFF09CMBD-IP\u8BE6\u60C5"),t.createElement(E.Z.TextArea,{autoSize:{minRows:10,maxRows:16},value:o.cmdbIP_\u6570\u7EC4,onChange:function(i){c.simple_set_and_save("cmdbIP_\u6570\u7EC4",i,o,h)}})),t.createElement("div",null,t.createElement("h1",null,"\u5F52\u5C5E\u7ED3\u679C"),t.createElement("div",null,(0,U.TableHelper_QuickCopy_Fn____Cp)(JSON.stringify(K(),void 0,2))))))};f.default=T}}]);
