(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5805],{614278:function(D){D.exports={iconGroup:"iconGroup___3RiPi",anticon:"anticon___3NFul",rankingList:"rankingList___2GuWM",rankingItemNumber:"rankingItemNumber___31ZrU",active:"active___3Bsi9",rankingItemTitle:"rankingItemTitle___2Yoy1",salesExtra:"salesExtra___3lIXj",currentDate:"currentDate___7lDDb",salesCard:"salesCard___1Iqf3",salesBar:"salesBar___3JP41",salesRank:"salesRank____67l0",salesCardExtra:"salesCardExtra___1yLFX",salesTypeRadio:"salesTypeRadio___2LyMm",offlineCard:"offlineCard___Oqn6V",trendText:"trendText___3J91q",rankingTitle:"rankingTitle___28H5N",salesExtraWrap:"salesExtraWrap___1k1PZ"}},853483:function(D,T,a){"use strict";a.r(T),a.d(T,{default:function(){return $}});var aa=a(401045),S=a(799293),ta=a(10087),E=a(671035),ea=a(913885),A=a(29789),na=a(703494),f=a(30951),Z=a(686137),x=a(338324),R=a(838339),I=a(677971),V=a(61690),t=a(556692),F=a(253661),G=a(484776),sa=a(885966),O=a(635321),M=function(){return t.createElement("div",{style:{paddingTop:100,textAlign:"center"}},t.createElement(O.Z,{size:"large"}))},z=a(852730),c=a.n(z);function p(o){return o*1<10?"0".concat(o):o}function v(o){var n=new Date,d=1e3*60*60*24;if(o==="today")return n.setHours(0),n.setMinutes(0),n.setSeconds(0),[c()(n),c()(n.getTime()+(d-1e3))];if(o==="week"){var e=n.getDay();n.setHours(0),n.setMinutes(0),n.setSeconds(0),e===0?e=6:e-=1;var i=n.getTime()-e*d;return[c()(i),c()(i+(7*d-1e3))]}var m=n.getFullYear();if(o==="month"){var u=n.getMonth(),l=c()(n).add(1,"months"),r=l.year(),s=l.month();return[c()("".concat(m,"-").concat(p(u+1),"-01 00:00:00")),c()(c()("".concat(r,"-").concat(p(s+1),"-01 00:00:00")).valueOf()-1e3)]}return[c()("".concat(m,"-01-01 00:00:00")),c()("".concat(m,"-12-31 23:59:59"))]}var K=a(614278),C=a.n(K),L=t.lazy(function(){return Promise.all([a.e(1216),a.e(9351),a.e(7189)]).then(a.bind(a,397189))}),N=t.lazy(function(){return Promise.all([a.e(1216),a.e(9351),a.e(9961)]).then(a.bind(a,999961))}),W=t.lazy(function(){return Promise.all([a.e(1216),a.e(9351),a.e(4042)]).then(a.bind(a,50341))}),B=t.lazy(function(){return Promise.all([a.e(1216),a.e(9351),a.e(778)]).then(a.bind(a,500778))}),H=t.lazy(function(){return Promise.all([a.e(1216),a.e(9351),a.e(8719)]).then(a.bind(a,258719))}),U=function(o){(0,R.Z)(d,o);var n=(0,I.Z)(d);function d(){var e;(0,Z.Z)(this,d);for(var i=arguments.length,m=new Array(i),u=0;u<i;u++)m[u]=arguments[u];return e=n.call.apply(n,[this].concat(m)),e.state={salesType:"all",currentTabKey:"",rangePickerValue:v("year")},e.reqRef=0,e.timeoutId=0,e.handleChangeSalesType=function(l){e.setState({salesType:l.target.value})},e.handleTabChange=function(l){e.setState({currentTabKey:l})},e.handleRangePickerChange=function(l){var r=e.props.dispatch;e.setState({rangePickerValue:l}),r({type:"dashboardAndanalysis/fetchSalesData"})},e.selectDate=function(l){var r=e.props.dispatch;e.setState({rangePickerValue:v(l)}),r({type:"dashboardAndanalysis/fetchSalesData"})},e.isActive=function(l){var r=e.state.rangePickerValue;if(!r)return"";var s=v(l);return!s||!r[0]||!r[1]?"":r[0].isSame(s[0],"day")&&r[1].isSame(s[1],"day")?C().currentDate:""},e}return(0,x.Z)(d,[{key:"componentDidMount",value:function(){var i=this.props.dispatch;this.reqRef=requestAnimationFrame(function(){i({type:"dashboardAndanalysis/fetch"})})}},{key:"componentWillUnmount",value:function(){var i=this.props.dispatch;i({type:"dashboardAndanalysis/clear"}),cancelAnimationFrame(this.reqRef),clearTimeout(this.timeoutId)}},{key:"render",value:function(){var i=this.state,m=i.rangePickerValue,u=i.salesType,l=i.currentTabKey,r=this.props,s=r.dashboardAndanalysis,h=r.loading,j=s.visitData,J=s.visitData2,X=s.salesData,Y=s.searchData,y=s.offlineData,Q=s.offlineChartData,k=s.salesTypeData,b=s.salesTypeDataOnline,w=s.salesTypeDataOffline,g;u==="all"?g=k:g=u==="online"?b:w;var q=t.createElement(f.Z,null,t.createElement(f.Z.Item,null,"\u64CD\u4F5C\u4E00"),t.createElement(f.Z.Item,null,"\u64CD\u4F5C\u4E8C")),P=t.createElement("span",{className:C().iconGroup},t.createElement(A.Z,{overlay:q,placement:"bottomRight"},t.createElement(V.Z,null))),_=l||y[0]&&y[0].name;return t.createElement(F.Z,null,t.createElement(t.Fragment,null,t.createElement(t.Suspense,{fallback:t.createElement(M,null)},t.createElement(L,{loading:h,visitData:j})),t.createElement(t.Suspense,{fallback:null},t.createElement(N,{rangePickerValue:m,salesData:X,isActive:this.isActive,handleRangePickerChange:this.handleRangePickerChange,loading:h,selectDate:this.selectDate})),t.createElement(S.Z,{gutter:24,style:{marginTop:24}},t.createElement(E.Z,{xl:12,lg:24,md:24,sm:24,xs:24},t.createElement(t.Suspense,{fallback:null},t.createElement(W,{loading:h,visitData2:J,searchData:Y,dropdownGroup:P}))),t.createElement(E.Z,{xl:12,lg:24,md:24,sm:24,xs:24},t.createElement(t.Suspense,{fallback:null},t.createElement(B,{dropdownGroup:P,salesType:u,loading:h,salesPieData:g,handleChangeSalesType:this.handleChangeSalesType})))),t.createElement(t.Suspense,{fallback:null},t.createElement(H,{activeKey:_,loading:h,offlineData:y,offlineChartData:Q,handleTabChange:this.handleTabChange}))))}}]),d}(t.Component),$=(0,G.$j)(function(o){var n=o.dashboardAndanalysis,d=o.loading;return{dashboardAndanalysis:n,loading:d.effects["dashboardAndanalysis/fetch"]}})(U)}}]);
