(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"23Sy":function(C,j,a){C.exports={radar:"radar___1_avc",legend:"legend___cMjxg",legendItem:"legendItem___13xG8",dot:"dot___10Iis"}},VuCS:function(C,j,a){"use strict";a.r(j);var Ee=a("14J3"),x=a("BMrR"),Ce=a("jCWc"),N=a("kPKH"),ye=a("IzEo"),g=a("bx4M"),je=a("Mwp2"),G=a("VXEj"),k=a("fWQN"),I=a("mtLc"),B=a("yKVA"),H=a("879j"),Ae=a("aHsQ"),S=a("sGsY"),Ne=a("Telt"),L=a("Tckk"),Le=a("cWXX"),Q=a("/ezw"),D=a("q1tI"),e=a.n(D),A=a("uYtH"),Y=a("9kvl"),Z=a("tMyG"),J=a("wd/R"),O=a.n(J),E=a("yP6+"),K=a("0Owb");function $(u){var s=u.style;s.height="100%";var l=parseInt("".concat(getComputedStyle(u).height),10),t=parseInt("".concat(getComputedStyle(u).paddingTop),10)+parseInt("".concat(getComputedStyle(u).paddingBottom),10);return l-t}function U(u){if(!u)return 0;var s=u,l=$(s),t=s.parentNode;return t&&(l=$(t)),l}function V(){return function(u){var s=function(l){Object(B.a)(c,l);var t=Object(H.a)(c);function c(){var o;Object(k.a)(this,c);for(var n=arguments.length,r=new Array(n),v=0;v<n;v++)r[v]=arguments[v];return o=t.call.apply(t,[this].concat(r)),o.state={computedHeight:0},o.root=void 0,o.handleRoot=function(m){o.root=m},o}return Object(I.a)(c,[{key:"componentDidMount",value:function(){var n=this.props.height;if(!n){var r=U(this.root);this.setState({computedHeight:r}),r<1&&(r=U(this.root),this.setState({computedHeight:r}))}}},{key:"render",value:function(){var n=this.props.height,r=this.state.computedHeight,v=n||r;return e.a.createElement("div",{ref:this.handleRoot},v>0&&e.a.createElement(u,Object(K.a)({},this.props,{height:v})))}}]),c}(e.a.Component);return s}}var w=V,q=a("23Sy"),F=a.n(q),_=function(u){Object(B.a)(l,u);var s=Object(H.a)(l);function l(){var t;Object(k.a)(this,l);for(var c=arguments.length,o=new Array(c),n=0;n<c;n++)o[n]=arguments[n];return t=s.call.apply(s,[this].concat(o)),t.state={legendData:[]},t.chart=void 0,t.node=void 0,t.getG2Instance=function(r){t.chart=r},t.getLegendData=function(){if(!!t.chart){var r=t.chart.getAllGeoms()[0];if(!!r){var v=r.get("dataArray")||[],m=v.map(function(p){var h=p.map(function(f){return f._origin}),i={name:h[0].name,color:p[0].color,checked:!0,value:h.reduce(function(f,b){return f+b.value},0)};return i});t.setState({legendData:m})}}},t.handleRef=function(r){t.node=r},t.handleLegendClick=function(r,v){var m=r;m.checked=!m.checked;var p=t.state.legendData;p[v]=m;var h=p.filter(function(i){return i.checked}).map(function(i){return i.name});t.chart&&(t.chart.filter("name",function(i){return h.indexOf("".concat(i))>-1}),t.chart.repaint()),t.setState({legendData:p})},t}return Object(I.a)(l,[{key:"componentDidMount",value:function(){this.getLegendData()}},{key:"componentDidUpdate",value:function(c){var o=this.props.data;o!==c.data&&this.getLegendData()}},{key:"render",value:function(){var c=this,o=["#1890FF","#FACC14","#2FC25B","#8543E0","#F04864","#13C2C2","#fa8c16","#a0d911"],n=this.props,r=n.data,v=r===void 0?[]:r,m=n.height,p=m===void 0?0:m,h=n.title,i=n.hasLegend,f=i===void 0?!1:i,b=n.forceFit,ue=b===void 0?!0:b,z=n.tickCount,me=z===void 0?5:z,M=n.padding,ve=M===void 0?[35,30,16,30]:M,T=n.animate,pe=T===void 0?!0:T,P=n.colors,W=P===void 0?o:P,X=this.state.legendData,he={value:{min:0,tickCount:me}},ge=p-(f?80:22);return e.a.createElement("div",{className:F.a.radar,style:{height:p}},h&&e.a.createElement("h4",null,h),e.a.createElement(E.Chart,{scale:he,height:ge,forceFit:ue,data:v,padding:ve,animate:pe,onGetG2Instance:this.getG2Instance},e.a.createElement(E.Tooltip,null),e.a.createElement(E.Coord,{type:"polar"}),e.a.createElement(E.Axis,{name:"label",line:void 0,tickLine:void 0,grid:{lineStyle:{lineDash:void 0},hideFirstLine:!1}}),e.a.createElement(E.Axis,{name:"value",grid:{type:"polygon",lineStyle:{lineDash:void 0}}}),e.a.createElement(E.Geom,{type:"line",position:"label*value",color:["name",W],size:1}),e.a.createElement(E.Geom,{type:"point",position:"label*value",color:["name",W],shape:"circle",size:3})),f&&e.a.createElement(x.a,{className:F.a.legend},X.map(function(y,fe){return e.a.createElement(N.a,{span:24/X.length,key:y.name,onClick:function(){return c.handleLegendClick(y,fe)}},e.a.createElement("div",{className:F.a.legendItem},e.a.createElement("p",null,e.a.createElement("span",{className:F.a.dot,style:{backgroundColor:y.checked?y.color:"#aaa"}}),e.a.createElement("span",null,y.name)),e.a.createElement("h6",null,y.value)))})))}}]),l}(D.Component),ee=w()(_),De=a("+L6B"),te=a("2/Rp"),ae=a("xvlK"),ne=a("tzUB"),re=a.n(ne),R=function(s){var l=s.links,t=s.linkElement,c=s.onAdd;return e.a.createElement("div",{className:re.a.linkGroup},l.map(function(o){return Object(D.createElement)(t,{key:"linkGroup-item-".concat(o.id||o.title),to:o.href,href:o.href},o.title)}),e.a.createElement(te.a,{size:"small",type:"primary",ghost:!0,onClick:c},e.a.createElement(ae.a,null)," \u6DFB\u52A0"))};R.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var oe=R,le=a("ZiQ9"),d=a.n(le),ie=[{title:"\u64CD\u4F5C\u4E00",href:""},{title:"\u64CD\u4F5C\u4E8C",href:""},{title:"\u64CD\u4F5C\u4E09",href:""},{title:"\u64CD\u4F5C\u56DB",href:""},{title:"\u64CD\u4F5C\u4E94",href:""},{title:"\u64CD\u4F5C\u516D",href:""}],ce=function(s){var l=s.currentUser,t=l&&Object.keys(l).length;return t?e.a.createElement("div",{className:d.a.pageHeaderContent},e.a.createElement("div",{className:d.a.avatar},e.a.createElement(L.a,{size:"large",src:l.avatar})),e.a.createElement("div",{className:d.a.content},e.a.createElement("div",{className:d.a.contentTitle},"\u65E9\u5B89\uFF0C",l.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"),e.a.createElement("div",null,l.title," |",l.group))):e.a.createElement(Q.a,{avatar:!0,paragraph:{rows:1},active:!0})},se=function(){return e.a.createElement("div",{className:d.a.extraContent},e.a.createElement("div",{className:d.a.statItem},e.a.createElement(S.a,{title:"\u9879\u76EE\u6570",value:56})),e.a.createElement("div",{className:d.a.statItem},e.a.createElement(S.a,{title:"\u56E2\u961F\u5185\u6392\u540D",value:8,suffix:"/ 24"})),e.a.createElement("div",{className:d.a.statItem},e.a.createElement(S.a,{title:"\u9879\u76EE\u8BBF\u95EE",value:2223})))},de=function(u){Object(B.a)(l,u);var s=Object(H.a)(l);function l(){var t;Object(k.a)(this,l);for(var c=arguments.length,o=new Array(c),n=0;n<c;n++)o[n]=arguments[n];return t=s.call.apply(s,[this].concat(o)),t.renderActivities=function(r){var v=r.template.split(/@\{([^{}]*)\}/gi).map(function(m){return r[m]?e.a.createElement("a",{href:r[m].link,key:r[m].name},r[m].name):m});return e.a.createElement(G.b.Item,{key:r.id},e.a.createElement(G.b.Item.Meta,{avatar:e.a.createElement(L.a,{src:r.user.avatar}),title:e.a.createElement("span",null,e.a.createElement("a",{className:d.a.username},r.user.name),"\xA0",e.a.createElement("span",{className:d.a.event},v)),description:e.a.createElement("span",{className:d.a.datetime,title:r.updatedAt},O()(r.updatedAt).fromNow())}))},t}return Object(I.a)(l,[{key:"componentDidMount",value:function(){var c=this.props.dispatch;c({type:"dashboardAndworkplace/init"})}},{key:"componentWillUnmount",value:function(){var c=this.props.dispatch;c({type:"dashboardAndworkplace/clear"})}},{key:"render",value:function(){var c=this,o=this.props,n=o.currentUser,r=o.activities,v=o.projectNotice,m=o.projectLoading,p=o.activitiesLoading,h=o.radarData;return!n||!n.userid?null:e.a.createElement(Z.a,{content:e.a.createElement(ce,{currentUser:n}),extraContent:e.a.createElement(se,null)},e.a.createElement(x.a,{gutter:24},e.a.createElement(N.a,{xl:16,lg:24,md:24,sm:24,xs:24},e.a.createElement(g.a,{className:d.a.projectList,style:{marginBottom:24},title:"\u8FDB\u884C\u4E2D\u7684\u9879\u76EE",bordered:!1,extra:e.a.createElement(A.a,{to:"/"},"\u5168\u90E8\u9879\u76EE"),loading:m,bodyStyle:{padding:0}},v.map(function(i){return e.a.createElement(g.a.Grid,{className:d.a.projectGrid,key:i.id},e.a.createElement(g.a,{bodyStyle:{padding:0},bordered:!1},e.a.createElement(g.a.Meta,{title:e.a.createElement("div",{className:d.a.cardTitle},e.a.createElement(L.a,{size:"small",src:i.logo}),e.a.createElement(A.a,{to:i.href},i.title)),description:i.description}),e.a.createElement("div",{className:d.a.projectItemContent},e.a.createElement(A.a,{to:i.memberLink},i.member||""),i.updatedAt&&e.a.createElement("span",{className:d.a.datetime,title:i.updatedAt},O()(i.updatedAt).fromNow()))))})),e.a.createElement(g.a,{bodyStyle:{padding:0},bordered:!1,className:d.a.activeCard,title:"\u52A8\u6001",loading:p},e.a.createElement(G.b,{loading:p,renderItem:function(f){return c.renderActivities(f)},dataSource:r,className:d.a.activitiesList,size:"large"}))),e.a.createElement(N.a,{xl:8,lg:24,md:24,sm:24,xs:24},e.a.createElement(g.a,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0}},e.a.createElement(oe,{onAdd:function(){},links:ie,linkElement:A.a})),e.a.createElement(g.a,{style:{marginBottom:24},bordered:!1,title:"XX \u6307\u6570",loading:h.length===0},e.a.createElement("div",{className:d.a.chart},e.a.createElement(ee,{hasLegend:!0,height:343,data:h}))),e.a.createElement(g.a,{bodyStyle:{paddingTop:12,paddingBottom:12},bordered:!1,title:"\u56E2\u961F",loading:m},e.a.createElement("div",{className:d.a.members},e.a.createElement(x.a,{gutter:48},v.map(function(i){return e.a.createElement(N.a,{span:12,key:"members-item-".concat(i.id)},e.a.createElement(A.a,{to:i.href},e.a.createElement(L.a,{src:i.logo,size:"small"}),e.a.createElement("span",{className:d.a.member},i.member)))})))))))}}]),l}(D.Component),Fe=j.default=Object(Y.c)(function(u){var s=u.dashboardAndworkplace,l=s.currentUser,t=s.projectNotice,c=s.activities,o=s.radarData,n=u.loading;return{currentUser:l,projectNotice:t,activities:c,radarData:o,currentUserLoading:n.effects["dashboardAndworkplace/fetchUserCurrent"],projectLoading:n.effects["dashboardAndworkplace/fetchProjectNotice"],activitiesLoading:n.effects["dashboardAndworkplace/fetchActivitiesList"]}})(de)},ZiQ9:function(C,j,a){C.exports={activitiesList:"activitiesList___1iz4w",username:"username___2CaQo",event:"event___37Bra",pageHeaderContent:"pageHeaderContent___1v9Rj",avatar:"avatar___2REGU",content:"content___2JXYM",contentTitle:"contentTitle___2ZQYk",extraContent:"extraContent___171XZ",statItem:"statItem___WnzK8",members:"members___pCbZL",member:"member___1PrAP",projectList:"projectList___1-phY",cardTitle:"cardTitle___i2mGR",projectGrid:"projectGrid___2_ET-",projectItemContent:"projectItemContent___1Af7z",datetime:"datetime___3wNS1",activeCard:"activeCard___2L47N"}},tzUB:function(C,j,a){C.exports={linkGroup:"linkGroup___3u5k3"}}}]);
